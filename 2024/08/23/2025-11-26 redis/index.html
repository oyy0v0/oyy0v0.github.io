<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>redis | oyy0v0ğŸ˜¼</title><meta name="author" content="oyy0v0"><meta name="copyright" content="oyy0v0"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="çŸ¥è¯†åˆ†äº«">
<meta property="og:type" content="article">
<meta property="og:title" content="redis">
<meta property="og:url" content="https://oyy0v0.top/2024/08/23/2025-11-26%20Redis/index.html">
<meta property="og:site_name" content="oyy0v0ğŸ˜¼">
<meta property="og:description" content="çŸ¥è¯†åˆ†äº«">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg">
<meta property="article:published_time" content="2024-08-22T16:40:00.000Z">
<meta property="article:modified_time" content="2025-12-07T06:03:49.716Z">
<meta property="article:author" content="oyy0v0">
<meta property="article:tag" content="-redis">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg"><link rel="shortcut icon" href="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E7%8C%AB.svg"><link rel="canonical" href="https://oyy0v0.top/2024/08/23/2025-11-26%20Redis/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'redis',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-12-07 14:03:49'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4658720_723un29n3vn.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/readPercent.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://www.fomal.cc/static/css/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/7.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw icon-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw icon-shijianzhou"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw icon-biaoqian"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw icon-fenlei"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw icon-guanyu"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="oyy0v0ğŸ˜¼"><span class="site-name">oyy0v0ğŸ˜¼</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw icon-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw icon-shijianzhou"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw icon-biaoqian"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw icon-fenlei"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw icon-guanyu"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">redis</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-08-22T16:40:00.000Z" title="å‘è¡¨äº 2024-08-23 00:40:00">2024-08-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-12-07T06:03:49.716Z" title="æ›´æ–°äº 2025-12-07 14:03:49">2025-12-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">18.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>62åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="redis"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Redisç®€ä»‹"><a href="#Redisç®€ä»‹" class="headerlink" title="Redisç®€ä»‹"></a>Redisç®€ä»‹</h2><h3 id="NoSQLç®€ä»‹"><a href="#NoSQLç®€ä»‹" class="headerlink" title="NoSQLç®€ä»‹"></a>NoSQLç®€ä»‹</h3><p>â€‹    ç›®å‰å¸‚åœºä¸»æµæ•°æ®å­˜å‚¨éƒ½æ˜¯ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ã€‚æ¯æ¬¡æ“ä½œå…³ç³»å‹æ•°æ®åº“æ—¶éƒ½æ˜¯I/Oæ“ä½œï¼ŒI/Oæ“ä½œæ˜¯ä¸»è¦å½±å“ç¨‹åºæ‰§è¡Œæ€§èƒ½åŸå› ä¹‹ä¸€ï¼Œè¿æ¥æ•°æ®åº“å…³é—­æ•°æ®åº“éƒ½æ˜¯æ¶ˆè€—æ€§èƒ½çš„è¿‡ç¨‹ã€‚å°½é‡å‡å°‘å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œèƒ½å¤Ÿæ˜æ˜¾çš„æå‡ç¨‹åºè¿è¡Œæ•ˆç‡ã€‚</p>
<p>â€‹    é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ï¼Œå¸‚åœºä¸Šå°±å‡ºç°äº†å„ç§NoSQL(Not Only SQL,ä¸ä»…ä»…å¯ä»¥ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“)æ•°æ®åº“ï¼Œå®ƒä»¬çš„å®£ä¼ å£å·ï¼šä¸æ˜¯ä»€ä¹ˆæ ·çš„åœºæ™¯éƒ½å¿…é¡»ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œä¸€äº›ç‰¹å®šçš„åœºæ™¯ä½¿ç”¨NoSQLæ•°æ®åº“æ›´å¥½ã€‚</p>
<p>å¸¸è§NoSQLæ•°æ®åº“ï¼š</p>
<p>â€‹    memcached ï¼šé”®å€¼å¯¹ï¼Œå†…å­˜å‹æ•°æ®åº“ï¼Œæ‰€æœ‰æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ã€‚</p>
<p>â€‹    Redis:å’ŒMemcachedç±»ä¼¼ï¼Œè¿˜å…·å¤‡æŒä¹…åŒ–èƒ½åŠ›ã€‚</p>
<p>â€‹    HBaseï¼šä»¥åˆ—ä½œä¸ºå­˜å‚¨ã€‚</p>
<p>â€‹    MongoDBï¼šä»¥Documentåšå­˜å‚¨ã€‚</p>
<h3 id="2-Redisç®€ä»‹"><a href="#2-Redisç®€ä»‹" class="headerlink" title="2.Redisç®€ä»‹"></a>2.<strong>Redisç®€ä»‹</strong></h3><p>â€‹    Redisæ˜¯ä»¥Key-Valueå½¢å¼è¿›è¡Œå­˜å‚¨çš„NoSQLæ•°æ®åº“ã€‚</p>
<p>â€‹    Redisæ˜¯ä½¿ç”¨Cè¯­è¨€è¿›è¡Œç¼–å†™çš„ã€‚</p>
<p>â€‹    å¹³æ—¶æ“ä½œçš„æ•°æ®éƒ½åœ¨å†…å­˜ä¸­ï¼Œæ•ˆç‡ç‰¹é«˜ï¼Œè¯»çš„æ•ˆç‡110000/sï¼Œå†™81000/sï¼Œæ‰€ä»¥å¤šæŠŠRediså½“åšç¼“å­˜å·¥å…·ä½¿ç”¨ã€‚</p>
<p>â€‹    Redisä»¥soltï¼ˆæ§½ï¼‰ä½œä¸ºæ•°æ®å­˜å‚¨å•å…ƒï¼Œæ¯ä¸ªæ§½ä¸­å¯ä»¥å­˜å‚¨Nå¤šä¸ªé”®å€¼å¯¹ã€‚Redisä¸­å›ºå®šå…·æœ‰16384ã€‚ç†è®ºä¸Šå¯ä»¥å®ç°ä¸€ä¸ªæ§½æ˜¯ä¸€ä¸ªRedisã€‚æ¯ä¸ªå‘Rediså­˜å‚¨æ•°æ®çš„keyéƒ½ä¼šè¿›è¡Œcrc16ç®—æ³•å¾—å‡ºä¸€ä¸ªå€¼åå¯¹16384å–ä½™å°±æ˜¯è¿™ä¸ªkeyå­˜æ”¾çš„soltä½ç½®ã€‚</p>
<p>â€‹    åŒæ—¶é€šè¿‡Redis Sentinelæä¾›é«˜å¯ç”¨ï¼Œé€šè¿‡Redis Clusteræä¾›è‡ªåŠ¨åˆ†åŒºã€‚</p>
<p><strong>ä¸»æµåŠŸèƒ½å’Œåº”ç”¨</strong></p>
<p>1ã€åˆ†æ‹…MySQLå‹åŠ›ï¼ŒMySQLæ˜¯å­˜å…¥ç¡¬ç›˜ï¼ŒRedisæ˜¯åœ¨å†…å­˜ä¸­ä½¿ç”¨ï¼Œæ—¥å¸¸ä½¿ç”¨ä¸­80%æŸ¥è¯¢ï¼Œ20%å†™å…¥ã€‚</p>
<p>2ã€åˆ†æ‹…æµç¨‹ï¼šæŸ¥æ‰¾çš„æ—¶å€™å…ˆæŸ¥æ‰¾redisï¼Œæ‰¾åˆ°ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰å°±å»mysqlï¼Œmysqlè¿”å›æ•°æ®ï¼Œç„¶åå°±æŠŠmysqlå†™å›redisï¼Œç„¶åä»¥åæ‰¾rediså°±èƒ½æ‰¾åˆ°äº†ã€‚</p>
<p>3ã€æ¯”å¦‚è®¡æ•°å™¨ï¼Œæ’è¡Œæ¦œç­‰æ–¹é¢å°±æ˜æ˜¾ç”¨redisä¼˜äºmysql</p>
<p>4ã€å†…å­˜å­˜å‚¨å’ŒæŒä¹…åŒ– RDBå’ŒAOFï¼Œå¦‚æœæ–­ç”µä¹‹åredisæ”¯æŒå¼‚æ­¥å°†å†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç¡¬ç›˜ä¸Šï¼Œç„¶åæœ‰ç”µå°±æ¢å¤åˆ°redisï¼Œä¸éº»çƒ¦Mysql</p>
<p>5ã€é«˜å¯ç”¨ç»“æ„ï¼Œå•æœºï¼Œä¸»ä»ï¼Œå“¨å…µï¼Œé›†ç¾¤ã€‚ä¸ºäº†é¿å…redisæŒ‚äº†ï¼ŒæœåŠ¡å‹åŠ›è¿‡å¤§ã€‚</p>
<p>6ã€ç¼“å­˜ç©¿é€ï¼Œå‡»ç©¿ï¼Œé›ªå´©</p>
<p>7ã€åˆ†å¸ƒå¼é”ï¼Œè·¨æœåŠ¡å™¨åŠ é”å°±æ˜¯ç”¨åˆ†å¸ƒå¼é”ã€‚ä¹‹å‰javaçš„é”æ˜¯é’ˆå¯¹JVMçš„ï¼Œ</p>
<p>8ã€é˜Ÿåˆ—listå’Œsetç»“æ„ï¼Œæ¶ˆæ¯é˜Ÿåˆ—å¹³å°ï¼ŒéªŒè¯ç å‘å¸ƒ</p>
<p>9ã€â€¦.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251125114243582.png" alt="image-20251125114243582"></p>
<h2 id="Rediså•æœºç‰ˆå®‰è£…"><a href="#Rediså•æœºç‰ˆå®‰è£…" class="headerlink" title="Rediså•æœºç‰ˆå®‰è£…"></a>Rediså•æœºç‰ˆå®‰è£…</h2><p>â€‹    1.å®‰è£…ä¾èµ–Cè¯­è¨€ä¾èµ–</p>
<p>â€‹    redisä½¿ç”¨Cè¯­è¨€ç¼–å†™ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…Cè¯­è¨€åº“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y gcc-c++ automake autoconf libtool make tcl </span><br></pre></td></tr></table></figure>
<p>â€‹    </p>
<p>â€‹    2.ä¸Šä¼ å¹¶è§£å‹</p>
<p>â€‹    æŠŠredis-5.0.5.tar.gzä¸Šä¼ åˆ°/usr/local/tmpä¸­</p>
<p>â€‹    è§£å‹æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cd /usr/local/tmp</span><br><span class="line"></span><br><span class="line"># tar zxf redis-5.0.5.tar.gz</span><br></pre></td></tr></table></figure>
<p>â€‹    3.ç¼–è¯‘å¹¶å®‰è£…</p>
<p>â€‹    è¿›å…¥è§£å‹æ–‡ä»¶å¤¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd /usr/local/tmp/redis-5.0.5/</span><br></pre></td></tr></table></figure>
<p>â€‹    ç¼–è¯‘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># make</span><br></pre></td></tr></table></figure>
<p>â€‹    å®‰è£…    </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># make install PREFIX=/usr/local/redis</span><br></pre></td></tr></table></figure>
<p>â€‹    4.å¼€å¯å®ˆæŠ¤è¿›ç¨‹</p>
<p>â€‹    å¤åˆ¶cd /usr/local/tmp/redis-5.0.5/ä¸­redis.confé…ç½®æ–‡ä»¶    </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp redis.conf /usr/local/redis/bin/</span><br></pre></td></tr></table></figure>
<p>â€‹    ä¿®æ”¹é…ç½®æ–‡ä»¶    </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cd /usr/local/redis/bin/</span><br><span class="line"></span><br><span class="line"># vim redis.conf</span><br></pre></td></tr></table></figure>
<p>â€‹    æŠŠdaemonizeçš„å€¼ç”±noä¿®æ”¹ä¸ºyes</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/Redis-01.jpg" alt=""></p>
<p>â€‹    5.ä¿®æ”¹å¤–éƒ¨è®¿é—®</p>
<p>â€‹    åœ¨redis5ä¸­éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶redis.confå…è®¸å¤–éƒ¨è®¿é—®ã€‚éœ€è¦ä¿®æ”¹ä¸¤å¤„ã€‚</p>
<p>â€‹    æ³¨é‡Šæ‰ä¸‹é¢</p>
<p>â€‹    bind 127.0.0.1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#bind 127.0.0.1</span><br></pre></td></tr></table></figure>
<p>â€‹    protected-mode yes æ”¹æˆ no</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/Redis-02.jpg" alt=""></p>
<p>â€‹    6.å¯åŠ¨å¹¶æµ‹è¯•</p>
<p>â€‹    å¯åŠ¨redis</p>
<p>â€‹    # ./redis-server redis.conf</p>
<p>â€‹    é‡å¯redis</p>
<p>â€‹    # ./redis-cli shutdown</p>
<p>â€‹    # ./redis-server redis.conf</p>
<p>â€‹    å¯åŠ¨å®¢æˆ·ç«¯å·¥å…·</p>
<p>â€‹    #./redis-cli </p>
<p>â€‹    åœ¨redis5ä¸­å®¢æˆ·ç«¯å·¥å…·å¯¹å‘½ä»¤ä¼šæœ‰æä¾›åŠŸèƒ½ã€‚</p>
<h2 id="Rediså¸¸ç”¨çš„10å¤§ç±»å‹"><a href="#Rediså¸¸ç”¨çš„10å¤§ç±»å‹" class="headerlink" title="Rediså¸¸ç”¨çš„10å¤§ç±»å‹"></a>Rediså¸¸ç”¨çš„10å¤§ç±»å‹</h2><p>â€‹     Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„k/vç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ï¼Œå®ƒè¿˜æ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ï¼ŒåŒæ ·Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</p>
<p>â€‹        Redisæ”¯æŒçš„äº”å¤§æ•°æ®ç±»å‹åŒ…æ‹¬Stringï¼ˆå­—ç¬¦ä¸²  ç”¨æ³•ï¼š é”®  å€¼ï¼‰ï¼ŒHashï¼ˆå“ˆå¸Œ ç±»ä¼¼Javaä¸­çš„ map  ç”¨æ³•ï¼š é”®  é”®å€¼å¯¹ï¼‰ï¼ŒListï¼ˆåˆ—è¡¨  ç”¨æ³•ï¼šé”® é›†åˆ ä¸å¯ä»¥é‡å¤ï¼‰ï¼ŒSetï¼ˆé›†åˆ ç”¨æ³•ï¼šé”® é›†åˆ å¯ä»¥é‡å¤ï¼‰ï¼ŒZsetï¼ˆsorted set æœ‰åºé›†åˆ    ç”¨æ³•ï¼š é”®  å€¼ å€¼ï¼‰</p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251125140449390.png" alt="image-20251125140449390" style="zoom:200%;" /></p>
<h4 id="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"><a href="#Stringï¼ˆå­—ç¬¦ä¸²ï¼‰" class="headerlink" title="Stringï¼ˆå­—ç¬¦ä¸²ï¼‰"></a>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</h4><p>â€‹    string æ˜¯ redis æœ€åŸºæœ¬çš„ç±»å‹ï¼Œä½ å¯ä»¥ç†è§£æˆä¸ Memcached ä¸€æ¨¡ä¸€æ ·çš„ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚<strong>string ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„</strong>ã€‚<strong>æ„æ€æ˜¯ redis çš„ string å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚æ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚**</strong>string ç±»å‹æ˜¯ Redis æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œstring ç±»å‹çš„å€¼æœ€å¤§èƒ½å­˜å‚¨ 512MBã€‚**</p>
<p>åº”ç”¨åœºæ™¯ï¼š  </p>
<p>â€‹    Stringæ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ•°æ®ç±»å‹ï¼Œæ™®é€šçš„key/valueå­˜å‚¨éƒ½å¯ä»¥å½’ä¸ºæ­¤ç±»ï¼Œvalueå…¶å®ä¸ä»…æ˜¯Stringï¼Œ  </p>
<p>ä¹Ÿå¯ä»¥æ˜¯æ•°å­—ï¼šæ¯”å¦‚æƒ³çŸ¥é“ä»€ä¹ˆæ—¶å€™å°é”ä¸€ä¸ªIPåœ°å€(è®¿é—®è¶…è¿‡å‡ æ¬¡)ã€‚</p>
<p> Listï¼ˆåˆ—è¡¨ï¼‰</p>
<p>â€‹    Redis åˆ—è¡¨æ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºã€‚ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ã€‚åº•å±‚æ˜¯åŒç«¯é“¾è¡¨ï¼Œæ¯ä¸ªåˆ—è¡¨æœ€å¤š40äº¿ä¸ªå…ƒç´ ã€‚</p>
<p>åº”ç”¨åœºæ™¯ï¼š  </p>
<pre><code>    Redis listçš„åº”ç”¨åœºæ™¯éå¸¸å¤šï¼Œä¹Ÿæ˜¯Redisæœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚  
</code></pre><p>â€‹        æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°æœ€æ–°æ¶ˆæ¯æ’è¡Œç­‰åŠŸèƒ½ã€‚  </p>
<pre><code>   Listsçš„å¦ä¸€ä¸ªåº”ç”¨å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥åˆ©ç”¨Listsçš„PUSHæ“ä½œï¼Œå°†ä»»åŠ¡å­˜åœ¨Listsä¸­ï¼Œç„¶åå·¥ä½œçº¿ç¨‹å†ç”¨POPæ“ä½œå°†ä»»åŠ¡å–å‡ºè¿›è¡Œæ‰§è¡Œã€‚  
</code></pre><h4 id="Hashï¼ˆå“ˆå¸Œï¼‰"><a href="#Hashï¼ˆå“ˆå¸Œï¼‰" class="headerlink" title="Hashï¼ˆå“ˆå¸Œï¼‰"></a>Hashï¼ˆå“ˆå¸Œï¼‰</h4><p>â€‹    Redis hash æ˜¯ä¸€ä¸ªé”®å€¼(key=&gt;value)å¯¹é›†åˆã€‚</p>
<p>â€‹    Redis hash æ˜¯ä¸€ä¸ª string ç±»å‹çš„ field å’Œ value çš„æ˜ å°„è¡¨ï¼Œhash ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚</p>
<p>â€‹    ä½¿ç”¨åœºæ™¯ï¼šå­˜å‚¨ã€è¯»å–ã€ä¿®æ”¹ç”¨æˆ·å±æ€§</p>
<p>â€‹    æˆ‘ä»¬ç®€å•ä¸¾ä¸ªå®ä¾‹æ¥æè¿°ä¸‹Hashçš„åº”ç”¨åœºæ™¯ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦å­˜å‚¨ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯å¯¹è±¡æ•°æ®ï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š    ç”¨æˆ·IDï¼Œä¸ºæŸ¥æ‰¾çš„keyï¼Œ  </p>
<p>â€‹        å­˜å‚¨çš„valueç”¨æˆ·å¯¹è±¡åŒ…å«å§“ånameï¼Œå¹´é¾„ageï¼Œç”Ÿæ—¥birthday ç­‰ä¿¡æ¯ï¼Œ  å¦‚æœç”¨æ™®é€šçš„key/valueç»“æ„æ¥å­˜å‚¨ï¼Œä¸»è¦æœ‰ä»¥ä¸‹2ç§å­˜å‚¨æ–¹å¼ï¼š  </p>
<p>â€‹        ç¬¬ä¸€ç§æ–¹å¼å°†ç”¨æˆ·IDä½œä¸ºæŸ¥æ‰¾key,æŠŠå…¶ä»–ä¿¡æ¯å°è£…æˆä¸€ä¸ªå¯¹è±¡ä»¥åºåˆ—åŒ–çš„æ–¹å¼å­˜å‚¨ï¼Œ  </p>
<p>â€‹           å¦‚ï¼šset u001 â€œæä¸‰,18,20010101â€  </p>
<p>â€‹         è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼Œå¢åŠ äº†åºåˆ—åŒ–/ååºåˆ—åŒ–çš„å¼€é”€ï¼Œå¹¶ä¸”åœ¨éœ€è¦ä¿®æ”¹å…¶ä¸­ä¸€é¡¹ä¿¡æ¯æ—¶ï¼Œéœ€è¦æŠŠæ•´ä¸ªå¯¹è±¡å–å›ï¼Œå¹¶ä¸”ä¿®æ”¹æ“ä½œéœ€è¦å¯¹å¹¶å‘è¿›è¡Œä¿æŠ¤ï¼Œå¼•å…¥CASç­‰å¤æ‚é—®é¢˜ã€‚  </p>
<p>â€‹         ç¬¬äºŒç§æ–¹æ³•æ˜¯è¿™ä¸ªç”¨æˆ·ä¿¡æ¯å¯¹è±¡æœ‰å¤šå°‘æˆå‘˜å°±å­˜æˆå¤šå°‘ä¸ªkey-valueå¯¹å„¿ï¼Œç”¨ç”¨æˆ·ID+å¯¹åº”å±æ€§çš„åç§°ä½œä¸ºå”¯ä¸€æ ‡è¯†æ¥å–å¾—å¯¹åº”å±æ€§çš„å€¼ï¼Œ  </p>
<p>â€‹           å¦‚ï¼šmset user:001:name â€œæä¸‰ â€œuser:001:age18 user:001:birthday â€œ20010101â€  è™½ç„¶çœå»äº†åºåˆ—åŒ–å¼€é”€å’Œå¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯ç”¨æˆ·IDä¸ºé‡å¤å­˜å‚¨ï¼Œå¦‚æœå­˜åœ¨å¤§é‡è¿™æ ·çš„æ•°æ®ï¼Œå†…å­˜æµªè´¹è¿˜æ˜¯éå¸¸å¯è§‚çš„ã€‚  </p>
<p>â€‹        é‚£ä¹ˆRedisæä¾›çš„Hashå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h4 id="Setï¼ˆé›†åˆï¼‰"><a href="#Setï¼ˆé›†åˆï¼‰" class="headerlink" title="Setï¼ˆé›†åˆï¼‰"></a>Setï¼ˆé›†åˆï¼‰</h4><p>â€‹    <strong>Redisçš„Setæ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚</strong></p>
<p>â€‹    ä½¿ç”¨åœºæ™¯ï¼š1.å…±åŒå¥½å‹ã€äºŒåº¦å¥½å‹ </p>
<p>â€‹               2. åˆ©ç”¨å”¯ä¸€æ€§ï¼Œå¯ä»¥ç»Ÿè®¡è®¿é—®ç½‘ç«™çš„æ‰€æœ‰ç‹¬ç«‹ IP </p>
<pre><code>  Redis setå¯¹å¤–æä¾›çš„åŠŸèƒ½ä¸listç±»ä¼¼æ˜¯ä¸€ä¸ªåˆ—è¡¨çš„åŠŸèƒ½ï¼Œç‰¹æ®Šä¹‹å¤„åœ¨äºsetæ˜¯å¯ä»¥è‡ªåŠ¨æ’é‡çš„ï¼Œå½“ä½ éœ€è¦å­˜å‚¨ä¸€ä¸ªåˆ—è¡¨æ•°æ®ï¼Œåˆä¸å¸Œæœ›å‡ºç°é‡å¤æ•°æ®æ—¶ï¼Œsetæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå¹¶ä¸”setæä¾›äº†åˆ¤æ–­æŸä¸ªæˆå‘˜æ˜¯å¦åœ¨ä¸€ä¸ªseté›†åˆå†…çš„é‡è¦æ¥å£ï¼Œè¿™ä¸ªä¹Ÿæ˜¯listæ‰€ä¸èƒ½æä¾›çš„ã€‚  

  æ¯”å¦‚åœ¨å¾®åšåº”ç”¨ä¸­ï¼Œæ¯ä¸ªäººçš„å¥½å‹å­˜åœ¨ä¸€ä¸ªé›†åˆï¼ˆsetï¼‰ä¸­ï¼Œè¿™æ ·æ±‚ä¸¤ä¸ªäººçš„å…±åŒå¥½å‹çš„æ“ä½œï¼Œå¯èƒ½å°±åªéœ€è¦ç”¨æ±‚äº¤é›†å‘½ä»¤å³å¯ã€‚  
</code></pre><p>â€‹        Redisè¿˜ä¸ºé›†åˆæä¾›äº†æ±‚äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„å®  </p>
<pre><code>  å®ç°æ–¹å¼ï¼š  
</code></pre><p>â€‹        set çš„å†…éƒ¨å®ç°æ˜¯ä¸€ä¸ª valueæ°¸è¿œä¸ºnullçš„HashMapï¼Œå®é™…å°±æ˜¯é€šè¿‡è®¡ç®—hashçš„æ–¹å¼æ¥å¿«é€Ÿæ’é‡çš„ï¼Œè¿™ä¹Ÿæ˜¯setèƒ½æä¾›åˆ¤æ–­ä¸€ä¸ªæˆå‘˜æ˜¯å¦åœ¨é›†åˆå†…çš„åŸå› ã€‚ </p>
<h4 id="zset-sorted-setï¼šæœ‰åºé›†åˆ"><a href="#zset-sorted-setï¼šæœ‰åºé›†åˆ" class="headerlink" title="zset(sorted setï¼šæœ‰åºé›†åˆ)"></a>zset(sorted setï¼šæœ‰åºé›†åˆ)</h4><pre><code> Redis zset å’Œ set ä¸€æ ·ä¹Ÿæ˜¯stringç±»å‹å…ƒç´ çš„é›†åˆ,ä¸”ä¸å…è®¸é‡å¤çš„æˆå‘˜ã€‚ä¸åŒçš„æ˜¯æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ªdoubleç±»å‹çš„åˆ†æ•°ã€‚redisæ­£æ˜¯é€šè¿‡åˆ†æ•°æ¥ä¸ºé›†åˆä¸­çš„æˆå‘˜è¿›è¡Œä»å°åˆ°å¤§çš„æ’åºã€‚zsetçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚
</code></pre><p>ä½¿ç”¨åœºæ™¯ï¼š1.å¸¦æœ‰æƒé‡çš„å…ƒç´ ï¼Œæ¯”å¦‚ä¸€ä¸ªæ¸¸æˆçš„ç”¨æˆ·å¾—åˆ†æ’è¡Œæ¦œ </p>
<p>â€‹           2.æ¯”è¾ƒå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¸€èˆ¬ç”¨åˆ°çš„åœºæ™¯ä¸ç®—å¤ªå¤š</p>
<h4 id="GEOåœ°ç†ç©ºé—´"><a href="#GEOåœ°ç†ç©ºé—´" class="headerlink" title="GEOåœ°ç†ç©ºé—´"></a>GEOåœ°ç†ç©ºé—´</h4><p>ä¸»è¦ç”¨äºå­˜å‚¨åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œå¹¶å¯¹å­˜å‚¨çš„ä¿¡æ¯è¿›è¡Œæ“ä½œï¼ŒåŒ…æ‹¬æ·»åŠ åœ°ç†ä½ç½®åæ ‡ï¼Œè·å–åœ°ç†ä½ç½®åæ ‡ï¼Œè®¡ç®—ä¸¤ä¸ªä½ç½®çš„è·ç¦»ï¼Œæ ¹æ®ç”¨æˆ·ç»™å®šçš„ç»çº¬åº¦åæ ‡æ¥è·å–æŒ‡å®šèŒƒå›´å†…çš„åœ°ç†ä½ç½®é›†åˆã€‚</p>
<h4 id="HyperLogLog-åŸºæ•°ç»Ÿè®¡"><a href="#HyperLogLog-åŸºæ•°ç»Ÿè®¡" class="headerlink" title="HyperLogLog åŸºæ•°ç»Ÿè®¡"></a>HyperLogLog åŸºæ•°ç»Ÿè®¡</h4><p>åœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€è¦çš„ç©ºé—´æ€»æ˜¯å›ºå®šå¹¶ä¸”å¾ˆå°ã€‚</p>
<p>æ¯”å¦‚ç»Ÿè®¡ä»Šå¤©å¤©çŒ«è®¿é—®çš„è®¿é—®é‡ï¼Œè¿™æ—¶å€™å°±éœ€è¦è®°å½•ä¸é‡å¤çš„å…ƒç´ çš„ç»Ÿè®¡ã€‚åŸºæ•°ç»Ÿè®¡å°±æ˜¯ä¸é‡å¤å…ƒç´ çš„ç»Ÿè®¡</p>
<h4 id="bitmap-ä½å›¾"><a href="#bitmap-ä½å›¾" class="headerlink" title="bitmap ä½å›¾"></a>bitmap ä½å›¾</h4><p>é‡Œé¢ç”±è®¸è®¸å¤šå¤šçš„å°æ ¼å­ç»„æˆï¼Œé‡Œé¢åªèƒ½æ”¾1 å’Œ 0 ï¼Œç”¨æ¥åˆ¤æ–­Y/Nï¼Œç”¨æ¥æ¯æ—¥ç­¾åˆ°ï¼Œç‚¹èµï¼Œç‚¹å‡»ç‡åˆ†æï¼Œæ˜¯å¦ç‚¹èµç­‰åŠŸèƒ½ã€‚</p>
<h4 id="bitfield-ä½åŸŸ"><a href="#bitfield-ä½åŸŸ" class="headerlink" title="bitfield ä½åŸŸ"></a>bitfield ä½åŸŸ</h4><p>ç±»ä¼¼äºä¿®æ”¹javaçš„å­—èŠ‚ç ï¼Œå®æ—¶æ•°æ®çš„æ›¿æ¢å’ŒæŸ¥æ‰¾ã€‚</p>
<h4 id="streamæµ"><a href="#streamæµ" class="headerlink" title="streamæµ"></a>streamæµ</h4><p>redisç‰ˆçš„mqï¼Œæ¶ˆæ¯é˜Ÿåˆ—</p>
<h2 id="Rediså¸¸ç”¨å‘½ä»¤"><a href="#Rediså¸¸ç”¨å‘½ä»¤" class="headerlink" title="Rediså¸¸ç”¨å‘½ä»¤"></a>Rediså¸¸ç”¨å‘½ä»¤</h2><p>Rediså‘½ä»¤ç›¸å…³æ‰‹å†Œæœ‰å¾ˆå¤šï¼Œä¸‹é¢ä¸ºå…¶ä¸­æ¯”è¾ƒå¥½ç”¨çš„ä¸¤ä¸ª</p>
<p>  1.<a target="_blank" rel="noopener" href="https://www.redis.net.cn/order/">https://www.redis.net.cn/order/</a></p>
<p>  2.<a target="_blank" rel="noopener" href="http://doc.redisfans.com/text-in">http://doc.redisfans.com/text-in</a></p>
<h4 id="1-Keyæ“ä½œ"><a href="#1-Keyæ“ä½œ" class="headerlink" title="1. Keyæ“ä½œ"></a>1. Keyæ“ä½œ</h4><p>keys * æŸ¥æ‰¾æ‰€æœ‰key</p>
<p>type [key name] è¿”å›ç±»å‹</p>
<p>unlink key éé˜»å¡åˆ é™¤ï¼ŒçœŸæ­£çš„åˆ é™¤åœ¨åé¢å¼‚æ­¥åˆ é™¤</p>
<p>move key dbindex[0-15] redisé»˜è®¤16ä¸ªåº“ï¼Œç„¶åå°†å½“å‰æ•°æ®åº“çš„keyç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“dbä¸­</p>
<p>select dbindex åˆ‡æ¢æ•°æ®åº“ã€0-15ã€‘</p>
<p>dbsize æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ•°é‡</p>
<p>flushdb æ¸…ç©ºå½“å‰åº“</p>
<p>flushall é€šæ€å…¨éƒ¨åº“</p>
<h5 id="1-1-exists"><a href="#1-1-exists" class="headerlink" title="1.1  exists"></a>1.1  exists</h5><p>â€‹    åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨ã€‚</p>
<p>â€‹    è¯­æ³•ï¼šexists keyåç§°</p>
<p>â€‹    è¿”å›å€¼ï¼šå­˜åœ¨è¿”å›æ•°å­—ï¼Œä¸å­˜åœ¨è¿”å›0</p>
<h5 id="1-2-expire"><a href="#1-2-expire" class="headerlink" title="1.2 expire"></a>1.2 expire</h5><p>â€‹    è®¾ç½®keyçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ç§’</p>
<p>â€‹    è¯­æ³•ï¼šexpire key ç§’æ•°</p>
<p>â€‹    è¿”å›å€¼ï¼šæˆåŠŸè¿”å›1ï¼Œå¤±è´¥è¿”å›0</p>
<h5 id="1-3-ttl"><a href="#1-3-ttl" class="headerlink" title="1.3 ttl"></a>1.3 ttl</h5><p>â€‹    æŸ¥çœ‹keyçš„å‰©ä½™è¿‡æœŸæ—¶é—´</p>
<p>â€‹    è¯­æ³•ï¼šttl key</p>
<p>â€‹    è¿”å›å€¼ï¼šè¿”å›å‰©ä½™æ—¶é—´ï¼Œå¦‚æœä¸è¿‡æœŸè¿”å›-1  -2è¡¨ç¤ºå·²ç»è¿‡æœŸ</p>
<h5 id="1-4-del"><a href="#1-4-del" class="headerlink" title="1.4 del"></a>1.4 del</h5><p>â€‹    æ ¹æ®keyåˆ é™¤é”®å€¼å¯¹ã€‚</p>
<p>â€‹    è¯­æ³•ï¼šdel key</p>
<p>â€‹    è¿”å›å€¼ï¼šè¢«åˆ é™¤keyçš„æ•°é‡</p>
<h4 id="2-å­—ç¬¦ä¸²å€¼-String"><a href="#2-å­—ç¬¦ä¸²å€¼-String" class="headerlink" title="2. å­—ç¬¦ä¸²å€¼(String)"></a>2. <strong>å­—ç¬¦ä¸²å€¼(String)</strong></h4><p><strong>set å’Œ get</strong></p>
<p>ä»»ä½•ä¸€ä¸ªvalueå€¼æœ€å¤§ä¸€ä¸ª512M</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251125174128969.png" alt="image-20251125174128969"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">set k1 v1 nx  å¦‚æœä¸å­˜åœ¨k1å°±åˆ›å»ºk1</span><br><span class="line">set k1 v1 xx å¦‚æœå­˜åœ¨å°±è¦†ç›–åˆ›å»º</span><br><span class="line">set k1 v1 get å…ˆè·å–è€çš„k1çš„å€¼è¿”å›ï¼Œå¹¶ä¸”æŠŠk1çš„å€¼èµ‹å€¼ä¸ºv1</span><br><span class="line">set k1 v1 ex 10 è®¾ç½®10ç§’è¿‡æœŸæ—¶é—´</span><br><span class="line">ttl k1 æŸ¥çœ‹è¿‡æœŸæ—¶é—´</span><br><span class="line">set k1 v1 px 3000 è®¾ç½®3000æ¯«ç§’</span><br><span class="line">ä½†æ˜¯å¦‚æœåŒä¸€ä¸ªkeyä¿®æ”¹æ²¡æœ‰é…ç½®è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆä¿®æ”¹è¦†ç›–çš„æ—¶å€™ä¼šå˜æˆæ°¸ä¹…ä¸è¿‡æœŸï¼Œä½†æ˜¯ç°åœ¨åªæƒ³ä¿®æ”¹å€¼ï¼Œæ—¶é—´ä¸è¦†ç›–</span><br><span class="line">set k1 v1 keepttl</span><br></pre></td></tr></table></figure>
<p><strong>åŒæ—¶è®¾ç½®/è·å–å¤šä¸ªé”®å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mset k1 v1 k2 v2 k3 v3</span><br><span class="line">mget k1 k2 k3</span><br><span class="line">msetnx k1 v1 k4 v4 ä¸€åŠæˆåŠŸä¸€åŠä¸æˆåŠŸçš„è¯é‚£å°±æ˜¯ä¸æˆåŠŸï¼Œæ˜¯ä¸€ä¸ªæ•´ä½“</span><br><span class="line">msetnx k5 v5 k6 v6</span><br></pre></td></tr></table></figure>
<p><strong>è·å–æŒ‡å®šåŒºé—´èŒƒå›´å†…çš„å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set k1 abcd1234</span><br><span class="line">getrange k1 0 -1 è·å–éƒ¨åˆ†value</span><br><span class="line">getrange k1 0 3</span><br><span class="line">setrange k1 1 xxyy  é‚£ä¹ˆå°±å˜æˆäº† axxyy234</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>æ•°å€¼å¢å‡</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">set k1 100</span><br><span class="line">incr k1 ç±»ä¼¼äºi++</span><br><span class="line">incrby k1 3 ç±»ä¼¼äºi+3</span><br><span class="line">decr k1 i--</span><br><span class="line">decrby k1 3</span><br></pre></td></tr></table></figure>
<p><strong>è·å–å­—ç¬¦ä¸²é•¿åº¦</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set k1 abcd</span><br><span class="line">strlen k1   é•¿åº¦ä¸º4</span><br><span class="line">append k1 xxxx</span><br></pre></td></tr></table></figure>
<p><strong>åˆ†å¸ƒå¼é”</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setnx key value</span><br><span class="line">setex(set with expire)é”®ç§’å€¼/setnx(set if not exist)</span><br></pre></td></tr></table></figure>
<p>ä»€ä¹ˆå«åˆ†å¸ƒå¼é”ï¼Œä¸‰ä¸ªå¾®æœåŠ¡ï¼ŒåŒæ—¶äº‰æŠ¢ä¸€ä¸ªèµ„æºï¼Œä»¥å‰æ˜¯syncã€lock,unlockè¿™äº›æ˜¯jvmçš„ï¼Œæ‰¾ä¸€ä¸ªredisï¼Œç„¶åæ‰¾ä¸€ä¸ªèŠ‚ç‚¹Keyï¼Œç°åœ¨å¦‚æœä¸€ä¸ªå¾®æœåŠ¡éœ€è¦æ‹¿èµ„æºï¼Œéœ€è¦å…ˆå»redisä¸Šï¼Œsetnx lock uuidï¼Œé‚£ä¹ˆé”®é”æˆåŠŸï¼Œç„¶åæ‰§è¡Œå®Œdel lockï¼Œç›¸å½“äºlockå’Œunlockã€‚zookeeperä¹Ÿèƒ½åªä¸è¿‡é‚£ä¸ªæ˜¯å»ºnodeã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251125225724221.png" alt="image-20251125225724221"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set k1 v1 </span><br><span class="line">expire k1 10</span><br><span class="line">è¿™ä¸¤ä¸ªæ˜¯åˆ†å¼€çš„ä¸æ˜¯åŸå­æ“ä½œ</span><br><span class="line">setex k1 10 v11</span><br><span class="line">setnx k1 10 v11 </span><br><span class="line">è¿™æ ·å°±æ˜¯åŸå­æ“ä½œäº†</span><br></pre></td></tr></table></figure>
<p><strong>getset</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getset k1 haha å°±æ˜¯å…ˆgetå†set</span><br></pre></td></tr></table></figure>
<h4 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h4><p>æ¯”å¦‚æŠ–éŸ³æ— é™ç‚¹èµæŸä¸ªè§†é¢‘æˆ–å•†å“ï¼Œç‚¹ä¸€ä¸‹åŠ ä¸€æ¬¡</p>
<p>æ˜¯å¦å–œæ¬¢çš„æ–‡ç«  ç”¨incre</p>
<h4 id="3-å“ˆå¸Œè¡¨-Hash"><a href="#3-å“ˆå¸Œè¡¨-Hash" class="headerlink" title="3 å“ˆå¸Œè¡¨(Hash)"></a><strong>3 å“ˆå¸Œè¡¨(Hash)</strong></h4><p>â€‹    Hashç±»å‹çš„å€¼ä¸­åŒ…å«å¤šç»„field valueã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/Redis-03.jpg" alt=""></p>
<p>KVæ¨¡å¼ä¸å˜ï¼ŒVæ˜¯ä¸€ä¸ªé”®å€¼å¯¹</p>
<p><strong>hset / hget / hmset / hmget / hgetall / hdel</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hset user: 001 id 11 name z3 age 25 æ”¾äº†ä¸ªuser:001 ç„¶åvalue æ˜¯ id 11ç­‰çš„KVé”®å€¼å¯¹</span><br><span class="line">hget user:001 id</span><br><span class="line">hget user:001 name</span><br><span class="line">hmset user:001 id 12 name li4 age 26</span><br><span class="line">hmget user:001 id name age åŠ äº†ä¸ªmå°±æ˜¯å¤šä¸ªå–</span><br><span class="line">hgetall user:001</span><br><span class="line">hdel user:001 age</span><br></pre></td></tr></table></figure>
<p><strong>hlen</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hlen user:001</span><br></pre></td></tr></table></figure>
<p><strong>hexists key åœ¨keyé‡Œé¢çš„æŸä¸ªå€¼çš„key</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexists user:001 name æ˜¯å¦æœ‰nameè¿™ä¸ªå­—æ®µ</span><br></pre></td></tr></table></figure>
<p><strong>hkeys / hvals</strong> å•ç‹¬ç½—åˆ—keys å’Œ vals</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hkeys user:001</span><br><span class="line">hvals user:001</span><br></pre></td></tr></table></figure>
<p><strong>hincrby / hincrbyfloat</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hset user:001 age 25 score 99.5</span><br><span class="line">hincrby user:001 age 1</span><br><span class="line">hincrby user:001 age 2</span><br><span class="line">hincrbyfloat user:001 score 0.5</span><br></pre></td></tr></table></figure>
<p><strong>hsetnx å€¼ä¸å­˜åœ¨èµ‹å€¼ï¼Œå­˜åœ¨å°±æ— æ•ˆ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hsetnx user:001 email 123@123.com</span><br></pre></td></tr></table></figure>
<p><strong>åº”ç”¨åœºæ™¯</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251126112928804.png" alt="image-20251126112928804"></p>
<p>æ—©æœŸçš„ä¸­å°å‚è®¾è®¡</p>
<h4 id="4-åˆ—è¡¨ï¼ˆListï¼‰"><a href="#4-åˆ—è¡¨ï¼ˆListï¼‰" class="headerlink" title="4. åˆ—è¡¨ï¼ˆListï¼‰"></a>4. <strong>åˆ—è¡¨ï¼ˆListï¼‰</strong></h4><p>å•keyå¤švalueï¼Œåº•å±‚æ˜¯åŒç«¯é“¾è¡¨ï¼Œå®¹é‡40å¤šäº¿ï¼Œä¸»è¦åŠŸèƒ½æœ‰pushå’Œpopç­‰ã€‚</p>
<p>å¯¹ä¸¤ç«¯çš„æ“ä½œæ€§èƒ½é«˜ï¼Œé€šè¿‡ç´¢å¼•ä¸‹æ ‡çš„æ“ä½œä¸­é—´çš„èŠ‚ç‚¹æ€§èƒ½ä¼šè¾ƒå·®ã€‚</p>
<p><strong>lpush/rpush/lrange</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lpush list1 1 2 3 4 5</span><br><span class="line">rpush list2 11 22 33 44 55</span><br><span class="line">type list1</span><br><span class="line">lrange list1 0 -1  5 4 3 2 1 </span><br><span class="line">lrange list2 0 -1  11 22 33 44 55</span><br><span class="line">ä½†æ˜¯æ²¡æœ‰rrange</span><br></pre></td></tr></table></figure>
<p><strong>lpop/rpop</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lrange list1 0 -1   5 4 3 2 1</span><br><span class="line">lpop list1 </span><br><span class="line">lrange list1 0 -1   4 3 2 1</span><br><span class="line">rpop kust1</span><br><span class="line">lrange list1 0 -1  4 3 2</span><br></pre></td></tr></table></figure>
<p><strong>lindex æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å¾—å…ƒç´  ä»ä¸Šåˆ°ä¸‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lindex list1 0   4</span><br><span class="line">lindex list1 1   3</span><br></pre></td></tr></table></figure>
<p><strong>llen  è·å–åˆ—è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°</strong></p>
<p><strong>lrem key æ•°å­—N ç»™å®šå€¼v1   è§£é‡Šï¼ˆåˆ é™¤Nä¸ªå€¼ç­‰äºv1çš„å…ƒç´ ï¼‰</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listé‡Œé¢æ˜¯å…è®¸æœ‰é‡å¤å…ƒç´ çš„ï¼Œå¦‚æœè¦å»é‡</span><br><span class="line">lrem list1 2 v1    åˆ é™¤list1é‡Œé¢2ä¸ªv1å€¼</span><br></pre></td></tr></table></figure>
<p><strong>ltrim key å¼€å§‹index ç»“æŸ index  è§£é‡Š æˆªå–æŒ‡å®šèŒƒå›´çš„å€¼åå†èµ‹å€¼ç»™key</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lrange list1 0 -1  5 4 3 3 2 2 2 1</span><br><span class="line">ltrim list1 4 7  </span><br><span class="line">lrange list1 0 -1  2 2 2 1</span><br></pre></td></tr></table></figure>
<p><strong>rpoplpush åŸåˆ—è¡¨  ç›®æ ‡åˆ—è¡¨</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251126000050478.png" alt="image-20251126000050478"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpoplpush list2 list3  ä»list2é™¤äº†14</span><br><span class="line">lrange list3 0 -1 ç„¶å14 1 2 3 4 </span><br></pre></td></tr></table></figure>
<p>æ¶ˆæ¯é˜Ÿåˆ—äº†å¯ä»¥å½“åš</p>
<p><strong>lset key index value</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lset list1 1 mysql åœ¨listä¸‹æ ‡1è®¾mysql</span><br></pre></td></tr></table></figure>
<p><strong>linset key before/after å·²æœ‰å€¼ æ’å…¥çš„æ–°å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linsert list1 before mysql java  åœ¨mysqlå‰é¢åŠ </span><br></pre></td></tr></table></figure>
<p><strong>åº”ç”¨åœºæ™¯</strong></p>
<p>å¾®ä¿¡å…¬ä¼—å·è®¢é˜…æ–‡ç« </p>
<p>1ã€ä½œè€…å‘å¸ƒäº†æ–‡ç« 11å’Œ22</p>
<p>2ã€å…³æ³¨äº†ä»–ä»¬çš„æ–‡ç« è£…è¿›listï¼Œlpush likearticle 11 22</p>
<p>3ã€æŸ¥çœ‹è‡ªå·±è®¢é˜…çš„æ–‡ç«  lrange likearticle </p>
<h4 id="5-é›†åˆ-Set"><a href="#5-é›†åˆ-Set" class="headerlink" title="5 é›†åˆ(Set)"></a>5 <strong>é›†åˆ(Set)</strong></h4><p>setå’Œjavaä¸­é›†åˆhashsetä¸€æ ·ã€‚å•å€¼ï¼Œå¤švalueï¼Œæ— é‡å¤</p>
<p><strong>sadd key menber</strong> <strong>/ smembers key</strong> <strong>/ sismember key member</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sadd set1 1 1 1 2 2 2 3 4 5 è¿™è‡ªåŠ¨å»é‡ï¼ŒåªåŠ äº†5ä¸ªå…ƒç´ </span><br><span class="line">smembers set1    æŸ¥çœ‹set1ä¸­æ‰€æœ‰å…ƒç´ </span><br><span class="line">sismember set1 x æŸ¥çœ‹set1æ˜¯å¦å­˜åœ¨ x</span><br></pre></td></tr></table></figure>
<p><strong>srem set1 åˆ é™¤å…ƒç´ </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">srem set1 1</span><br></pre></td></tr></table></figure>
<p><strong>scard set1</strong> ç»Ÿè®¡å…ƒç´ ä¸ªæ•°</p>
<p><strong>srandmember key [æ•°å­—] ä»é›†åˆä¸­éšæœºå±•ç°è®¾ç½®çš„æ•°å­—ä¸ªæ•°å…ƒç´ ï¼Œå…ƒç´ ä¸åˆ é™¤</strong></p>
<p><strong>spop key [æ•°å­—] ä»é›†åˆä¸­éšæœºå¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå‡ºä¸€ä¸ªåˆ ä¸€ä¸ª</strong></p>
<p><strong>smove key1 key2 ã€key1é‡Œçš„valueã€‘åœ¨key1é‡Œå·²å­˜åœ¨çš„æŸä¸ªå€¼èµ‹ç»™key2</strong></p>
<p><strong>é›†åˆè¿ç®— å·®å¹¶äº¤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sadd set1 a b c 1 2</span><br><span class="line">sadd set2 1 2 3 a x</span><br><span class="line">sdiff set1 set2 //åªå±äºa ä¸å±äº b çš„ </span><br><span class="line">sunion set1 set2 //ä¸¤ä¸ªé›†åˆåˆå¹¶</span><br><span class="line">sinter set1 set2 //ä¸¤ä¸ªé›†åˆäº¤é›†</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>sintercard</strong></p>
<p>redis7æ–°å‘½ä»¤ï¼Œä»–ä¸è¿”å›ç»“æœé›†ï¼Œåªè¿”å›ç»“æœçš„åŸºæ•°ã€‚è¿”å›ç”±æ‰€æœ‰ç»™å®šé›†åˆçš„äº¤é›†äº§ç”Ÿçš„é›†åˆçš„åŸºæ•°</p>
<p>äº¤é›†çš„ä¸ªæ•°å…¶å®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sintercard 2 set1 set2  æ±‚2ä¸ªkey åˆ†åˆ«æ˜¯set1å’Œset2ï¼Œç„¶åæ±‚å»é‡åçš„äº¤é›†ä¸ªæ•°</span><br><span class="line">sintercard 2 set1 set2 limit 4 è¿”å›äº¤é›†ä¸ªæ•°æœ€å¤šè¿”å›4å¦åˆ™å°±è¿”å›åŸæ¥ä¸ªæ•°</span><br></pre></td></tr></table></figure>
<p><strong>åº”ç”¨åœºæ™¯ï¼šä½ å¯èƒ½è®¤è¯†çš„äººï¼Œç¤¾äº¤ï¼Œæ¨èç­‰</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251126124708446.png" alt="image-20251126124708446"></p>
<h4 id="6-æœ‰åºé›†åˆ-zset"><a href="#6-æœ‰åºé›†åˆ-zset" class="headerlink" title="6 æœ‰åºé›†åˆ zset"></a>6 æœ‰åºé›†åˆ zset</h4><p>åœ¨setåŸºç¡€ä¹‹ä¸Šï¼Œæ¯ä¸ªvalå€¼å‰åŠ ä¸€ä¸ªscoreåˆ†æ•°å€¼,æ’è¡Œæ¦œç”¨è¿™ä¸ªæ•°æ®ç»“æ„å¾ˆæ–¹ä¾¿çš„</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251126125637560.png" alt="image-20251126125637560"></p>
<p><strong>zadd /  zrange / zrevrange / zrangebyscore </strong> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">zadd zset1 60 v1 70 v2 80 v3 90 v4 100 v5</span><br><span class="line">zrange zset1 0 -1 æ˜¾ç¤ºæ‰€æœ‰value</span><br><span class="line">zrange zset1 0 -1 withscores å¸¦ç€scoreæ˜¾ç¤ºvalue</span><br><span class="line">zrevrange zets1 0 -1 withscores åè½¬ä¹Ÿå°±æ˜¯å€’åºè¾“å‡º</span><br><span class="line">zrangebyscore zset1 60 90 åŒ…å«60åˆ°90çš„scoreçš„æ’åº</span><br><span class="line">zrangebyscore zset1 (60 90 withscores ä¸åŒ…å«60 åŒ…å«90 çš„æ’åº</span><br><span class="line">zrangebyscore zset1 (60 90 withscores limit 0 1 ä¸åŒ…å«60åŒ…å«90ç„¶åæ˜¾ç¤ºä»ç¬¬0ä¸ªå¼€å§‹ç„¶åæ˜¾ç¤º1ä¸ª</span><br></pre></td></tr></table></figure>
<p><strong>zscore / zcard / zrem / zincrby / zcount / zmpop</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">zscore zset1 v1 è·å–å…ƒç´ çš„åˆ†æ•°</span><br><span class="line">zcard zset1 è·å–zset1çš„å…ƒç´ </span><br><span class="line">zrem zset1 v5 åˆ é™¤å…ƒç´ </span><br><span class="line">zincrby zset1 3 v1 ç»™v1åŠ ä¸‰åˆ†</span><br><span class="line">zcount zset1 60 100 60åˆ†åˆ°100åˆ†æœ‰å¤šå°‘ä¸ªå…ƒç´ </span><br><span class="line">zmpop 1 zset1 min count 1 å¼¹å‡ºzseté‡Œé¢1ä¸ªå…ƒç´ ç„¶åå¼¹å‡ºæœ€å°çš„ä¸€ä¸ª ç»“æœå›è¿”å› zset1 v1 60</span><br></pre></td></tr></table></figure>
<p><strong>zrank / zrevrank</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zrank zset1 v2    0  è·å¾—zset1çš„v2çš„ä¸‹æ ‡å€¼ zrankæ˜¯0    æ­£åºçš„0</span><br><span class="line">zrevrank zset1 v2 3  è·å¾—zset1çš„v2çš„ä¸‹æ ‡å€¼ zrevrankæ˜¯3 å€’åºçš„3</span><br></pre></td></tr></table></figure>
<p><strong>åº”ç”¨åœºæ™¯ </strong></p>
<p>çƒ­é”€çš„å•†å“ï¼Œçƒ­é”€çš„ä¸»æ’­æ‰“èµ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251126194035618.png" alt="image-20251126194035618"></p>
<h4 id="7-ä½å›¾-bitmap"><a href="#7-ä½å›¾-bitmap" class="headerlink" title="7 ä½å›¾ bitmap"></a>7 ä½å›¾ bitmap</h4><p>ç”± 0 å’Œ 1 è¡¨ç°çš„äºŒè¿›åˆ¶çš„ bit æ•°ç»„</p>
<p>é’‰é’‰æ‰“å¡ä¸Šä¸‹ç­ï¼Œç”µå½±ã€å¹¿å‘Šæ˜¯å¦è¢«ç‚¹å‡»æ’­æ”¾è¿‡ï¼Œç”¨æˆ·æ˜¯å¦ç™»é™†è¿‡ï¼Œç­¾åˆ°ç»Ÿè®¡</p>
<p>ä¸€ä¸ªå­—èŠ‚ï¼ˆä¸€ä¸ªbyteï¼‰ 8ä½ï¼Œ<strong>åº•å±‚æ˜¯ä¸ªStringç±»å‹çš„æ•°ç»„</strong>ï¼Œæ¯ä¸ªäºŒè¿›åˆ¶ä½å¯¹åº”ä¸€ä¸ªç´¢å¼•ã€‚</p>
<p>Bitmapæ”¯æŒçš„æœ€å¤§ä½æ•°æ˜¯2 çš„32æ¬¡æ–¹ä½ï¼Œç”¨512Må†…å­˜èƒ½å­˜å‚¨40å¤šäº¿æ•°æ®</p>
<p><strong>setbit / getbit  </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setbit k1 1 1</span><br><span class="line">setbit k1 7 1</span><br><span class="line">get k1 è¿™æ—¶å€™æ˜¯A å› ä¸ºå®é™…ä¸Šbitmapå…¶å®æ˜¯Stringç„¶åè¿™ä¸ªå¯¹åº”çš„Ascllç å°±æ˜¯A</span><br><span class="line">getbit k1 0 </span><br></pre></td></tr></table></figure>
<p><strong>strlen </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strlen k1 è¿™æ—¶å€™è®¡ç®—çš„æ˜¯å­—èŠ‚ä¸ºå•ä½ï¼Œä¸æ»¡ä¸€ä¸ªå­—èŠ‚ç®—ä¸€ä¸ªå­—èŠ‚</span><br></pre></td></tr></table></figure>
<p><strong>bitcount</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bitcount k1 è®°å½•1çš„ä¸ªæ•°</span><br></pre></td></tr></table></figure>
<p><strong>bitop</strong></p>
<p>ç»Ÿè®¡è¿ç»­2å¤©ç­¾åˆ°ç”¨æˆ·ï¼Œåšä¸ªidå’Œä½ç½®çš„æ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">hset uid:map 0 uid1 ç”¨æˆ·è¡¨</span><br><span class="line">hset uid:map 1 uid2</span><br><span class="line">ç„¶ååšæ˜ å°„è¡¨</span><br><span class="line">setbit 20230101 0 1 ç™»å½•è¡¨</span><br><span class="line">setbit 20230101 1 1</span><br><span class="line">setbit 20230101 2 1</span><br><span class="line">setbit 20230102 0 1</span><br><span class="line">setbit 20230102 1 1</span><br><span class="line">ç°åœ¨ç»Ÿè®¡è¿ç»­ä¸¤å¤©éƒ½ç™»å½•çš„ç”¨æˆ·</span><br><span class="line">bitop and/or/xor/notä¸æˆ–é</span><br><span class="line">bitop and k3 20230101 20230102 æŠŠ20230101å’Œ20230102ä¸¤å¤©éƒ½ç™»å½•çš„äººæ•°æ”¾å…¥k3</span><br><span class="line">bitcount k3 ç„¶åå°±çŸ¥é“è¿ç»­ç™»å½•ä¸¤å¤©çš„äººæ•°äº†</span><br></pre></td></tr></table></figure>
<h4 id="8-åŸºæ•°ç»Ÿè®¡-hyperloglog"><a href="#8-åŸºæ•°ç»Ÿè®¡-hyperloglog" class="headerlink" title="8 åŸºæ•°ç»Ÿè®¡ hyperloglog"></a>8 åŸºæ•°ç»Ÿè®¡ hyperloglog</h4><p><strong>åº•å±‚æ˜¯string</strong></p>
<p>ç»Ÿè®¡æŸä¸ªç½‘ç«™çš„uvï¼Œç»Ÿè®¡æŸä¸ªæ–‡ç« è¢«é˜…è¯»çš„uv</p>
<p>uvå°±æ˜¯ç‹¬ç«‹è®¿å®¢ï¼Œä¸€èˆ¬è®¤ä¸ºæ˜¯ipï¼Œunion visterï¼ŒåŒä¸€ä¸ªipå°±æ˜¯åŒä¸€ä¸ªå®¢æˆ·</p>
<p>è¿˜æœ‰ç”¨æˆ·æœç´¢ç½‘ç«™å…³é”®è¯çš„æ•°é‡ï¼Œç»Ÿè®¡ç”¨æˆ·æ¯å¤©æœç´¢ä¸åŒè¯æ¡ä¸ªæ•°</p>
<p>åœ¨redisï¼Œæ¯ä¸ªhyperloglogå¥åªéœ€è¦èŠ±è´¹ 12kbå†…å­˜ï¼Œå°±å¯ä»¥å­˜å‚¨2çš„64æ¬¡æ–¹ä¸ªä¸åŒçš„å…ƒç´ çš„åŸºæ•°ã€‚32æ¬¡æ–¹å°±40äº¿äº†ã€‚</p>
<p><strong>pfadd / pfcount / pfmerge</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pfadd hll01 1 3 4 5 7 9 åœ¨hll01åŠ å…ƒç´  1 3 4 5 7 9</span><br><span class="line">pfadd hll02 2 4 4 6 8 9 åœ¨hll02åŠ å…ƒç´  2 4 6 8 9</span><br><span class="line">pfmerge distResult hll01 hll02 æŠŠä¸¤ä¸ªkeyçš„å…ƒç´ åŠ å…¥distResultè¿™ä¸ªkeyé‡Œé¢</span><br><span class="line">pfcount disResult è®¡ç®—disResulté‡Œé¢çš„å…ƒç´  1 2 3 4 5 6 7 8 9 ä¸€å…±9ä¸ªå…ƒç´  </span><br></pre></td></tr></table></figure>
<h4 id="9-åœ°ç†ç©ºé—´-GEO"><a href="#9-åœ°ç†ç©ºé—´-GEO" class="headerlink" title="9 åœ°ç†ç©ºé—´ GEO"></a>9 åœ°ç†ç©ºé—´ GEO</h4><p>åœ°çƒä¸Šçš„åœ°ç†ä½ç½®æ˜¯äºŒç»´çš„ç»çº¬åº¦è¡¨ç¤ºï¼Œç„¶åç¡®å®šä¸€ä¸ªç»çº¬åº¦å°±å¯ä»¥ç¡®å®šä½ç½®ç»åº¦(-180,180] , ç»´åº¦ï¼ˆ-90,90]ï¼Œä½†æ˜¯å¦‚æœè¦å®ç°æ‰¾é™„è¿‘çš„äººï¼Œå¦‚æœç”¨äºŒç»´åæ ‡ï¼Œè¯¯å·®ä¼šå¾ˆå¤§ï¼Œå¹¶ä¸”èŒƒå›´æŸ¥æ‰¾ä¼šå¾ˆæ…¢ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯å°†çƒä½“è½¬æ¢ä¸ºå¹³é¢ï¼Œå¹³é¢è½¬æ¢ä¸ºä¸€ä¸ªç‚¹ã€‚</p>
<p>ä¸»è¦åˆ†ä¸‰æ­¥ï¼Œå°†ä¸‰ç»´çš„åœ°çƒè½¬å˜ä¸ºäºŒç»´çš„åæ ‡ï¼ŒäºŒç»´å˜ä¸€ç»´ï¼Œæœ€åå°†ä¸€ç»´ç‚¹è½¬æ¢äºŒè¿›åˆ¶base32ç¼–ç </p>
<p><strong>åº•å±‚æ˜¯zset </strong></p>
<p><strong>geoadd æ·»åŠ ç»åº¦ç»´åº¦åæ ‡</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">geoadd [key] [ç»åº¦] [ç»´åº¦] [ä½ç½®åç§°] å…·ä½“çš„ç»çº¬åº¦ç™¾åº¦è·å–</span><br><span class="line">zrange city 0 -1 </span><br><span class="line">å¦‚æœä¸­æ–‡ä¹±ç å…ˆquit ç„¶å</span><br><span class="line">redis-cli -a [å¯†ç ] - - raw è¿™æ ·å¯åŠ¨å®¢æˆ·ç«¯å°±èƒ½é¿å…ä¸­æ–‡ä¹±ç </span><br></pre></td></tr></table></figure>
<p><strong>geopos è¿”å›ç»çº¬åº¦</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geopos city å¤©å®‰é—¨ æ•…å®« é•¿åŸ ç„¶åå°±ä¼šè¿”å›è¿™ä¸‰ä¸ªåœ°ç‚¹çš„ç»çº¬åº¦</span><br></pre></td></tr></table></figure>
<p><strong>grohash è¿”å›åæ ‡çš„hashè¡¨ç¤º</strong></p>
<p>å°æ•°ç‚¹åé¢å¾ˆå¤šä½ï¼Œæ‰€ä»¥åœ¨å†™ç¨‹åºçš„æ—¶å€™éå¸¸ä¸å¥½è¡¨ç¤ºï¼Œæ‰€ä»¥ç”¨ä¸ªæ˜ å°„è¡¨ç¤ºå¯¹åº”çš„ç»çº¬åº¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geohash city å¤©å®‰é—¨ æ•…å®« é•¿åŸ  ç„¶åç»çº¬åº¦å°±å˜æˆå­—ç¬¦ä¸²äº†</span><br></pre></td></tr></table></figure>
<p><strong>geodis ä¸¤ä¸ªä½ç½®çš„è·ç¦»</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">geodis city å¤©å®‰é—¨ é•¿åŸ km åé¢çš„å•ä½å¯ä»¥æ›´æ¢ï¼Œè¿”å›è·ç¦»</span><br></pre></td></tr></table></figure>
<p><strong>georaduis ä»¥åŠå¾„ä¸ºä¸­å¿ƒæŸ¥æ‰¾é™„è¿‘çš„xxx</strong></p>
<p>è¿™é‡Œè¿”å›çš„æ˜¯ä¸ä¸­å¿ƒçš„è·ç¦»ä¸è¶…è¿‡ç»™å®šæœ€å¤§è·ç¦»çš„æ‰€æœ‰ä½ç½®å…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">georadius city [è‡ªå·±çš„ç»åº¦] [è‡ªå·±çš„ç»´åº¦] 10 km withdis withcoord count 10 withhash desc </span><br><span class="line"></span><br><span class="line">GEORADIUS city 116.4 39.9 10 km WITHDIST WITHCOORD COUNT 10 WITHHASH DESC</span><br><span class="line">1) 1) &quot;å¤©æ´¥&quot;        åŸå¸‚</span><br><span class="line">   2) &quot;9.8765&quot;      è·ç¦»çš„è·ç¦»</span><br><span class="line">   3) 1) &quot;117.2000&quot; å¤©æ´¥çš„ç»åº¦</span><br><span class="line">      2) &quot;39.1000&quot;  å¤©æ´¥çš„ç»´åº¦</span><br><span class="line">   4) &quot;4018921763923247&quot; å¤©æ´¥çš„geohashå€¼</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127123133054.png" alt="image-20251127123133054"></p>
<p><strong>georadiusbymember è·Ÿä¸Šé¢ç±»ä¼¼ï¼Œä½†æ˜¯è¿™ä¸ªä¸éœ€è¦çŸ¥é“ç»çº¬åº¦ï¼Œåªè¦çŸ¥é“åœ°ç‚¹åç§°å³å¯</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GEORADIUSBYMEMBER city &quot;åŒ—äº¬&quot; 200 km 10 km WITHDIST WITHCOORD COUNT 10 WITHHASH DESC</span><br></pre></td></tr></table></figure>
<h4 id="10-redis-æµ-stream"><a href="#10-redis-æµ-stream" class="headerlink" title="10 redis æµ stream"></a>10 redis æµ stream</h4><p>redisçš„streamå°±æ˜¯redisç‰ˆæœ¬çš„MQï¼Œæ¶ˆæ¯ä¸­é—´ä»¶ã€‚</p>
<p>MQ æœ‰å¾ˆå¤š kafka RabbitMQ rocketmq</p>
<p>redisæ¶ˆæ¯é˜Ÿåˆ—æœ‰2ä¸ªæ–¹æ¡ˆï¼Œç”¨Listå®ç° lpushrpop å¦‚æœæ¶ˆæ¯é˜Ÿåˆ—åŠå…¶ç®€å•ç”¨rediså°±èƒ½è§£å†³</p>
<p>é€šå¸¸ç”¨ä½œå¼‚æ­¥é˜Ÿåˆ—ï¼Œé€šä¿¡è¿™å—ï¼Œç‚¹å¯¹ç‚¹ã€‚ä½†æ˜¯ä¸€å¯¹å¤šåŠ›ä¸ä»å¿ƒ</p>
<p>ç„¶åå°±æœ‰pubå’Œsub</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127133211608.png" alt="image-20251127133211608"></p>
<p>ä½†æ˜¯æ¶ˆæ¯æ— æ³•æŒä¹…åŒ–ï¼Œç½‘ç»œæ–­å¼€ã€redisæ–­å¼€ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¼ƒï¼Œä¹Ÿæ²¡æœ‰ackæœºåˆ¶æ¥ä¿è¯æ•°æ®çš„å¯é æ€§ã€‚</p>
<p>åŸºäºæ­¤ä¸Šé¢è¿™äº›ç—›ç‚¹ï¼Œæ–°å¢äº†Streamå¸Œæœ›èƒ½è§£å†³è¿™äº›é—®é¢˜</p>
<p>æ‰€ä»¥streamæµå°±æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶ + é˜»å¡é˜Ÿåˆ—</p>
<p><strong>steamæµæ”¯æŒæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæ¶ˆæ¯æŒä¹…åŒ–ï¼Œæ”¯æŒè‡ªåŠ¨ç”Ÿæˆå…¨å±€å”¯ä¸€IDï¼Œæ”¯æŒackç¡®è®¤æ¶ˆæ¯çš„æ¨¡å¼ï¼Œæ”¯æŒæ¶ˆè´¹ç»„æ¨¡å¼ï¼Œè®©æ¶ˆæ¯é˜Ÿåˆ—æ›´åŠ å¯é å’Œç¨³å®š</strong></p>
<p><strong>streamçš„ç»“æ„</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127133542574.png" alt="image-20251127133542574"></p>
<p>1ã€message content æ¶ˆæ¯å†…å®¹</p>
<p>2ã€æ¶ˆè´¹ç»„ åŒä¸€ä¸ªæ¶ˆè´¹ç»„æœ‰å¤šä¸ªæ¶ˆè´¹è€…</p>
<p>3ã€last_delivered_id æ¸¸æ ‡ï¼Œæ¯ä¸ªæ¶ˆè´¹ç»„æœ‰ä¸ªæ¸¸æ ‡ï¼Œä»»ä½•ä¸€ä¸ªæ¶ˆè´¹è€…è¯»å–äº†æ¶ˆæ¯ä¼šä½¿æ¸¸æ ‡å¾€åç§»åŠ¨</p>
<p>4ã€consumer åœ¨æ¶ˆè´¹ç»„ä¸­çš„æ¶ˆè´¹è€…</p>
<p>5ã€pending_ids æ¶ˆè´¹è€…ä¼šæœ‰ä¸ªçŠ¶æ€å˜é‡ï¼Œè®°å½•å½“å‰æ¶ˆè´¹ä½†æ˜¯æ²¡ackçš„æ¶ˆæ¯çš„idï¼Œå¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰ackï¼Œè¿™ä¸ªæ¶ˆæ¯idä¼šè¶Šæ¥è¶Šå¤šï¼Œä¸€æ—¦ackæ‰ä¼šå‡å°‘ã€‚</p>
<p><strong>å‘½ä»¤</strong></p>
<p><strong>xadd æ·»åŠ æ¶ˆæ¯åˆ°é˜Ÿåˆ—æœ«å°¾</strong></p>
<p>æ¶ˆæ¯idå¿…é¡»æ¯”ä¸Šä¸€ä¸ªidå¤§ï¼Œé»˜è®¤ç”¨æ˜Ÿå·è¡¨ç¤ºè‡ªåŠ¨ç”Ÿæˆidï¼Œç±»ä¼¼äºè‡ªå¢ä¸»é”®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xadd mystream * id 11 cname z3</span><br><span class="line">xadd mystream * id 12 cname l4</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127134603362.png" alt="image-20251127134603362"></p>
<p><strong>xrange </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xrange mystream - + æŠŠæ¶ˆæ¯é˜Ÿåˆ—ä»å°åˆ°å¤§è¿”å›</span><br><span class="line">xrange mystream - + count 1 ä»å°åˆ°å¤§è¿”å›1æ¡</span><br></pre></td></tr></table></figure>
<p><strong>xrevrange</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xrevrange mystream + 1 æ„æ€æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ä»å¤§åˆ°å°å€’åºè¿”å›</span><br></pre></td></tr></table></figure>
<p><strong>xdel </strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xdel mystream [æ—¶é—´] æ˜¯æŒ‰ç…§idåˆ ä¹Ÿå°±æ˜¯ä¸»é”®åˆ </span><br></pre></td></tr></table></figure>
<p><strong>xlen</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">slen mystream è¿”å›æ¶ˆæ¯ä¸ªæ•°ä¹Ÿå°±æ˜¯keyçš„ä¸ªæ•°</span><br></pre></td></tr></table></figure>
<p><strong>strim</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xtrim mystream maxlen 2 ä¹Ÿå°±æ˜¯æŒ‰ç…§æœ€å¤§é•¿åº¦ æˆªå–2æ¡ä¿¡æ¯å¦‚æœæœ‰å››æ¡ä¿¡æ¯ï¼Œé‚£ä¹ˆåªä¼šå‰©ä¸‹ä¸‹é¢ä¸¤æ¡</span><br><span class="line">xtrim mystream minid [æ—¶é—´æˆ³] æ¯”è¿™ä¸ªæ—¶é—´æˆ³å°çš„éƒ½ä¼šè¢«åˆ ï¼Œè¿™é‡Œçš„å°æ˜¯å…ˆå…¥é˜Ÿçš„è€Œä¸æ˜¯æ•°å€¼ä¸Šçš„å°</span><br></pre></td></tr></table></figure>
<p><strong>xread</strong></p>
<p>blockæ²¡å†™éé˜»å¡ï¼Œå¦åˆ™æ˜¯é˜»å¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">xadd mystream * k2 v2</span><br><span class="line">xadd mystream * k3 v3</span><br><span class="line">xadd mystream * k4 v4</span><br><span class="line">xadd mystream * k5 v5</span><br><span class="line">xread count 2 streams mystream $ è¯»å–2æ¡æ¯”æœ€ååŠ å…¥çš„è¿˜åçš„ä¿¡æ¯ è¿”å›nil</span><br><span class="line">xread count 2 streams mystream 0- 0  æˆ–è€…å†™000 è¯»å–2æ¡æ¯”æœ€æ—©åŠ å…¥çš„åé¢çš„ä¸¤æ¡ä¿¡æ¯åŒ…æ‹¬æœ€æ—©åŠ å…¥çš„ä¿¡æ¯</span><br><span class="line">xread count1 block 0 streams mystream &amp; </span><br><span class="line">æ— é™ç­‰å¾…block 0 ä¹Ÿå¯ä»¥å†™block 5000 æœ€å¤š5ç§’çš„æ„æ€ï¼Œç„¶åæ–°å¼€ä¸€ä¸ªå®¢æˆ·ç«¯åŠ æ¶ˆæ¯ï¼Œç„¶åè¿™è¾¹å°±ä¼šè¿”å›</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127154423422.png" alt="image-20251127154423422"></p>
<p><strong>æ¶ˆè´¹ç»„çš„ç›¸å…³æŒ‡ä»¤</strong></p>
<p>é¦–å…ˆ$ è¡¨ç¤ºä»Streamå°¾éƒ¨å¼€å§‹æ¶ˆè´¹</p>
<p>0è¡¨ç¤ºä»Streamå¤´éƒ¨å¼€å§‹æ¶ˆè´¹</p>
<p>åˆ›å»ºæ¶ˆè´¹è€…ç»„çš„æ—¶å€™å¿…é¡»æŒ‡å®š IDï¼ŒIDä¸º0è¡¨ç¤ºä»å¤´å¼€å§‹æ¶ˆè´¹ï¼Œä¸º $ è¡¨ç¤ºåªæ¶ˆè´¹æ–°çš„æ¶ˆæ¯ï¼Œé˜Ÿå°¾æ–°æ¥</p>
<p><strong>xgroup create</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xgroup create mystream groupX $</span><br><span class="line">xgroup create mystream groupA 0</span><br></pre></td></tr></table></figure>
<p><strong>xreadgroup group</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; è¡¨ç¤ºä»ç¬¬ä¸€æ¡å°šæœªè¢«æ¶ˆè´¹çš„æ¶ˆæ¯å¼€å§‹è¯»å–</span><br><span class="line">æ¶ˆæ¯ç»„groupAå†…çš„æ¶ˆè´¹è€…consumer1ä»mystreamæ¶ˆæ¯é˜Ÿåˆ—ä¸­è¯»å–æ‰€æœ‰ä¿¡æ¯</span><br><span class="line">ä½†æ˜¯ï¼Œä¸åŒæ¶ˆè´¹ç»„çš„æ¶ˆè´¹è€…å¯ä»¥æ¶ˆè´¹åŒä¸€æ¡æ¶ˆæ¯</span><br><span class="line">xadd mystream * k2 v2</span><br><span class="line">xadd mystream * k3 v3</span><br><span class="line">xadd mystream * k4 v4</span><br><span class="line">xadd mystream * k5 v5</span><br><span class="line">xgroup create mystream groupX $</span><br><span class="line">xgroup create mystream groupA 0</span><br><span class="line">xgroup create mystream groupB 0</span><br><span class="line"></span><br><span class="line">xreadgroup groupA consumer1 streams mystream &gt;  è¿™ä¸ªconusmer1æ˜¯åŠ¨æ€åˆ›å»ºçš„ï¼Œä¸æ˜¯é¢„å…ˆå­˜åœ¨çš„</span><br><span class="line">streamä¸­çš„æ¶ˆæ¯ä¸€æ—¦è¢«æ¶ˆè´¹ç»„é‡Œçš„ä¸€ä¸ªæ¶ˆè´¹è€…è¯»å–äº†ï¼Œå°±ä¸èƒ½è¢«è¯¥ç»„å†…çš„å…¶ä»–æ¶ˆè´¹è€…è¯»å–ã€‚ä½†æ˜¯ä¸åŒæ¶ˆè´¹ç»„å¯ä»¥æ¶ˆè´¹ã€‚</span><br><span class="line">è®©ç»„å†…çš„å¤šä¸ªæ¶ˆè´¹è€…å…±åŒåˆ†æ‹…è¯»å–æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šå¸¸ä¼šè®©æ¯ä¸ªæ¶ˆè´¹è€…è¯»å–éƒ¨åˆ†æ¶ˆæ¯ï¼Œä»è€Œå®ç°æ¶ˆæ¯è¯»å–è´Ÿè½½åœ¨å¤šä¸ªæ¶ˆè´¹è€…é—´æ˜¯å‡è¡¡åˆ†å¸ƒçš„</span><br><span class="line">xreadgroup group groupB consumer1 count 1 streams mystream &gt;</span><br><span class="line">xreadgroup group groupB consumer2 count 1 streams mystream &gt; ç­‰ç­‰æ¯äººè¯»ä¸€æ¡</span><br></pre></td></tr></table></figure>
<p><strong>é‡ç‚¹é—®é¢˜</strong></p>
<p>åŸºäºStreamå®ç°çš„é˜Ÿåˆ—ï¼Œå¦‚ä½•ä¿è¯æ¶ˆè´¹è€…åœ¨å‘ç”Ÿæ•…éšœæˆ–å®•æœºå†æ¬¡é‡å¯åï¼Œä»ç„¶å¯ä»¥è¯»å–æœªå¤„ç†å®Œçš„æ¶ˆæ¯ï¼Ÿ</p>
<p>åˆšæ‰åªæ˜¯è¯»äº†ä½†æ˜¯è¿˜æ²¡ackï¼Œè¿˜æ²¡ç­¾æ”¶ï¼ŒStreamsä¼šè‡ªåŠ¨ä½¿ç”¨å†…éƒ¨é˜Ÿåˆ—ä¹Ÿç§°ä¸ºPENDINGList ç•™å­˜æ¶ˆè´¹ç»„é‡Œæ¯ä¸ªæ¶ˆè´¹è€…è¯»å–çš„æ¶ˆæ¯ä¿åº•æªæ–½ï¼Œç›´åˆ°æ¶ˆè´¹è€…ä½¿ç”¨XACKå‘½ä»¤é€šçŸ¥Streams æ¶ˆæ¯å·²ç»å¤„ç†å®Œæˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127184041160.png" alt="image-20251127184041160"></p>
<p><strong>xpending</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">xpending mystream groupc  çœ‹çœ‹æ¶ˆè´¹ç»„é‡Œå·²è¯»æœªç¡®è®¤çš„æ¸…å•</span><br><span class="line">é¦–å…ˆä¼šè¿”å›æ‰€æœ‰æ¶ˆè´¹è€…è¯»å–çš„æ¶ˆæ¯æœ€å°ID</span><br><span class="line">ç„¶åè¿”å›æ‰€æœ‰æ¶ˆè´¹è€…è¯»å–çš„æ¶ˆæ¯æœ€å¤§ID</span><br><span class="line">ç„¶åè¿”å›æ¯ä¸ªæ¶ˆè´¹è€…è¯»å–çš„ä¸ªæ•°</span><br><span class="line">XPENDING mystream groupC - + 10</span><br><span class="line"></span><br><span class="line">1) 1) &quot;1710000000000-0&quot;   # æ¶ˆæ¯ ID</span><br><span class="line">   2) &quot;consumer1&quot;         # è¢«å“ªä¸ªæ¶ˆè´¹è€…è¯»å–</span><br><span class="line">   3) (integer) 123456    # idle æ—¶é—´ï¼ˆæ¯«ç§’ï¼Œä»äº¤ä»˜åˆ°ç°åœ¨ï¼‰</span><br><span class="line">   4) (integer) 1         # delivery counterï¼ˆé‡è¯•æ¬¡æ•°ï¼‰</span><br><span class="line"></span><br><span class="line">2) 1) &quot;1710000000001-0&quot;</span><br><span class="line">   2) &quot;consumer1&quot;</span><br><span class="line">   3) (integer) 98765</span><br><span class="line">   4) (integer) 1</span><br><span class="line"></span><br><span class="line">3) 1) &quot;1710000000002-0&quot;</span><br><span class="line">   2) &quot;consumer2&quot;</span><br><span class="line">   3) (integer) 45678</span><br><span class="line">   4) (integer) 1</span><br><span class="line">   </span><br><span class="line"> xpending mystream groupC - + 2 consumer2 è¿™æ ·çœ‹å›ºå®šæ¶ˆè´¹è€…è¯»å–çš„æ¶ˆè´¹ä¿¡æ¯</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>XACK</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XACK mystream groupc [æ—¶é—´æˆ³] è¿™æ ·å°±ç¡®è®¤ç­¾æ”¶äº†</span><br></pre></td></tr></table></figure>
<h4 id="11-ä½åŸŸ-bitfield"><a href="#11-ä½åŸŸ-bitfield" class="headerlink" title="11 ä½åŸŸ bitfield"></a>11 ä½åŸŸ bitfield</h4><p>å°†ä¸€ä¸ªrediså­—ç¬¦ä¸²çœ‹åšæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶ç»„æˆçš„æ•°ç»„ï¼Œå¹¶èƒ½å¯¹å˜é•¿ä½å®½å’Œä»»æ„æ²¡æœ‰å­—èŠ‚å¯¹é½çš„æŒ‡å®šæ•´å½¢ä½åŸŸè¿›è¡Œå¯»å€å’Œä¿®æ”¹</p>
<h2 id="RedisæŒä¹…åŒ–ç­–ç•¥"><a href="#RedisæŒä¹…åŒ–ç­–ç•¥" class="headerlink" title="RedisæŒä¹…åŒ–ç­–ç•¥"></a><strong>RedisæŒä¹…åŒ–ç­–ç•¥</strong></h2><p>â€‹    Redisä¸ä»…ä»…æ˜¯ä¸€ä¸ªå†…å­˜å‹æ•°æ®åº“ï¼Œè¿˜å…·å¤‡æŒä¹…åŒ–èƒ½åŠ›ã€‚</p>
<p>æŒä¹…åŒ–ä¸¤ä¸ªç­–ç•¥RDB AOFï¼ŒRDBå°±æ˜¯åšä¸€ä¸ªå¿«ç…§ï¼ŒAOFå°±æ˜¯æŠŠå†™æ“ä½œéƒ½è®°å½•åœ¨æ–‡æ¡£é‡Œ</p>
<h4 id="1-RDB"><a href="#1-RDB" class="headerlink" title="1. RDB"></a>1. <strong>RDB</strong></h4><p>ä»¥æŒ‡å®šçš„æ—¶é—´é—´éš”æ‰§è¡Œæ•°æ®é›†çš„æ—¶é—´ç‚¹å¿«ç…§ï¼Œå³ä¾¿redisæ•…éšœï¼Œå¿«ç…§æ–‡ä»¶ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œæ•°æ®çš„å¯é æ€§å¾—åˆ°ä¿è¯ã€‚è¿™ä¸ªå¿«ç…§ä»¥dump.rdbã€‚ä¿å­˜çš„æ˜¯ <strong>å…¨é‡å¿«ç…§</strong></p>
<p><strong>redis6ä»¥ä¸‹</strong>ï¼Œè‡ªåŠ¨è§¦å‘ï¼Œæ¯ä¸ª900sï¼Œå¦‚æœæœ‰è¶…è¿‡1ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼Œå°±å†™ä¸€ä»½æ–°çš„RDBæ–‡ä»¶</p>
<p>æ¯éš”300sï¼Œå¦‚æœæœ‰è¶…è¿‡10ä¸ªkeyå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±å†™ä¸€ä»½æ–°çš„RDBæ–‡ä»¶</p>
<p>æ¯éš”60sï¼Œå¦‚æœè¶…è¿‡10000ä¸ªkeyå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±å†™ä¸€ä»½æ–°çš„RDBæ–‡ä»¶</p>
<p><strong>redis7ä»¥å</strong>ï¼Œ3600sä»¥å†…ï¼Œ1ä¸ªä¿®æ”¹ï¼Œ300sä»¥å†…100ä¸ªä¿®æ”¹ï¼Œ60så†…10000ä¸ªä¿®æ”¹</p>
<p><strong>rdbçš„æ“ä½œåˆ†ä¸ºè‡ªåŠ¨è§¦å‘å’Œæ‰‹åŠ¨è§¦å‘</strong></p>
<p><strong>è¿™é‡Œä¿®æ”¹é…ç½®æ–‡ä»¶æ¥è‡ªå®šä¹‰</strong></p>
<p>ä¸‹é¢æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶çš„å†™æ³•ï¼Œä½ç½®è‡ªå·±æ‰¾ï¼Œä»¥ååšredisé›†ç¾¤éœ€è¦</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save 5 2                ä¿®æ”¹å¿«ç…§é¢‘ç‡è¿™ä¸ª5ç§’å†…å¦‚æœæœ‰ç´¯è®¡2æ¬¡ä¿®æ”¹ä»¥ä¸ŠåŒ…æ‹¬ä¸¤æ¬¡å°±ä¼šè§¦å‘ï¼Œå¦‚æœå¢åŠ k3ç„¶å5ç§’å†…ä¸ä¼šæ–°å¢ï¼Œç„¶å5ç§’åæ–°å¢k4ä¹‹åä¹Ÿä¼šä¿å­˜ã€‚</span><br><span class="line">dir /myredis/dumpfiles  ä¿®æ”¹ä¿å­˜è·¯å¾„</span><br><span class="line">dbfilename dump6379.rdb ä¿®æ”¹ä¿å­˜çš„æ–‡ä»¶å</span><br></pre></td></tr></table></figure>
<p>åœ¨redis-cliå†…å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹redisä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config get requirepass æŸ¥çœ‹å¯†ç </span><br><span class="line">config get port æŸ¥çœ‹ç«¯å£å·</span><br><span class="line">config get dir æŸ¥çœ‹å¿«ç…§ä¿å­˜çš„è·¯å¾„</span><br></pre></td></tr></table></figure>
<p>rdbæ¨¡å¼æ˜¯é»˜è®¤æ¨¡å¼ï¼Œå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…ç”Ÿæˆæ•°æ®å¿«ç…§ï¼ˆsnapshotï¼‰ï¼Œé»˜è®¤ä¿å­˜åˆ°dump.rdbæ–‡ä»¶ä¸­ã€‚å½“redisé‡å¯åä¼šè‡ªåŠ¨åŠ è½½dump.rdbæ–‡ä»¶ä¸­å†…å®¹åˆ°å†…å­˜ä¸­ã€‚</p>
<p><strong>æ¢å¤</strong></p>
<p>å°†å¤‡ä»½æ–‡ä»¶ç§»åŠ¨åˆ°rediså®‰è£…ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å³å¯ã€‚ä¹Ÿå°±æ˜¯è¯´å°†å¤‡ä»½æ–‡ä»¶æ”¾åˆ°é…ç½®é‡Œé¢å¤‡ä»½çš„è·¯å¾„ï¼Œrediså¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ¢å¤</p>
<p>é¦–å…ˆå¦‚æœshutdownå°±ä¼šä¿å­˜ä¸€æ¬¡ï¼Œå¹¶ä¸”è°ƒç”¨flushallçš„æ—¶å€™ä¹Ÿä¼šæ›´æ–°åˆ°dump.dbé‡Œé¢</p>
<p><strong>æ‰€ä»¥ä¸å¯ä»¥æŠŠå¤‡ä»½æ–‡ä»¶å’Œç”Ÿäº§redisæœåŠ¡å™¨æ”¾åœ¨åŒä¸€å°æœåŠ¡å™¨ï¼Œå¿…é¡»åˆ†å¼€å„è‡ªå­˜å‚¨ï¼Œä»¥é˜²å¤‡ä»½æ–‡ä»¶ä¹Ÿæ²¡äº†</strong></p>
<p><strong>æ‰‹åŠ¨è§¦å‘ save / bgsave</strong></p>
<p>redisä¼šforks ï¼Œç„¶åå°±ä¼šæœ‰ä¸ªå­çš„å’Œçˆ¶è¿›ç¨‹ã€‚ç„¶ååå°å­è¿›ç¨‹ä¼šè¦†ç›–rdbäº†ã€‚</p>
<p>ç”Ÿäº§ä¸Šåªå…è®¸ç”¨bgsaveä¸è®¸ç”¨save</p>
<p>å› ä¸ºsaveä¼šé˜»å¡å½“å‰redisæœåŠ¡å™¨ï¼Œç›´åˆ°æŒä¹…åŒ–å·¥ä½œå®Œæˆï¼Œredisä¸èƒ½æ‰§è¡Œå…¶ä»–å‘½ä»¤ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">save</span><br><span class="line">bgsave è¿™ä¸ªæ˜¯åœ¨åå°è¿›è¡Œå¼‚æ­¥çš„å¿«ç…§æ“ä½œï¼Œä¸é˜»å¡ã€‚è¦†ç›–è€çš„rdb</span><br><span class="line"></span><br><span class="line">lastsave é€šè¿‡è¿™ä¸ªå‘½ä»¤è·å–æœ€åä¸€æ¬¡å¿«ç…§çš„æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´æˆ³è¦åœ¨Linuxå‘½ä»¤</span><br><span class="line"></span><br><span class="line">date -d @åˆšåˆšçš„æ—¶é—´æˆ³ å°±èƒ½ç›´åˆ°æ—¶é—´äº†</span><br></pre></td></tr></table></figure>
<p><strong>ä¼˜ç‚¹å’Œç¼ºç‚¹</strong></p>
<p>é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤ï¼Œå®šæ—¶å¤‡ä»½ï¼Œå†…å­˜åŠ è½½é€Ÿåº¦å¿«ï¼Œå¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜ã€‚</p>
<p>rdbåœ¨æ²¡æœ‰æ­£ç¡®å…³é—­çš„æ—¶å€™ä¼šä¸¢å¤±éƒ¨åˆ†æ•°æ®ã€‚forkå¯èƒ½ä¼šå¾ˆè€—æ—¶å¦‚æœæ•°æ®é‡å¤§ã€‚    </p>
<p><strong>æ£€æŸ¥å¹¶ä¿®å¤rdbæ–‡ä»¶</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/bin  ç±»ä¼¼äºprogramfileç„¶åé‡Œé¢æœ‰redis-check</span><br><span class="line">redis-check-rdb /myredis/dumpfiles/dump6379.rdb</span><br></pre></td></tr></table></figure>
<p><strong>å“ªäº›æƒ…å†µä¼šè§¦å‘RDBå¿«ç…§</strong></p>
<p>1ã€é…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„å¿«ç…§é…ç½®</p>
<p>2ã€æ‰‹åŠ¨save/bgsave</p>
<p>3ã€æ‰§è¡Œflushall / flushdb å‘½ä»¤ä½†é‡Œé¢æ˜¯ç©ºçš„æ— æ„ä¹‰</p>
<p>4ã€æ‰§è¡Œshutdownä¸”æ²¡æœ‰è®¾ç½®å¼€å¯AOFæŒä¹…åŒ–</p>
<p>5ã€ä¸»ä»å¤åˆ¶æ—¶ï¼Œä¸»èŠ‚ç‚¹è‡ªåŠ¨è§¦å‘</p>
<p><strong>rdbä¼˜åŒ–é…ç½®é¡¹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">save &lt;seconds&gt; &lt;changes&gt;</span><br><span class="line">dbfilename</span><br><span class="line">dir</span><br><span class="line">stop-writes-on-bgsave-error  é»˜è®¤yes å½“bgsave errorçš„æ—¶å€™åœæ­¢å†™</span><br><span class="line">å¦‚æœé…ç½®noè¡¨ç¤ºä½ ä¸åœ¨ä¹æ•°æ®ä¸ä¸€è‡´æˆ–è€…æœ‰å…¶ä»–çš„æ‰‹æ®µå‘ç°å’Œæ§åˆ¶è¿™ç§ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆåœ¨å¿«ç…§å†™å…¥å¤±è´¥æ—¶ï¼Œä¹Ÿèƒ½ç¡®ä¿redisç»§ç»­æ¥å—æ–°çš„å†™è¯·æ±‚</span><br><span class="line">rdbcompression  é»˜è®¤yes å¯¹äºå­˜å‚¨åˆ°ç£ç›˜ä¸­çš„å¿«ç…§ï¼Œå¯ä»¥è®¾ç½®æ˜¯å¦è¿›è¡Œå‹ç¼©å­˜å‚¨</span><br><span class="line">rdbchecksum é»˜è®¤yes åœ¨å­˜å‚¨å¿«ç…§åï¼Œè¿›è¡ŒCRC64è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œä¼šå¢åŠ 10%æ€§èƒ½æ¶ˆè€—</span><br><span class="line">rdb-del-sync-files é»˜è®¤no åœ¨æ²¡æœ‰æŒä¹…æ€§çš„æƒ…å†µä¸‹åˆ é™¤å¤åˆ¶ä¸­ä½¿ç”¨çš„RDBæ–‡ä»¶ï¼Œæ²¡å¿…è¦åˆ </span><br></pre></td></tr></table></figure>
<p><strong>å¦‚ä½•ç¦ç”¨å¿«ç…§</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">åŠ¨æ€çš„åœæ­¢RDB redis-cli config set save &quot;&quot;  æœ¬æ¬¡cliç¦ç”¨</span><br><span class="line">é…ç½®æ–‡ä»¶ç¦ç”¨ åœ¨save &quot;&quot; å†™ä¸ªç©ºå­—ç¬¦ä¸²å³å¯</span><br></pre></td></tr></table></figure>
<h4 id="2-AOF"><a href="#2-AOF" class="headerlink" title="2 AOF"></a>2 <strong>AOF</strong></h4><p>â€‹    AOF(Append Only File)æŠŠRedisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼Œè¯»æ“ä½œä¸è®°å½•ã€rediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œredisæ²¡æœ‰å¼€å¯ï¼Œè¦å¼€å¯éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ <code>appendonly yes</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># é»˜è®¤no</span><br><span class="line">appendonly yes</span><br><span class="line"># aofæ–‡ä»¶å</span><br><span class="line">appendfilename &quot;appendonly.aof&quot;</span><br></pre></td></tr></table></figure>
<p><strong>AOFå·¥ä½œæµç¨‹</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127233133875.png" alt="image-20251127233133875"></p>
<p><strong>AOFä¸‰ç§å†™å›ç­–ç•¥</strong></p>
<p>Always / everysec / no</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">appendfsync everysec åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ¯ç§’å†™å›ï¼Œå…ˆæŠŠæ—¥å¿—å†™åˆ°AOFç¼“å†²åŒºï¼Œæ¯éš”1ç§’å†™å›aofæ–‡ä»¶ä¸­</span><br><span class="line">Alwaysæ˜¯åŒæ­¥å†™å›ï¼Œæ¯ä¸ªå†™å‘½ä»¤ï¼Œç«‹åˆ»åŒæ­¥å†™å›</span><br><span class="line">no æ“ä½œç³»ç»Ÿæ§åˆ¶çš„å†™å›ï¼Œæ¯ä¸ªå†™å‘½ä»¤æ‰§è¡Œå®Œï¼Œåªæ˜¯å…ˆæŠŠæ—¥å¿—å†™åˆ°AOFæ–‡ä»¶çš„å†…å­˜ç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å†™å›</span><br></pre></td></tr></table></figure>
<p><strong>AOFçš„é…ç½®æ–‡ä»¶è¯´æ˜</strong></p>
<p><strong>Redis7æ–°ç‰¹æ€§ Multi-part AOF</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251127234924610.png" alt="image-20251127234924610"></p>
<p><strong>aofçš„ä¿å­˜è·¯å¾„</strong></p>
<p>redis6æ˜¯ AOF ä¿å­˜æ–‡ä»¶çš„ä½ç½®å’Œ RDB æ–‡ä»¶ä½ç½®æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯dirä¸­é…ç½®çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dir /myredis</span><br><span class="line"></span><br><span class="line">/myredis/dump.db</span><br><span class="line">/myredis/appendonly.aof</span><br></pre></td></tr></table></figure>
<p>redis7æ˜¯ æœ‰dir + appenddirname</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dir /myredis</span><br><span class="line">appenddirname &quot;appendonlydir&quot;</span><br><span class="line"></span><br><span class="line">/myredis/dump.rdb</span><br><span class="line">/myredis/appendonlydir/xxx.aof</span><br></pre></td></tr></table></figure>
<p><strong>aofä¿å­˜çš„åç§°</strong></p>
<p>redis6 åªæœ‰å«appendonly.aof</p>
<p>redis7 Muti Part AOFè®¾è®¡ï¼Œå¤šéƒ¨åˆ†ç»„æˆaof å¯¹å¤–åå­—è¿˜å«appendonly.aof ä½†æ˜¯å®é™…ä¸Šåˆ†ä¸ºäº†ä¸‰ä¸ªæ–‡ä»¶ç»„æˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128000800062.png" alt="image-20251128000800062"></p>
<p>base åŸºæœ¬æ–‡ä»¶</p>
<p>incr å¢é‡æ–‡ä»¶</p>
<p>manifest æ¸…å•æ–‡ä»¶</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128000904887.png" alt="image-20251128000904887"></p>
<p>å°è¯•åˆ©ç”¨ AOF æ¢å¤æµç¨‹</p>
<p>å†™æ“ä½œç»§ç»­ï¼Œç„¶åç”ŸæˆAOFæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</p>
<p>æ¢å¤1 ï¼š é‡å¯redisç„¶åé‡æ–°åŠ è½½ï¼Œç»“æœOK</p>
<p>æ¢å¤2ï¼šå†™å…¥æ•°æ®è¿›redisï¼Œç„¶åflushdb+shutdownæœåŠ¡å™¨ï¼Œæ–°ç”Ÿæˆäº†dumpå’Œaofï¼Œå¤‡ä»½æ–°ç”Ÿæˆçš„aof.bakï¼Œç„¶ååˆ é™¤dump/aofå†çœ‹æ¢å¤ï¼Œé‡å¯redisç„¶ååŠ è½½ï¼Œåœæ­¢æœåŠ¡å™¨ï¼Œæ‹¿å‡ºæˆ‘ä»¬çš„å¤‡ä»½ä¿®æ”¹åå†é‡å¯æœåŠ¡å™¨</p>
<p>ä¸Šé¢éƒ½æ˜¯æ­£å¸¸çŠ¶å†µ</p>
<p><strong>å¼‚å¸¸æ¢å¤</strong> å‡è®¾å†…å®¹åªå†™äº†ä¸€å°åŠï¼Œæ²¡å†™å®Œæ•´ï¼ŒredisæŒ‚äº†ï¼Œå¯¼è‡´aofæ–‡ä»¶é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ©ç”¨å‘½ä»¤ redis-check-aof --fix è¿›è¡Œä¿®å¤</span><br></pre></td></tr></table></figure>
<p><strong>aofé‡å†™æœºåˆ¶</strong></p>
<p>å½“aofçš„æ–‡ä»¶è¶Šæ¥è¶Šå¤§ï¼Œä¸æ–­è®°å½•å†™å‘½ä»¤ï¼ŒAOFæ¢å¤è¦æ±‚çš„æ—¶é—´è¶Šæ¥è¶Šé•¿ã€‚</p>
<p>åªä¿ç•™å¯ä»¥æ¢å¤æ•°æ®çš„æœ€å°æŒ‡ä»¤é›†ï¼Œ<strong>æˆ–è€…æ‰‹åŠ¨ä½¿ç”¨å‘½ä»¤æ¥é‡å†™</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è‡ªåŠ¨çš„è¯é…ç½®ï¼ŒåŒæ—¶æ»¡è¶³ä¸”çš„å…³ç³»æ‰ä¼šè§¦å‘</span><br><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb </span><br><span class="line">æ ¹æ®ä¸Šæ¬¡é‡å†™åaofçš„å¤§å°ï¼Œåˆ¤æ–­å½“å‰aofå¤§å°æ˜¯ä¸æ˜¯å¢é•¿äº†1å€ï¼Œé‡å†™æ—¶æ»¡è¶³çš„æ–‡ä»¶å¤§å° å¤§äº64M</span><br></pre></td></tr></table></figure>
<p>æ‰‹åŠ¨çš„è¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€<code>bgrewriteaof</code> å‘½ä»¤ </p>
<p><strong>AOFæ–‡ä»¶çš„é‡å†™å¹¶ä¸æ˜¯å¯¹æºæ–‡ä»¶è¿›è¡Œé‡æ–°æ•´ç†ï¼Œè€Œæ˜¯ç›´æ¥è¯»å–æœåŠ¡å™¨ç°æœ‰çš„é”®å€¼å¯¹ï¼Œç„¶åç”¨ä¸€æ¡å‘½ä»¤å»ä»£æ›¿ä¹‹å‰è®°å½•è¿™ä¸ªé”®å€¼å¯¹çš„å¤šæ¡å‘½ä»¤ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶åå»æ›¿æ¢åŸæ¥çš„AOFæ–‡ä»¶ã€‚</strong></p>
<p><strong>é‡å†™åŸç†</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128010832943.png" alt="image-20251128010832943"></p>
<p><strong>Redis 7 çš„ AOF é‡å†™é€šè¿‡ fork å­è¿›ç¨‹å°†å†…å­˜æ•°æ®è½¬ä¸ºç´§å‡‘å‘½ä»¤å†™å…¥ <code>base</code> æ–‡ä»¶ï¼Œçˆ¶è¿›ç¨‹å°†é‡å†™æœŸé—´çš„æ–°å‘½ä»¤å†™å…¥æ–°çš„ <code>incr</code> æ–‡ä»¶ï¼Œæœ€åé€šè¿‡ <code>manifest</code> æ¸…å•å°† <code>base + incr</code> ç»„åˆæˆé€»è¾‘ä¸Šçš„å®Œæ•´ AOFï¼Œå…¨ç¨‹æ— éœ€è¦†ç›–æˆ–åˆ é™¤ä»»ä½•ç°æœ‰æ–‡ä»¶ã€‚</strong></p>
<p><strong>Redis 7 çš„ AOF é‡å†™å…¨ç¨‹åœ¨æ–°æ–‡ä»¶ä¸Šæ“ä½œï¼Œæ—§ AOF æ–‡ä»¶ä¿ç•™ä¸”ä¸è¢«è¦†ç›–ã€‚<br> æ—§æ–‡ä»¶åœ¨ä¸å†è¢« <code>manifest</code> å¼•ç”¨åï¼Œç”± Redis åå°å¼‚æ­¥æ¸…ç†ï¼Œç¡®ä¿é«˜å¯ç”¨ä¸æ•°æ®å®‰å…¨ã€‚</strong></p>
<p><strong>æ€»ç»“é…ç½®</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128014335015.png" alt="image-20251128014335015"></p>
<h4 id="3-RDB-AOF-æ··åˆ"><a href="#3-RDB-AOF-æ··åˆ" class="headerlink" title="3 RDB + AOF æ··åˆ"></a>3 RDB + AOF æ··åˆ</h4><p>å¦‚æœå¼€å¯äº†aofï¼Œä¼šä¼˜å…ˆåŠ è½½aofï¼Œå…¶æ¬¡å†åŠ è½½rdbæ–‡ä»¶æ¥æ¢å¤ã€‚</p>
<p>å¼€å¯æ··åˆé…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aof-use-rdb-preamble yes</span><br><span class="line">å¼€å¯årdbåšå…¨é‡ï¼Œaofåšå¢é‡</span><br></pre></td></tr></table></figure>
<p>è¿™æ—¶å€™äº§ç”Ÿçš„æ–‡ä»¶ä¸€éƒ¨åˆ†æ˜¯rdbï¼Œä¸€éƒ¨åˆ†æ˜¯aofã€‚</p>
<p><strong>å¦‚æœç”¨çº¯ç¼“å­˜æ¨¡å¼ï¼ŒåŒæ—¶å…³é—­RDBå’ŒAOF</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨é…ç½®é‡Œé¢</span><br><span class="line">save &quot;&quot; ç¦ç”¨rdb</span><br><span class="line">appendonly no ç¦ç”¨aof</span><br></pre></td></tr></table></figure>
<h2 id="Redis-äº‹åŠ¡"><a href="#Redis-äº‹åŠ¡" class="headerlink" title="Redis äº‹åŠ¡"></a>Redis äº‹åŠ¡</h2><p>äº‹åŠ¡å°±æ˜¯ä¸€ç»„å‘½ä»¤çš„é›†åˆï¼Œè¦ä¹ˆä¸€èµ·æˆåŠŸï¼Œè¦ä¹ˆä¸€èµ·å¤±è´¥ã€‚</p>
<p><strong>åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œä¸€æ¬¡æ€§ï¼Œé¡ºåºæ€§ï¼Œæ’ä»–æ€§çš„æ“ä½œ</strong></p>
<p>Redisäº‹åŠ¡å’Œæ•°æ®åº“çš„äº‹åŠ¡åŒºåˆ«</p>
<p>1ã€Redisäº‹åŠ¡æ˜¯å•ç‹¬çš„éš”ç¦»æ“ä½œï¼šRedisäº‹åŠ¡ä»…ä»…ä¿è¯äº‹åŠ¡çš„æ“ä½œä¼šè¢«è¿ç»­ç‹¬å æ‰§è¡Œï¼Œæ‰§è¡Œå®Œäº‹åŠ¡å†…çš„æ‰€æœ‰æŒ‡ä»¤ä¸å¯èƒ½å†å»åŒæ—¶æ‰§è¡Œå…¶ä»–å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p>
<p>2ã€æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µï¼šå› ä¸ºäº‹åŠ¡æäº¤å‰ä»»ä½•æŒ‡ä»¤éƒ½ä¸ä¼šè¢«å®é™…æ‰§è¡Œï¼Œä¹Ÿå°±ä¸å­˜åœ¨â€œäº‹åŠ¡å†…çš„æŸ¥è¯¢è¦çœ‹åˆ°äº‹åŠ¡é‡Œçš„æ›´æ–°ï¼Œåœ¨äº‹åŠ¡å¤–æŸ¥è¯¢ä¸èƒ½çœ‹åˆ°â€è¿™ç§é—®é¢˜</p>
<p>3ã€Redisçš„äº‹åŠ¡ä¸ä¿è¯åŸå­æ€§ï¼Œä¹Ÿå°±æ˜¯ä¸ä¿è¯æ‰€æœ‰æŒ‡ä»¤åŒæ—¶æˆåŠŸæˆ–åŒæ—¶å¤±è´¥ï¼Œåªæœ‰å†³å®šæ˜¯å¦å¼€å§‹æ‰§è¡Œå…¨éƒ¨æŒ‡ä»¤çš„èƒ½åŠ›ï¼Œæ²¡æœ‰æ‰§è¡Œåˆ°ä¸€åŠè¿›è¡Œå›æ»šçš„èƒ½åŠ›</p>
<p>4ã€æ’ä»–æ€§ï¼šRedisä¼šä¿è¯ä¸€ä¸ªäº‹åŠ¡å†…çš„å‘½ä»¤ä¸€æ¬¡æ‰§è¡Œï¼Œè€Œä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ’å…¥</p>
<p>ä½†æ˜¯ä½¿ç”¨ Redis äº‹åŠ¡ <strong>ç¡®å®å­˜åœ¨æ•°æ®ä¸¢å¤±æˆ–æ•°æ®ä¸ä¸€è‡´çš„é£é™©</strong>ï¼Œmysqlä¸ä¼šåªè¦åšå¥½é…ç½®ã€‚</p>
<p><strong>å¸¸ç”¨å‘½ä»¤</strong></p>
<p><strong>Discard å–æ¶ˆäº‹åŠ¡ï¼ŒExec æ‰§è¡Œæ‰€æœ‰äº‹åŠ¡å—å†…çš„å‘½ä»¤</strong></p>
<p><strong>Multi æ ‡è®°ä¸€ä¸ªäº‹åŠ¡å—çš„å¼€å§‹ </strong></p>
<p><strong>Unwatch å–æ¶ˆwatchå‘½ä»¤å¯¹æ‰€æœ‰keyçš„ç›‘è§†</strong></p>
<p><strong>Watch key ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ªkeyï¼Œå¦‚æœäº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™äº›keyè¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­</strong></p>
<p><strong>case1 æ­£å¸¸æ‰§è¡Œ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">multi</span><br><span class="line">set k1 v1  </span><br><span class="line">set k2 v2</span><br><span class="line">incr count</span><br><span class="line">exec  è¿™é‡Œmultiä¹‹åçš„å‘½ä»¤è¿˜æ²¡æ‰§è¡Œåªæ˜¯æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œexecæ‰æ˜¯æœ€ç»ˆæ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<p><strong>case2 æ”¾å¼ƒæ‰§è¡Œ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">multi</span><br><span class="line">set k1 v1 </span><br><span class="line">set k2 v2</span><br><span class="line">incr count</span><br><span class="line">discard è¿™æ—¶å€™é˜Ÿåˆ—é‡Œçš„å‘½ä»¤å…¨éƒ¨æ”¾å¼ƒæ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<p><strong>case3 å…¨ä½“è¿å</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœäº‹åŠ¡å‡ºé”™å…¨éƒ¨ä¸æ‰§è¡Œï¼Œè¿™ä¸ªæ˜¯åœ¨æ‰§è¡Œexecä¹‹å‰æ‰ä¼šå‘ç”Ÿçš„</span><br><span class="line">multi</span><br><span class="line">set k1 v1</span><br><span class="line">set k2</span><br><span class="line">exec </span><br><span class="line">é‚£ä¹ˆè¿™æ—¶å€™å…¨éƒ¨å‘½ä»¤éƒ½ä¸æ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<p><strong>case4 å†¤å¤´å€ºä¸»</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœäº‹åŠ¡execåæ‰§è¡Œå¼‚å¸¸ï¼Œä¸€ä¸ªå‘½ä»¤å¤±è´¥ï¼Œå…¶ä»–å‘½ä»¤è¿˜æ˜¯ç»§ç»­æ‰§è¡Œ</span><br><span class="line">multi</span><br><span class="line">set k1 v1</span><br><span class="line">incr email</span><br><span class="line">exec</span><br><span class="line">è¿™æ—¶å€™eamilæ‰§è¡Œå‡ºé”™ä½†æ˜¯k1 v1è¿˜æ˜¯è®¾ç½®æˆåŠŸäº†</span><br></pre></td></tr></table></figure>
<p><strong>case5 watchç›‘æ§</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Redisä½¿ç”¨Watchæ¥æä¾›ä¹è§‚é”å®šï¼Œç±»ä¼¼äºCASã€‚</span><br><span class="line">æ‚²è§‚é”æ˜¯Synchronized lock unlock ï¼Œå¾ˆæ‚²è§‚ï¼Œæ¯æ¬¡æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šblockçŸ¥é“å®ƒæ‹¿åˆ°é”</span><br><span class="line">ä¹è§‚é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¾ˆä¹è§‚ï¼Œæ¯æ¬¡æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ã€‚ä¹è§‚é”ç­–ç•¥ï¼Œæäº¤ç‰ˆæœ¬å¿…é¡»å¤§äºè®°å½•å½“å‰ç‰ˆæœ¬æ‰èƒ½æ‰§è¡Œæ›´æ–°</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">set k1 v1</span><br><span class="line">set balance 100</span><br><span class="line"></span><br><span class="line">watch balance</span><br><span class="line">multi</span><br><span class="line">set k1 v2</span><br><span class="line">set balance 200</span><br><span class="line">exec</span><br><span class="line">è¿™æ—¶å€™å¾ˆæ­£å¸¸æ‰§è¡ŒæˆåŠŸ</span><br><span class="line"></span><br><span class="line">multi</span><br><span class="line">set k1 v3</span><br><span class="line">set balance 300</span><br><span class="line">è¿™æ—¶å€™å¦ä¸€ä¸ªå®¢æˆ·ç«¯</span><br><span class="line">set balance 400</span><br><span class="line">å›åˆ°åŸæ¥å®¢æˆ·ç«¯</span><br><span class="line">exec</span><br><span class="line">è¿™æ—¶å€™æ•´ä¸ªäº‹åŠ¡å…¨éƒ¨ä¸æ‰§è¡Œï¼Œè¿™å°±æ˜¯ä¹è§‚é”çš„æ•ˆæœ</span><br><span class="line"></span><br><span class="line">unwatchå°±æ˜¯å–æ¶ˆwatchå°±å¥½äº† UNWATCH ä¼šç«‹å³æ¸…é™¤å½“å‰è¿æ¥ä¸Šæ‰€æœ‰çš„ WATCH ç›‘æ§ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="Redisç®¡é“"><a href="#Redisç®¡é“" class="headerlink" title="Redisç®¡é“"></a>Redisç®¡é“</h2><p>å¤„ç†é—®é¢˜çš„ç»“æœè·Ÿäº‹åŠ¡ç±»ä¼¼ï¼Œä½†æ˜¯å®Œå…¨ä¸ä¸€æ ·ã€‚</p>
<p>å¦‚ä½•ä¼˜åŒ–é¢‘ç¹å‘½ä»¤å¾€è¿”é€ æˆçš„æ€§èƒ½ç“¶é¢ˆï¼ŸRedisæ¯ç§’é’Ÿå¯ä»¥8ä¸‡æ¬¡å†™ï¼Œ10ä¸‡æ¬¡è¯»ï¼Œä½†æ˜¯ä¸€æ¡å‘½ä»¤éœ€è¦è¿”å›ä¸€ä¸ªOKï¼Œè¿™æ¬¡æƒ³èƒ½ä¸èƒ½æ‰¹å¤„ç†è¿™æ—¶å€™æƒ³åˆ°msetï¼Œè¿™ä¸ªmsetå°±ç±»ä¼¼äºç®¡é“ï¼ŒæŠŠæ‰€æœ‰å‘½ä»¤æ’æˆä¸€ä¸ªæµæ°´çº¿ï¼Œä¸€æ¬¡æ€§æ“ä½œã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128153519036.png" alt="image-20251128153519036"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128153721949.png" alt="image-20251128153721949"></p>
<p><strong>è§£å†³æ€è·¯</strong></p>
<p>ç„¶åå°±å¼•å‡ºäº†ç®¡é“çš„æ¦‚å¿µï¼Œä¸€æ¬¡å‘é€å¤šæ¡å‘½ä»¤ç»™å®¢æˆ·ç«¯ï¼Œåªæœ‰ä¸€æ¬¡ç›¸åº”ï¼Œé‰´èµé€šä¿¡æ¬¡æ•°ï¼Œå®ç°é™ä½å¾€è¿”å»¶æ—¶æ—¶é—´ã€‚</p>
<p><strong>æ¡ˆä¾‹</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆå†™ä¸€ä¸ªcmd.txtç„¶åé‡Œé¢å†™ç€</span><br><span class="line">set k1 v1</span><br><span class="line">hset k3 name z3</span><br><span class="line">hset k3 age 20</span><br><span class="line">lpush list 1 2 3 4</span><br><span class="line">è¿™äº›å‘½ä»¤</span><br><span class="line">ç„¶åå†linuxä¸­ä½¿ç”¨å‘½ä»¤</span><br><span class="line">cat cmd.txt | redis-cli -a [å¯†ç ] -- pipe   ç„¶åå°±èƒ½ä½¿ç”¨ç®¡é“äº†</span><br></pre></td></tr></table></figure>
<p><strong>ç®¡é“ä¸åŸç”Ÿæ‰¹é‡å‘½ä»¤å¯¹æ¯”</strong></p>
<p>åŸç”Ÿå°±æ˜¯mseté‚£äº›ã€‚<strong>é¦–å…ˆåŸç”Ÿæ‰¹é‡å‘½ä»¤æ˜¯åŸå­æ€§çš„ï¼Œä½†æ˜¯ç®¡é“ä¸æ˜¯åŸå­æ€§çš„</strong>ï¼Œå…¶æ¬¡åŸç”Ÿæ‰¹é‡å‘½ä»¤ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ç§ç±»å‹ï¼Œç®¡é“å¯ä»¥å„ç§ç±»å‹çš„å‘½ä»¤ï¼ŒåŸç”Ÿæ˜¯æœåŠ¡ç«¯å®ç°çš„ï¼Œç®¡é“æ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å…±åŒå®ç°çš„ã€‚</p>
<p><strong>ç®¡é“ä¸äº‹åŠ¡</strong></p>
<p>äº‹åŠ¡å…·æœ‰åŸå­æ€§ï¼Œç®¡é“ä¸å…·æœ‰</p>
<p>ç®¡é“ä¸€æ¬¡æ€§å°†å¤šæ¡å‘½ä»¤å‘é€åˆ°æœåŠ¡ç«¯ï¼Œäº‹åŠ¡æ˜¯ä¸€æ¡ä¸€æ¡å‘æ”¶åˆ°execå‘½ä»¤æ‰ä¼šæ‰§è¡Œ</p>
<p>æ‰§è¡Œäº‹åŠ¡ä¼šé˜»å¡å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œï¼Œç®¡é“ä¸­çš„å‘½ä»¤ä¸ä¼š</p>
<p><strong>ä½¿ç”¨ç®¡é“æ³¨æ„çš„äº‹é¡¹</strong></p>
<p>ç®¡é“ç¼“å†²çš„æŒ‡ä»¤åªæ˜¯ä¼šä¾æ¬¡æ‰§è¡Œï¼Œä¸ä¿è¯åŸå­æ€§ï¼Œå¦‚æœæ‰§è¡Œä¸­æŒ‡ä»¤å‘ç”Ÿå¼‚å¸¸ï¼Œå°†ä¼šç»§ç»­æ‰§è¡Œåç»­çš„æŒ‡ä»¤</p>
<p>ä½¿ç”¨ç®¡é“ç»„è£…çš„å‘½ä»¤ä¸èƒ½å¤ªå¤šæ²¡ä¸ç„¶æ•°æ®é‡è¿‡å¤§ï¼Œå®¢æˆ·ç«¯é˜»å¡çš„æ—¶é—´å¯èƒ½ä¼šè¿‡ä¹…ã€‚</p>
<h2 id="Redis-å‘å¸ƒè®¢é˜…"><a href="#Redis-å‘å¸ƒè®¢é˜…" class="headerlink" title="Redis å‘å¸ƒè®¢é˜…"></a>Redis å‘å¸ƒè®¢é˜…</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251128193305939.png" alt="image-20251128193305939"></p>
<p>ä¸æ¨èä½¿ç”¨ã€‚</p>
<h2 id="Redisä¸»ä»å¤åˆ¶"><a href="#Redisä¸»ä»å¤åˆ¶" class="headerlink" title="Redisä¸»ä»å¤åˆ¶"></a><strong>Redisä¸»ä»å¤åˆ¶</strong></h2><p>HA high application é«˜å¯ç”¨    </p>
<p>masterä»¥å†™ä¸ºä¸»ï¼Œslaveä»¥è¯»ä¸ºä¸»ã€‚</p>
<p>å½“masteræ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œè‡ªåŠ¨å°†æ–°çš„æ•°æ®å¼‚æ­¥åŒæ­¥åˆ°å…¶ä»–slaveæ•°æ®åº“</p>
<p><strong>èƒ½å¹²å˜›ï¼Ÿ</strong></p>
<p>1ã€è¯»å†™åˆ†ç¦»</p>
<p>2ã€å®¹ç¾æ¢å¤</p>
<p>3ã€æ•°æ®å¤‡ä»½</p>
<p>4ã€æ°´å¹³æ‰©å®¹æ”¯æ’‘é«˜å¹¶å‘</p>
<p><strong>æ€ä¹ˆç”¨</strong></p>
<p>é…ä»åº“ä¸é…ä¸»åº“ï¼Œä¸€ä¸ªä¸»åº“ï¼Œä¸¤ä¸ªä»åº“</p>
<p><strong>æƒé™ç»†èŠ‚</strong></p>
<p>å•æœºé…ç½®äº†requirepassï¼Œéœ€è¦å¯†ç ç™»å½•ï¼Œé‚£ä¹ˆslaveå°±è¦é…ç½®masterauthæ¥è®¾ç½®æ ¡éªŒå¯†ç ï¼Œå¦åˆ™masterå°±ä¼šæ‹’ç»slaveçš„è®¿é—®è¯·æ±‚ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">masterauth [å¯†ç ]</span><br></pre></td></tr></table></figure>
<p><strong>å¸¸ç”¨æ“ä½œå‘½ä»¤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info replication           å¯ä»¥æŸ¥çœ‹å¤åˆ¶èŠ‚ç‚¹çš„ä¸»ä»å…³ç³»å’Œé…ç½®ä¿¡æ¯</span><br><span class="line">replicaof ä¸»åº“IP ä¸»åº“ç«¯å£   ä¸€èˆ¬å†™å…¥è¿›redis.confé…ç½®æ–‡ä»¶å†…ï¼Œè®¾ç½®ä¸»redis</span><br><span class="line">slaveof ä¸»åº“IP ä¸»åº“ç«¯å£     å¦‚æœä»æœºè·Ÿmasteræ–­å¼€ä¹‹åéƒ½éœ€è¦é‡æ–°è¿æ¥ï¼Œå¯ä»¥ç”¨å‘½ä»¤é‡æ–°è®¤å®šæ–°çš„ä¸»redis</span><br><span class="line">slaveof no one             åœæ­¢å½“ä»æ•°æ®åº“ï¼Œè‡ªå·±å½“ä¸»</span><br></pre></td></tr></table></figure>
<p><strong>ä¸€ä¸»å¤šä»æ­å»º</strong></p>
<p>3å°è™šæ‹Ÿæœºï¼Œéƒ½å®‰è£…redis</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ‹·è´å¤šä¸ªredis.confæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸ºredis6379.confã€redis6380.confã€redis6381.conf</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆä¿è¯ä¸‰è¾¹çš„ç½‘ç»œç›¸äº’pingé€šï¼Œä¸”æ³¨æ„é˜²ç«å¢™é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ifconfig æŸ¥çœ‹ip</span><br><span class="line">ping ä¸‰è¾¹ip</span><br><span class="line">é˜²ç«å¢™è®¾ç½®ç™½åå•</span><br><span class="line">ç„¶ååœ¨ä»åº“redis.confé…ç½® replicaof ä¸»æœºip ä¸»æœºç«¯å£</span><br><span class="line">å¦‚æœéœ€è¦ åœ¨redis-cliç”¨æŒ‡ä»¤åŠ¨æ€æ¢ä¸»åº“ ç”¨slaveof æ–°ä¸»åº“ip ä¸»åº“ç«¯å£</span><br><span class="line">å¦‚æœéœ€è¦è‡ªå·±å½“ä¸»æœº åœ¨redis-cliç”¨æŒ‡ä»¤ ç”¨slaveof no one</span><br></pre></td></tr></table></figure>
<p>é…ç½®ä»redisä¸ºä¾‹å­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å¼€å¯daemonize yes    åå°è¿è¡Œyesï¼Œå¤§æ¦‚309è¡Œ</span><br><span class="line">æ³¨é‡Šbind 127.0.0.1   ç»‘å®šipæ³¨é‡Šæ‰</span><br><span class="line">protected-mode no	ä¿æŠ¤æ¨¡å¼å…³é—­</span><br><span class="line">æŒ‡å®šç«¯å£	         port 6379/6380/6381</span><br><span class="line">æŒ‡å®šå½“å‰å·¥ä½œç›®å½• dir  dir /myredis  é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œç”¨ç»å¯¹è·¯å¾„</span><br><span class="line">pidæ–‡ä»¶åå­—ï¼Œpidfile  å¤§æ¦‚341è¡Œé»˜è®¤å°±è¡Œä½†æ˜¯è¦çŸ¥é“åœ¨å“ª</span><br><span class="line">logæ–‡ä»¶åå­—ï¼Œlogfile  å¤§æ¦‚354è¡Œé»˜è®¤å°±è¡Œä½†æ˜¯è¦çŸ¥é“æ”¾åœ¨å“ªå’Œçº§åˆ« &quot;/myredis/6379.log&quot;</span><br><span class="line">requirepass          æœ¬æœºå¯†ç </span><br><span class="line">dump.rdbåå­—          å¤§æ¦‚482è¡Œdbfilename,dump6379.rdb</span><br><span class="line">aofæ–‡ä»¶ï¼Œappendfilename éœ€è¦å¼€å¯appendonly yeså¯å¼€å¯</span><br><span class="line">ä»æœºè®¿é—®ä¸»æœºçš„é€šè¡Œå¯†ç masterauthï¼Œä»æœºè¦é…ç½®ï¼Œä¸»æœºä¸ç”¨å¤§æ¦‚582è¡Œ</span><br></pre></td></tr></table></figure>
<p><strong>æ­å»ºå¥½ä¹‹å</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å…ˆå¯åŠ¨ä¸»ï¼Œåä¸¤å°ä»å†å¼€å¯</span><br><span class="line">redis-server /myredis/redis6379.conf</span><br><span class="line">redis-cli -a [å¯†ç ] -p 6379</span><br><span class="line">å¦‚æœå‡ºé”™å¯ä»¥çœ‹åˆšåˆšçš„æ—¥å¿—æ–‡ä»¶ä¸­æŸ¥çœ‹é—®é¢˜</span><br></pre></td></tr></table></figure>
<p><strong>ä»æœºå¯ä»¥å†™å‘½ä»¤å—ï¼Ÿä¸å¯ä»¥</strong></p>
<p><strong>é‚£ä¸»æœºå†™åˆ°äº†k3ç„¶åä»æœºå¯åŠ¨äº†ï¼Œè¿™æ—¶å€™ä»æœºå¯åŠ¨ï¼Œä»æœºä¼šè¯»k1å’Œk2å—ï¼Ÿä¼š</strong></p>
<p><strong>ä¸»æœºshutdownï¼Œä»æœºä¼šå½“ä¸»æœºå—ï¼Ÿä¸ä¼šï¼Œä»æœºä¸åŠ¨åŸåœ°å¾…å‘½</strong></p>
<p><strong>ä¸»æœºshutdownåï¼Œé‡å¯åï¼Œèƒ½æ¢å¤å—ï¼Ÿèƒ½</strong></p>
<p><strong>ä»æœºshutdownåï¼Œmasterç»§ç»­ï¼Œä»æœºæ¢å¤èƒ½è·Ÿä¸Šå—ï¼Ÿèƒ½</strong></p>
<p><strong>è–ªç«ç›¸ä¼ </strong></p>
<p>ä¸Šä¸€ä¸ªslaveå¯ä»¥æ˜¯ä¸‹ä¸€ä¸ªslaveçš„masterï¼ŒslvaeåŒæ ·å¯ä»¥æ¥å—å…¶ä»–slavesçš„è¿æ¥å’ŒåŒæ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥slaveå¯ä»¥å‡è½»ä¸»masterçš„å†™å‹åŠ›ã€‚</p>
<p>ä¸­é€”å˜æ›´è½¬å‘ï¼šä¼šæ¸…é™¤ä¹‹å‰çš„æ•°æ®ï¼Œé‡æ–°å»ºç«‹æ‹·è´æœ€æ–°çš„ã€‚<code>slaveof æ–°ä¸»åº“ip æ–°ä¸»åº“ç«¯å£</code></p>
<p>è¿™ç§é…ç½®ä¸€ä¸ªä¸»masterï¼Œç„¶åä¸€ä¸ªslaveï¼Œä¸€ä¸ªslaveçš„slaveï¼Œè¿™æ ·é¦–å…ˆä¸»masterå†™æ“ä½œï¼Œä¸¤ä¸ªslaveéƒ½èƒ½è¯»åˆ°ï¼Œç„¶åè¿™æ—¶å€™ä¸¤ä¸ªslaveè¿˜æ˜¯ä¸èƒ½å†™æ“ä½œã€‚</p>
<p><strong>åå®¢ä¸ºä¸»</strong></p>
<p>ç”¨<code>slaveof no one</code>ç„¶åè‡ªå·±å°±å˜æˆmasteräº†</p>
<p><strong>é¢è¯•é¢˜å¤åˆ¶åŸç†å’Œå·¥ä½œæµç¨‹</strong></p>
<p><strong>slaveå¯åŠ¨ï¼ŒåŒæ­¥åˆè¯·</strong>ï¼šé¦–å…ˆslaveè¿æ¥åˆ°masteråä¼šå‘é€ä¸€ä¸ªsyncå‘½ä»¤ï¼Œåˆæ¬¡è¿æ¥masterï¼Œç¬¬ä¸€æ¬¡å®Œå…¨åŒæ­¥å…¨é‡å¤åˆ¶å°†è‡ªåŠ¨æ‰§è¡Œï¼Œslaveè‡ªèº«åŸæœ‰çš„æ•°æ®ä¼šè¢«masteræ•°æ®è¦†ç›–æ¸…é™¤ã€‚</p>
<p><strong>é¦–æ¬¡è¿æ¥ï¼Œå…¨é‡å¤åˆ¶ï¼š</strong>masterèŠ‚ç‚¹æ”¶åˆ°syncå‘½ä»¤åä¼šå¼€å§‹åœ¨åå°ä¿å­˜å¿«ç…§ï¼Œå³RDBæŒä¹…åŒ–ï¼Œä¸»ä»å¤åˆ¶æ—¶ä¼šè§¦å‘RDBï¼ŒåŒæ—¶æ”¶é›†æ‰€æœ‰æ¥æ”¶åˆ°çš„ç”¨äºä¿®æ”¹æ•°æ®é›†å‘½ä»¤ç¼“å­˜èµ·æ¥ï¼ŒmasterèŠ‚ç‚¹æ‰§è¡ŒRDBæŒä¹…åŒ–å®Œåï¼Œmasterå°†rdbå¿«ç…§æ–‡ä»¶å’Œæ‰€æœ‰ç¼“å­˜çš„å‘½ä»¤å‘é€åˆ°æ‰€æœ‰slaveï¼Œå®Œæˆä¸€æ¬¡å®Œå…¨åŒæ­¥ã€‚</p>
<p>è€ŒslaveæœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»è€Œå®Œæˆå¤åˆ¶åˆå§‹åŒ–ã€‚</p>
<p><strong>å¿ƒè·³æŒç»­ï¼Œä¿æŒé€šä¿¡ï¼š</strong> masterå‘å‡ºPINGåŒ…å‘¨æœŸï¼Œé»˜è®¤æ˜¯10ç§’ï¼Œæ¯åç§’ä¸­ç¡®è®¤æ˜¯å¦è¿æ¥è¿˜åœ¨ã€‚</p>
<p><strong>è¿›å…¥å¹³ç¨³ï¼Œå¢é‡å¤åˆ¶ï¼š</strong>Masterç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤è‡ªåŠ¨ä¾æ¬¡ä¼ ç»™slaveï¼Œå®ŒæˆåŒæ­¥ã€‚</p>
<p><strong>ä»æœºä¸‹çº¿ï¼Œé‡è¿ç»­ä¼ ï¼š</strong>å‡è®¾æœ‰ä¸€å°æœºå™¨downäº†ï¼Œmasterä¼šæ£€æŸ¥backlogé‡Œé¢çš„åç§»é‡offsetï¼Œmasterå’Œslaveéƒ½ä¼šä¿å­˜ä¸€ä¸ªå¤åˆ¶çš„offsetè¿˜æœ‰ä¸€ä¸ªmasterIdï¼Œoffsetæ˜¯ä¿å­˜åœ¨backlogä¸­çš„ã€‚<strong>Masteråªä¼šæŠŠå·²ç»å¤åˆ¶çš„offsetåé¢çš„æ•°æ®å¤åˆ¶ç»™slaveï¼Œç±»ä¼¼æ–­ç‚¹ç»­ä¼ </strong></p>
<p><strong>å¤åˆ¶çš„ç¼ºç‚¹</strong></p>
<p><strong>å¤åˆ¶å»¶æ—¶ï¼Œä¿¡å·è¡°å‡</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251129012204047.png" alt="image-20251129012204047"></p>
<p><strong>masteræŒ‚äº†æ€ä¹ˆåŠ</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ä¼šåœ¨slaveé‡Œé¢é€‰ä¸€ä¸ªmasterï¼Œé‚£æ¯æ¬¡éƒ½è¦äººå·¥å¹²é¢„ï¼Ÿ</p>
<p>æ— äººå€¼å®ˆå®‰è£…æˆäº†åˆšéœ€ï¼Œé‚£ä¹ˆå°±å¼•å‡ºäº†å“¨å…µå’Œé›†ç¾¤ã€‚</p>
<h2 id="å“¨å…µï¼ˆSentinelï¼‰"><a href="#å“¨å…µï¼ˆSentinelï¼‰" class="headerlink" title="å“¨å…µï¼ˆSentinelï¼‰"></a><strong>å“¨å…µï¼ˆSentinelï¼‰</strong></h2><p>â€‹    åœ¨redisä¸»ä»é»˜è®¤æ˜¯åªæœ‰ä¸»å…·å¤‡å†™çš„èƒ½åŠ›ï¼Œè€Œä»åªèƒ½è¯»ã€‚å¦‚æœä¸»å®•æœºï¼Œæ•´ä¸ªèŠ‚ç‚¹ä¸å…·å¤‡å†™èƒ½åŠ›ã€‚å¦‚æœæ•…éšœäº†æ ¹æ® <strong>æŠ•ç¥¨æ•°</strong> è‡ªåŠ¨å°†æŸä¸€ä¸ªä»åº“è½¬æ¢ä¸ºæ–°ä¸»åº“ï¼Œç»§ç»­å¯¹å¤–æœåŠ¡ã€‚</p>
<p>ä½œç”¨ï¼šæ— äººå€¼å®ˆè¿ç»´ï¼Œç›‘æ§redisè¿è¡ŒçŠ¶æ€ï¼Œå½“masterå®•æœºèƒ½è‡ªåŠ¨å°†slaveåˆ‡æ¢æˆæ–°master</p>
<p><strong>èƒ½å¹²å˜›ï¼Ÿ</strong></p>
<p>1ã€ä¸»ä»ç›‘æ§ï¼šç›‘æ§ä¸»ä»redisåº“è¿è¡Œæ˜¯å¦æ­£å¸¸</p>
<p>2ã€æ¶ˆæ¯é€šçŸ¥ï¼šå“¨å…µå¯ä»¥å°†æ•…éšœè½¬ç§»çš„ç»“æœå‘é€ç»™å®¢æˆ·ç«¯</p>
<p>3ã€æ•…éšœè½¬ç§»ï¼šå¦‚æœMasterå¼‚å¸¸ï¼Œåˆ™ä¼šè¿›è¡Œä¸»ä»åˆ‡æ¢ï¼Œå°†å…¶ä¸­ä¸€ä¸ªSlaveä½œä¸ºæ–°Master</p>
<p>4ã€é…ç½®ä¸­å¿ƒï¼šå®¢æˆ·ç«¯é€šè¿‡è¿æ¥å“¨å…µæ¥è·å¾—å½“å‰RedisæœåŠ¡çš„ä¸»èŠ‚ç‚¹åœ°å€</p>
<p><strong>Redis Sentinelæ¶æ„</strong></p>
<p>1ã€3ä¸ªå“¨å…µï¼šè‡ªåŠ¨ç›‘æ§å’Œç»´æŠ¤é›†ç¾¤ï¼Œä¸å­˜æ”¾æ•°æ®ï¼Œåªæ˜¯å¹å“¨äºº</p>
<p>2ã€1ä¸»2ä»ï¼šç”¨äºæ•°æ®è¯»å–å’Œå­˜æ”¾</p>
<p>6å°æœºå™¨ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251129082634420.png" alt="image-20251129082634420"></p>
<p><strong>å®æˆ˜æ­¥éª¤</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">/myredisç›®å½•ä¸‹æ–°å»ºæˆ–è€…æ‹·è´sentinel.confæ–‡ä»¶ï¼Œåå­—ç»ä¸èƒ½é”™</span><br><span class="line">å…ˆçœ‹çœ‹/optç›®å½•ä¸‹é»˜è®¤çš„sentinel.confæ–‡ä»¶çš„å†…å®¹</span><br><span class="line">é‡ç‚¹å‚æ•°</span><br><span class="line">	bind            æœåŠ¡ç›‘å¬åœ°å€ï¼Œç”¨äºå®¢æˆ·ç«¯è¿æ¥ï¼Œé»˜è®¤æœ¬æœºåœ°å€</span><br><span class="line">	daemonize       æ˜¯å¦ä»¥åå°daemonæ–¹å¼è¿è¡Œ</span><br><span class="line">	protected-mode  å®‰å…¨ä¿æŠ¤æ¨¡å¼</span><br><span class="line">	port	        ç«¯å£  é»˜è®¤ç«¯å£26379</span><br><span class="line">	logfile         æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br><span class="line">	pidfile         pidæ–‡ä»¶è·¯å¾„     ç”¨äºå­˜å‚¨è¿›ç¨‹ IDï¼ˆPIDï¼‰çš„æ–‡æœ¬æ–‡ä»¶</span><br><span class="line">	dir             å·¥ä½œç›®å½•</span><br><span class="line">	sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorumæŠ•ç¥¨æ•°&gt;</span><br><span class="line">	è®¾ç½®è¦ç›‘æ§çš„ä¸»æœºï¼Œquorumï¼šç¡®è®¤å®¢è§‚ä¸‹çº¿çš„æœ€å°‘çš„å“¨å…µæ•°é‡ï¼Œåœ¨æ¡ˆä¾‹ä¸­3ç¥¨2ç¥¨è§‰å¾—æŒ‚æœºäº†æ‰ä¸‹çº¿ä»¥åŠæ•…éšœè½¬ç§»ã€‚</span><br><span class="line">	sentinel auth-pass &lt;master-name&gt; &lt;password&gt;  </span><br><span class="line">	masterè®¾ç½®äº†å¯†ç ï¼Œè¿æ¥masteræœåŠ¡çš„å¯†ç </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">sentinelæ–‡ä»¶é€šç”¨é…ç½®</span><br><span class="line">	bind 0.0.0.0</span><br><span class="line">	daemonize yes</span><br><span class="line">	protected-mode no</span><br><span class="line">	port 26379</span><br><span class="line">	logfile &quot;/myredis/sentinel26379.log&quot;</span><br><span class="line">	pidfile /var/run/redis-sentinel26379.pid</span><br><span class="line">	dir /myredis</span><br><span class="line">	sentinel monitor mymaster 192.168.111.169 6379 2</span><br><span class="line">	sentinel auth-pass mymasster 111111</span><br><span class="line">	</span><br><span class="line">å…ˆå¯åŠ¨ä¸€ä¸»äºŒä»3ä¸ªrediså®ä¾‹ï¼Œæµ‹è¯•æ­£å¸¸çš„ä¸»ä»å¤åˆ¶</span><br><span class="line">==============ä¸‹é¢æ˜¯å“¨å…µéƒ¨åˆ†===============</span><br><span class="line">åœ¨å¯åŠ¨3ä¸ªå“¨å…µï¼Œå®Œæˆç›‘æ§</span><br><span class="line">	å¯åŠ¨å“¨å…µ redis-sentinel sentinel26379.conf --sentinelè¿˜æœ‰å…¶ä»–ä¸¤ä¸ªéƒ½å¯åŠ¨</span><br><span class="line">å¯åŠ¨3ä¸ªå“¨å…µç›‘æ§åå†æµ‹ä¸»ä»å¤åˆ¶</span><br><span class="line">åŸæœ‰çš„masteræŒ‚äº†</span><br><span class="line">	è¿™æ—¶å€™æ·»åŠ å“¨å…µåï¼Œä¸¤å°ä»æœºæ•°æ®éƒ½èƒ½è¯»åˆ°ï¼Œä¹‹å‰æ˜¯ä¸è¡Œçš„</span><br><span class="line">		è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜å°±æ˜¯å½“ä¸»æœºæŒ‚äº†ä¹‹åä¸ä¹…è·å–æ•°æ®çš„æ—¶å€™ä¼šå‡ºç°Broken Pipeé—®é¢˜æˆ–è€…å‡ºç°ServerClosedé—®é¢˜</span><br><span class="line">		</span><br><span class="line">	é‚£ä¹ˆè¿™æ—¶å€™æ˜¯80å½“masterè¿˜æ˜¯81 ?å½“ä¸»æœºæŒ‚äº†ï¼Œå“¨å…µä¼šæŠ•ç¥¨é€‰ä¸¾ã€‚</span><br><span class="line">	é¦–å…ˆæ˜¯ä¸»è§‚ä¸‹çº¿ã€‚å•ä¸ªsentinelè®¤ä¸ºèŠ‚ç‚¹å´©æºƒäº†ï¼Œç„¶åæŠ•ç¥¨å®¢è§‚è®¤ä¸ºä¸‹çº¿äº†ã€ç„¶åæ•…éšœè¿ç§»ï¼Œé¦–å…ˆé€‰ä¸¾ä¸€ä¸ªLeader sentinelæ¥æ‰§è¡Œæ•…éšœè¿ç§»ï¼Œä»slavesé€‰ä¸€ä¸ªæå‡ä¸ºæ–°masterï¼Œé€šçŸ¥å…¶ä»–slaveså¤åˆ¶æ–°masterï¼Œæ›´æ–°é…ç½®é€šçŸ¥å®¢æˆ·ç«¯ã€‚</span><br><span class="line">	å¦‚æœåŸmasteræ¢å¤äº†ï¼Œé‚£å°±è‡ªåŠ¨å˜æˆslaveã€‚æ‰€ä»¥ä¸ä¼šæœ‰åŒmasterå†²çª</span><br><span class="line"></span><br><span class="line">	ååº6379å¯èƒ½å˜æˆä»æœºï¼Œé‚£ä¹ˆè¿™æ—¶å€™éœ€è¦è®¾ç½®è®¿é—®æ–°ä¸»æœºçš„å¯†ç masterauth</span><br><span class="line">å¯¹æ¯”é…ç½®æ–‡ä»¶</span><br><span class="line">	æ–‡ä»¶çš„å†…å®¹åœ¨è¿è¡ŒæœŸé—´ä¼šè¢«sentinelè¿›è¡ŒåŠ¨æ€ä¿®æ”¹</span><br><span class="line">	ä¸»ä»åˆ‡æ¢åï¼Œä¸»ä»ç›‘è§†ä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„å†…å®¹éƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>ä¸€äº›å…¶ä»–çš„å‚æ•°</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251129084916925.png" alt="image-20251129084916925"></p>
<p><strong>å“¨å…µè¿è¡Œæµç¨‹å’Œé€‰ä¸¾åŸç†</strong></p>
<p>å½“ä¸€ä¸ªä¸»ä»é…ç½®ä¸­çš„masterå¤±æ•ˆä¹‹åï¼Œsentinelå¯ä»¥é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„masterç”¨äºè‡ªåŠ¨ä»£æ›¿åŸæ¥masterçš„å·¥ä½œï¼Œä¸»ä»é…ç½®ä¸­çš„å…¶ä»–redisæœåŠ¡å™¨è‡ªåŠ¨æŒ‡å‘æ–°çš„masteråŒæ­¥æ•°æ®ã€‚ä¸€èˆ¬å»ºè®®sentinelé‡‡å–å¥‡æ•°å°ï¼Œé˜²æ­¢æŸä¸€å°sentinelæ— æ³•è¿æ¥åˆ°masterå¯¼è‡´è¯¯åˆ‡æ¢ã€‚</p>
<p><strong>è¯¦ç»†</strong></p>
<p>1ã€ä¸‰ä¸ªå“¨å…µç›‘æ§ä¸€ä¸»äºŒä»ï¼Œæ­£å¸¸è¿è¡Œä¸­</p>
<p>2ã€SDOWN ä¸»è§‚ä¸‹çº¿ã€‚å•ä¸ªsentinelè‡ªå·±ä¸»è§‚ä¸Šæ£€æµ‹åˆ°çš„å…³äºmasterçš„çŠ¶æ€ï¼Œä»sentinelè§’åº¦æ¥çœ‹å¦‚æœå‘é€äº†PINGå¿ƒè·³åï¼Œåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°åˆæ³•çš„å›å¤ï¼Œå°±è¾¾åˆ°äº†SDOWNçš„æ¡ä»¶</p>
<p>sentinelé…ç½®æ–‡ä»¶ä¸­çš„<code>down-after-millisecondsè®¾ç½®äº†åˆ¤æ–­ä¸»è§‚ä¸‹çº¿çš„æ—¶é—´é•¿åº¦</code></p>
<p>3ã€ODOWN å®¢è§‚ä¸‹çº¿ã€‚ODOWNéœ€è¦ä¸€å®šæ•°é‡çš„sentinelï¼Œå¤šä¸ªå“¨å…µè¾¾æˆä¸€è‡´æ„è§æ‰èƒ½è®¤ä¸ºä¸€ä¸ªmasterå®¢è§‚ä¸Šå·²ç»å®•æ‰ã€‚</p>
<p>é»˜è®¤30ç§’</p>
<p>4ã€é€‰ä¸€ä¸ªé¢†å¯¼è€…å“¨å…µï¼Œç„¶åç”±è¯¥å“¨å…µæ¥è¿›è¡Œæ•…éšœè¿ç§»ï¼ˆswitch master æ·»åŠ slaveï¼‰</p>
<p>é€‰ä¸¾æ˜¯é€šè¿‡Raftç®—æ³•ï¼šç›‘è§†è¯¥ä¸»èŠ‚ç‚¹çš„æ‰€æœ‰å“¨å…µéƒ½æœ‰å¯èƒ½è¢«é€‰ä¸ºé¢†å¯¼è€…ï¼Œé€‰ä¸¾ä½¿ç”¨çš„ç®—æ³•æ˜¯Raftç®—æ³•ï¼Œè¿™ä¸ªç®—æ³•çš„åŸºæœ¬æ€è·¯æ˜¯ <strong>å…ˆåˆ°å…ˆå¾—</strong> å³åœ¨ä¸€è½®é€‰ä¸¾ä¸­ï¼Œå“¨å…µAå‘Bå‘é€æˆä¸ºé¢†å¯¼è€…çš„ç”³è¯·ï¼Œå¦‚æœBæ²¡æœ‰åŒæ„è¿‡å…¶ä»–å“¨å…µå°±ä¼šåŒæ„Aæˆä¸ºé¢†å¯¼è€…</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251130175258863.png" alt="image-20251130175258863"></p>
<p>5ã€ç”±é¢†å¯¼è€…æ¥æ¨åŠ¨åˆ‡æ¢æµç¨‹ï¼Œå¹¶é€‰å‡ºä¸€ä¸ªæ–°master</p>
<p>â€‹    é¦–å…ˆæ–°master</p>
<p>â€‹        æŸä¸ªSlaveè¢«é€‰ä¸­æˆä¸ºMasterï¼Œé€‰å‡ºæ–°Masterçš„è§„åˆ™ï¼Œå…ˆçœ‹ä¼˜å…ˆçº§æ•°å­—è¶Šå°è¶Šé«˜ï¼Œè°é«˜è°å½“masterï¼Œå†çœ‹å¤åˆ¶åç§»é‡ï¼ˆè°å¤åˆ¶çš„å¤šï¼‰ï¼Œè°å¤§è°å½“ï¼Œæœ€åçœ‹run id ï¼Œè°æœ€å°è°å½“<strong>Run ID æ˜¯ Redis å®ä¾‹å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦</strong></p>
<p>â€‹    ç„¶åslaveåˆ‡æ¢master</p>
<p>â€‹        è¢«é€‰ä¸­çš„ slave ä¼šæ‰§è¡Œslaveof no one ï¼Œç„¶åé€šè¿‡slaveofå‘½ä»¤è®©å…¶ä»–ä»èŠ‚ç‚¹å˜æˆä»–çš„ä»èŠ‚ç‚¹ã€‚Sentinel leader ä¼šå¯¹é€‰ä¸¾å‡ºçš„æ–°masteræ‰§è¡Œslaveof no oneæ“ä½œï¼Œå°†å…¶æå‡ä¸ºmasterèŠ‚ç‚¹ï¼Œç„¶åå‘å…¶ä»–slaveå‘é€å‘½ä»¤ï¼Œè®©å‰©ä½™çš„slaveæˆä¸ºæ–°çš„masterèŠ‚ç‚¹çš„slave</p>
<p>â€‹    æœ€åæ—§masterè®¤æ–°master</p>
<p>â€‹        ä¹‹å‰å·²ç»ä¸‹çº¿çš„è€masterè®¾ç½®ä¸ºæ–°é€‰å‡ºçš„æ–°masterçš„ä»èŠ‚ç‚¹ï¼Œå½“è€masteré‡æ–°ä¸Šçº¿åï¼Œä»–ä¼šæˆä¸ºæ–°Masterçš„slaveã€‚Sentinel leader ä¼šè®©åŸæ¥çš„masteré™çº§ä¸ºslaveå¹¶å›å¤æ­£å¸¸å·¥ä½œ</p>
<p><strong>redisé…ç½®æ³¨æ„äº‹é¡¹</strong></p>
<p>â€‹    å“¨å…µèŠ‚ç‚¹çš„æ•°é‡åº”ä¸ºå¤šä¸ªï¼Œå“¨å…µæœ¬èº«åº”è¯¥é›†ç¾¤ï¼Œä¿è¯é«˜å¯ç”¨ã€‚</p>
<p>â€‹    å“¨å…µèŠ‚ç‚¹çš„æ•°é‡åº”ä¸ºå¥‡æ•°ã€‚</p>
<p>â€‹    å„ä¸ªå“¨å…µçš„é…ç½®åº”è¯¥ä¸€è‡´</p>
<p>â€‹    å¦‚æœå“¨å…µå¸ƒç½®åœ¨Dockerå®¹å™¨é‡Œé¢ï¼Œè¦æ³¨æ„ç«¯å£çš„æ­£ç¡®æ˜ å°„</p>
<p>â€‹    å“¨å…µé›†ç¾¤ + ä¸»ä»å¤åˆ¶ï¼Œå¹¶ä¸èƒ½ä¿è¯æ•°æ®é›¶ä¸¢å¤±</p>
<p>é‚£ä¹ˆç”±äºä¸èƒ½ä¿è¯æ•°æ®é›¶ä¸¢å¤±ï¼Œé‚£ä¹ˆå°±å¼•å‡ºä¸‹é¢çš„é›†ç¾¤äº†</p>
<h2 id="é›†ç¾¤ï¼ˆClusterï¼‰"><a href="#é›†ç¾¤ï¼ˆClusterï¼‰" class="headerlink" title="é›†ç¾¤ï¼ˆClusterï¼‰"></a>é›†ç¾¤ï¼ˆClusterï¼‰</h2><p>å…ˆå›é¡¾å“¨å…µ + ä¸»ä»</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251130223726144.png" alt="image-20251130223726144"></p>
<p>è¿™é‡Œæœ‰ä¸ªBugå°±æ˜¯å½“ä¸»æœºæŒ‚äº†é‡æ–°é€‰ä¸¾çš„æ—¶å€™ï¼Œå†™æ“ä½œè¢«ä¸­æ–­ï¼Œä¸€ç¬é—´å†™æ“ä½œæ•°æ®æµå¤±ã€æ‰€ä»¥å•ç‚¹é«˜å¹¶å‘åªæœ‰ä¸€å°ä¸»æœºï¼Œæ‰€ä»¥å•ä¸ªMasteréš¾ä»¥æ‰¿æ‹…ï¼Œå› æ­¤éœ€è¦å¤šä¸ªå¤åˆ¶é›†è¿›è¡Œé›†ç¾¤ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251130231500637.png" alt="image-20251130231500637"></p>
<p>ç°åœ¨å°±å˜æˆé›†ç¾¤äº†ã€‚Redisé›†ç¾¤æ˜¯å…±äº«æ•°æ®çš„ï¼ŒM1æœ‰æ•°æ®ï¼ŒM2ï¼ŒM3ä¹Ÿä¼šæœ‰ï¼Œå†™çš„æ—¶å€™å…¨å±€æ•°æ®å…±äº«å½¢æˆç¨‹åºé›†ã€‚</p>
<p><strong>èƒ½å¹²å˜›</strong></p>
<p>1ã€Redisé›†ç¾¤æ”¯æŒå¤šä¸ªMasterï¼Œæ¯ä¸ªMasteråˆå¯ä»¥æŒ‚è½½å¤šä¸ªSlave</p>
<p>2ã€ç”±äºé›†ç¾¤è‡ªå¸¦Sentinelçš„æ•…éšœè½¬ç§»æœºåˆ¶ï¼Œå†…ç½®äº†é«˜å¯ç”¨æ”¯æŒï¼Œæ‰€ä»¥ <strong>æ— éœ€å†å»ä½¿ç”¨å“¨å…µåŠŸèƒ½</strong></p>
<p>3ã€å®¢æˆ·ç«¯ä¸Redisçš„èŠ‚ç‚¹è¿æ¥ï¼Œä¸å†éœ€è¦è¿æ¥é›†ç¾¤ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œåªéœ€è¦ä»»æ„è¿æ¥é›†ç¾¤ä¸­çš„ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹å³å¯ã€‚</p>
<p>4ã€ <strong>æ§½ä½Slot</strong> è´Ÿè´£åˆ†é…åˆ°å„ä¸ªç‰©ç†æœåŠ¡èŠ‚ç‚¹ï¼Œç”±å¯¹åº”çš„é›†ç¾¤æ¥è´Ÿè´£ç»´æŠ¤èŠ‚ç‚¹ã€æ’æ§½å’Œæ•°æ®ä¹‹é—´çš„å…³ç³»</p>
<h3 id="é›†ç¾¤ç®—æ³•-åˆ†ç‰‡-æ§½ä½slot"><a href="#é›†ç¾¤ç®—æ³•-åˆ†ç‰‡-æ§½ä½slot" class="headerlink" title="é›†ç¾¤ç®—æ³•-åˆ†ç‰‡-æ§½ä½slot"></a><strong>é›†ç¾¤ç®—æ³•-åˆ†ç‰‡-æ§½ä½slot</strong></h3><h4 id="redisé›†ç¾¤çš„æ§½ä½slot"><a href="#redisé›†ç¾¤çš„æ§½ä½slot" class="headerlink" title="redisé›†ç¾¤çš„æ§½ä½slot"></a><strong>redisé›†ç¾¤çš„æ§½ä½slot</strong></h4><p>â€‹    Redis é›†ç¾¤æ²¡æœ‰ä½¿ç”¨ä¸€è‡´æ€§hashï¼Œè€Œæ˜¯ç”¨hashæ§½çš„æ¦‚å¿µï¼Œ<strong>æ§½ä½æœ€å¤š16384ï¼Œé›†ç¾¤è¦1000ä¸ªä»¥å†…ã€‚</strong></p>
<p>é‚£ä¹ˆè¿›è¡Œå†™æ“ä½œçš„æ—¶å€™ï¼Œä¼šå¯¹æ¯ä¸ªkeyé€šè¿‡CRC16æ ¡éªŒåå¯¹16384å–æ¨¡æ¥å†³å®šæ”¾ç½®å“ªä¸ªæ§½ï¼Œé›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†hashæ§½ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šæ¯”å¦‚å½“å‰é›†ç¾¤æœ‰ä¸‰ä¸ªèŠ‚ç‚¹é‚£ä¹ˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201014649059.png" alt="image-20251201014649059"></p>
<p><strong>åˆ†ç‰‡</strong></p>
<p>ä½¿ç”¨Redisé›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†å­˜å‚¨çš„æ•°æ®åˆ†æ•£åˆ°å¤šæ€redisæœºå™¨ä¸Šï¼Œè¿™æˆä¸ºåˆ†ç‰‡ã€‚ç®€è¨€ä¹‹ï¼Œæ€¥ç¾¤ä¼—çš„æ¯ä¸ªRediså®ä¾‹ï¼Œéƒ½è¢«è®¤ä¸ºæ˜¯æ•´ä¸ªæ•°æ®çš„ä¸€ä¸ªåˆ†ç‰‡ã€‚</p>
<p><strong>å¦‚ä½•æ‰¾åˆ°ç»™å®škeyçš„åˆ†ç‰‡</strong>ï¼šå°±æ˜¯ä½ å†™äº†ä¹‹åæ€ä¹ˆæ‰¾åˆ°å†™åˆ°å“ªã€‚ä¸ºäº†æ‰¾åˆ°ï¼Œæˆ‘ä»¬ä¼šå¯¹keyè¿›è¡ŒCRC16ç®—æ³•å¤„ç†å¹¶é€šè¿‡å¯¹æ€»åˆ†ç‰‡æ•°é‡å–æ¨¡ï¼Œç„¶åï¼Œ<strong>ä½¿ç”¨ç¡®å®šæ€§å“ˆå¸Œå‡½æ•°</strong>ï¼Œè¿™æ„å‘³ç€ç»™å®šçš„key <strong>å°†å¤šæ¬¡å§‹ç»ˆæ˜ å°„åˆ°åŒä¸€åˆ†ç‰‡</strong> æˆ‘ä»¬å¯ä»¥æ¨æ–­å°†æ¥è¯»å–ç‰¹å®škeyçš„ä½ç½®ã€‚</p>
<p><strong>é‚£è¿™ä¸¤ä¸ªæ¦‚å¿µçš„å¼•å…¥æœ‰ä»€ä¹ˆä¼˜åŠ¿</strong></p>
<p>1ã€æ–¹ä¾¿æ‰¾</p>
<p>2ã€æ–¹ä¾¿æ‰©å®¹å’Œç¼©å®¹ï¼šåœ¨å¢åŠ masteræˆ–è€…å‡å°‘masterçš„è¿‡ç¨‹ä¸­åªæ˜¯è¿äº†ä¸€éƒ¨åˆ†æ§½ç»™æ–°å¢çš„æˆ–è€…å‡å°‘çš„masterè€Œå·²ï¼Œå¹¶ä¸ä¼šåœæœºï¼Œè¿™å°±æ˜¯é«˜å¯ç”¨</p>
<p><strong>slotæ§½ä½çš„æ˜ å°„</strong></p>
<p>1ã€å“ˆå¸Œå–ä½™åˆ†åŒº ï¼ˆå°å‚ï¼‰ï¼šç›´æ¥<code>hash(key) % Nä¸ªæœºå™¨æ•°</code>ï¼Œç®€å•ç²—æš´ï¼Œç›´æ¥æœ‰æ•ˆã€‚ä½†æ˜¯åŸæ¥è§„åˆ’å¥½çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œæ‰©å®¹æˆ–è€…ç¼©å®¹å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œå› ä¸ºåˆ†æ¯å†™æ­»äº†ï¼Œæ˜ å°„å…³ç³»éœ€è¦é‡æ–°è®¡ç®—ï¼Œæ­¤æ—¶å–ä½™è®¡ç®—çš„ç»“æœå‘ç”Ÿå¾ˆå¤§å˜åŒ–ï¼Œå…¨éƒ¨æ•°æ®éå¸¸æ··ä¹±ï¼Œé‡æ–°æ´—ç‰Œå˜æ›´ã€‚</p>
<p>2ã€ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•åˆ†åŒº ï¼ˆä¸­å‚ï¼‰</p>
<p>â€‹    ä¸ºäº†è§£å†³åˆ†æ¯æ•°é‡å˜åŠ¨å–ä½™ä¸è¡Œçš„é—®é¢˜ã€‚å½“æœåŠ¡å™¨ä¸ªæ•°å˜åŠ¨æ—¶ï¼Œå°½é‡å‡å°‘æ˜ å°„çš„å½±å“ã€‚</p>
<p>â€‹    1ã€ç®—æ³•æ„å»ºä¸€è‡´æ€§å“ˆå¸Œç¯</p>
<p>â€‹    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201020858141.png" alt="image-20251201020858141"></p>
<p>ç°åœ¨æœ‰ä¸ªhashå‡½æ•°å¹¶æŒ‰ç…§ç®—æ³•äº§ç”Ÿhashå€¼ï¼Œè¿™ä¸ªç®—æ³•çš„æ‰€æœ‰å¯èƒ½å“ˆå¸Œå€¼ä¼šæ„æˆä¸€ä¸ªå…¨é‡é›†åˆï¼Œè¿™ä¸ªé›†åˆå¯ä»¥æˆä¸ºä¸€ä¸ªhashç©ºé—´ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¿æ€§ç©ºé—´ï¼Œä½†æ˜¯åœ¨ç®—æ³•ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡é€‚å½“çš„é€»è¾‘æ§åˆ¶å°†ä»–é¦–å°¾ç›¸è¿ï¼Œè¿™æ ·è®©ä»–åœ¨é€»è¾‘ä¸Šå½¢æˆäº†ä¸€ä¸ªç¯å½¢ç©ºé—´ã€‚</p>
<p>ä»–ä¹Ÿæ˜¯æŒ‰ç…§å–æ¨¡çš„æ–¹æ³•ã€‚<strong>å‰é¢æ˜¯å¯¹æœåŠ¡å™¨æ•°é‡å–æ¨¡ï¼Œè€Œä¸€è‡´æ€§hashç®—æ³•æ˜¯å¯¹2çš„32æ¬¡æ–¹å–æ¨¡</strong>ï¼Œæ•´ä¸ªç©ºé—´ <strong>æŒ‰é¡ºæ—¶é’ˆæ–¹å‘ç»„ç»‡</strong></p>
<p>â€‹    2ã€æœåŠ¡å™¨IPèŠ‚ç‚¹æ˜ å°„</p>
<p>å°†é›†ç¾¤ä¸­å„ä¸ªIPèŠ‚ç‚¹æ˜ å°„åˆ°ç¯ä¸Šçš„æŸä¸€ä½ç½®ã€‚å…·ä½“å¯ä»¥ç”¨IPæˆ–è€…ä¸»æœºåä½œä¸ºå…³é”®å­—è¿›è¡Œå“ˆå¸Œ</p>
<p>â€‹    3ã€keyè½åˆ°æœåŠ¡å™¨çš„è½é”®è§„åˆ™</p>
<p>å½“æˆ‘ä»¬éœ€è¦å­˜å‚¨ä¸€ä¸ªkvé”®å€¼å¯¹æ—¶ï¼Œé¦–å…ˆè®¡ç®—Keyçš„hashå€¼ï¼Œhash(key) ï¼Œå°†è¿™ä¸ªkeyä½¿ç”¨ç›¸åŒçš„å‡½æ•°hashè®¡ç®—å¤„å“ˆå¸Œå€¼å¹¶ç¡®å®šæ­¤æ•°æ®åœ¨ç¯ä¸Šçš„ä½ç½®ã€‚ <strong>ä»æ­¤ä½ç½®æ²¿ç¯é¡ºæ—¶é’ˆè¡Œèµ°</strong>ï¼Œç¬¬ä¸€å°é‡åˆ°æœåŠ¡å™¨å°±æ˜¯å…¶åº”è¯¥å®šä½åˆ°çš„æœåŠ¡å™¨ï¼Œå¹¶å°†è¯¥é”®å€¼å¯¹å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¸Šã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201022033786.png" alt="image-20251201022033786"></p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å®¹é”™æ€§ï¼æ‰©å±•æ€§ï¼</p>
<p><strong>å®¹é”™æ€§</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201022414716.png" alt="image-20251201022414716"></p>
<p>è¿™é‡ŒCæœåŠ¡å™¨æŒ‚äº†ï¼ŒCèŠ‚ç‚¹ç»§ç»­å¾€å‰èµ°åˆ°äº†Dã€‚è¿™æ—¶å€™A\B\Dæ˜¯ä¸å—å½±å“çš„ï¼Œå¦‚æœä¸€å°æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œ<strong>å—å½±å“çš„æ•°æ®ä»…ä»…æ˜¯æ­¤æœåŠ¡å™¨åˆ°å…¶æ¢ç©ºé—´ä¸­å‰ä¸€å°æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯é€†æ—¶é’ˆèµ°é‡åˆ°ç¬¬ä¸€å°æœåŠ¡å™¨ï¼‰</strong>ï¼Œå…¶ä»–çš„ä¸ä¼šå—åˆ°å½±å“ã€‚ç®€å•è¯´å°±æ˜¯CæŒ‚äº†ï¼Œæ”¶åˆ°å½±å“çš„åªæ˜¯B\Cä¹‹é—´çš„æ•°æ®ï¼Œ<strong>ä¸”è¿™äº›æ•°æ®ä¼šè½¬ç§»åˆ°Dè¿›è¡Œå­˜å‚¨</strong></p>
<p><strong>æ‰©å±•æ€§</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201022755334.png" alt="image-20251201022755334"></p>
<p>æ•°æ®é‡å¢åŠ ï¼Œå¢åŠ ä¸€å°èŠ‚ç‚¹NodeX,Xä½ç½®åœ¨ABä¹‹é—´ï¼Œé‚£å—åˆ°å½±å“çš„ä¹Ÿå°±æ˜¯Aåˆ°Xä¹‹é—´çš„æ•°æ®ï¼Œé‡æ–°å§Aåˆ°Xçš„æ•°æ®å½•å…¥åˆ°Xä¸Šå³å¯ï¼Œä¸ä¼šå¯¼è‡´hashå–ä½™å…¨éƒ¨æ•°æ®é‡æ–°æ´—ç‰Œã€‚</p>
<p><strong>ç¼ºç‚¹ï¼šä¸€è‡´æ€§hashç®—æ³•çš„æ•°æ®å€¾æ–œé—®é¢˜</strong></p>
<p>å½“æœåŠ¡èŠ‚ç‚¹å¤ªå°‘çš„æ—¶å€™ï¼Œå®¹æ˜“å› ä¸ºèŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€è€Œé€ æˆçš„æ•°æ®å€¾æ–œé—®é¢˜ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201023011700.png" alt="image-20251201023011700"></p>
<p>3ã€<strong>å“ˆå¸Œæ§½åˆ†åŒº</strong> ï¼ˆå¤§å‚ï¼‰</p>
<p>æ˜¯ä»€ä¹ˆï¼ŸCRC16(KEY) mod 16384 = HASH_SLOT</p>
<p>ä¸ºäº†è§£å†³æ•°æ®å€¾æ–œé—®é¢˜ã€‚å“ˆå¸Œæ§½å…¶å®æ˜¯2çš„16æ¬¡æ–¹ä¹Ÿå°±æ˜¯16384çš„æ•°ç»„</p>
<p>èƒ½å¹²ä»€ä¹ˆï¼Ÿ</p>
<p>è§£å†³å‡åŒ€åˆ†é…é—®é¢˜ï¼Œä»–åœ¨æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´åˆåŠ å…¥äº†ä¸€å±‚ï¼Œè¿™å±‚æˆä¸ºhashæ§½ï¼Œç”¨äºç®¡ç†æ•°æ®å’ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚ç°åœ¨å°±ç›¸å½“äºèŠ‚ç‚¹ä¸Šæ”¾çš„æ˜¯æ§½ï¼Œæ§½é‡Œæ”¾çš„æ˜¯æ•°æ®ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251201023759548.png" alt="image-20251201023759548"></p>
<p>æ§½è§£å†³çš„æ˜¯ç²’åº¦é—®é¢˜ï¼Œç›¸å½“äºæŠŠç²’åº¦å˜å¤§äº†ï¼Œè¿™æ ·ä¾¿äºæ•°æ®ç§»åŠ¨ï¼Œå“ˆå¸Œè§£å†³çš„çš„æ˜¯æ˜ å°„é—®é¢˜ï¼Œä½¿ç”¨Keyçš„å“ˆå¸Œå€¼æ¥è®¡ç®—æ‰€åœ¨çš„æ§½ï¼Œä¾¿äºæ•°æ®åˆ†é…</p>
<p>å¤šå°‘hashæ§½ï¼Ÿ</p>
<p>ä¸€ä¸ªé›†ç¾¤åªèƒ½æœ‰16384ä¸ªæ§½ï¼Œç¼–å·ä»0 å¼€å§‹ï¼Œè¿™äº›æ§½ä¼šåˆ†é…ç»™é›†ç¾¤ä¸­çš„æ‰€æœ‰ä¸»èŠ‚ç‚¹ï¼Œåˆ†é…ç­–ç•¥æ²¡æœ‰è¦æ±‚ã€‚</p>
<p>é›†ç¾¤ä¼šè®°å½•èŠ‚ç‚¹å’Œæ§½çš„å¯¹åº”å…³ç³»ï¼Œè§£å†³äº†èŠ‚ç‚¹å’Œæ§½çš„å…³ç³»åï¼Œæ¥ä¸‹æ¥å°±éœ€è¦å¯¹keyæ±‚å“ˆå¸Œå€¼ï¼Œç„¶åå¯¹16384å–æ¨¡ï¼Œç„¶åå¯¹16384å–æ¨¡ï¼Œä½™æ•°æ˜¯å‡ ï¼Œkeyå°±è½å…¥å¯¹åº”çš„æ§½é‡Œã€‚HASH_SLOT = CRC16ï¼ˆkeyï¼‰ mod 16384ã€‚ä»¥æ§½ä¸ºå•ä½ç§»åŠ¨æ•°æ®ï¼Œå› ä¸ºæ§½çš„æ•°ç›®æ˜¯å›ºå®šçš„ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œè¿™æ ·ç§»åŠ¨é—®é¢˜å°±è§£å†³äº†ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆredisé›†ç¾¤çš„æœ€å¤§æ§½æ•°æ˜¯16384ä¸ª</strong></p>
<p>1ã€å¦‚æœæ§½ä½æ˜¯65536ï¼Œå‘é€å¿ƒè·³æ¶ˆæ¯çš„æ¶ˆæ¯å¤´è¾¾8Kï¼Œå‘é€çš„å¿ƒè·³åŒ…è¿‡äºåºå¤§ã€‚</p>
<p>å› ä¸ºæ¯ç§’é’Ÿï¼ŒredisèŠ‚ç‚¹éœ€è¦å‘é€ä¸€å®šæ•°é‡çš„pingæ¶ˆæ¯ä½œä¸ºå¿ƒè·³åŒ…ï¼Œå¦‚æœæ§½ä½æ˜¯65536ï¼Œè¿™ä¸ªpingæ¶ˆæ¯çš„æ¶ˆæ¯å¤´å¤ªå¤§äº†ï¼Œæµªè´¹å¸¦å®½ã€‚è¿™ä¸ªpingæ¶ˆæ¯æ˜¯ä»¥bitmapä¹Ÿå°±æ˜¯01çš„mapå½¢å¼ä¼ é€’</p>
<ul>
<li>å¦‚æœæœ‰ <strong>65536 ä¸ªæ§½</strong>ï¼Œé‚£ä¹ˆä½å›¾é•¿åº¦ä¸ºï¼š<br>65536Ã·8=8192 å­—èŠ‚=8 KB</li>
<li>è€Œ <strong>16384 ä¸ªæ§½</strong> å¯¹åº”çš„ä½å›¾é•¿åº¦ä¸ºï¼š<br>16384Ã·8=2048 å­—èŠ‚=2 KB</li>
</ul>
<p>2ã€redisçš„é›†ç¾¤ä¸»èŠ‚ç‚¹æ•°é‡åŸºæœ¬ä¸ä¼šè¶…è¿‡1000ä¸ª</p>
<p>é›†ç¾¤èŠ‚ç‚¹è¶Šå¤šï¼Œå¿ƒè·³åŒ…çš„æ¶ˆæ¯ä½“å†…æºå¸¦çš„æ•°æ®è¶Šå¤šã€‚å¦‚æœèŠ‚ç‚¹è¶…è¿‡1000ä¸ªï¼Œä¹Ÿä¼šå¯¼è‡´ç½‘ç»œæ‹¥å µã€‚å› æ­¤redisä½œè€…ä¸å»ºè®®redis clusterèŠ‚ç‚¹æ•°é‡è¶…è¿‡1000ä¸ªã€‚é‚£ä¹ˆï¼Œå¯¹äºèŠ‚ç‚¹æ•°åœ¨1000ä»¥å†…çš„redis clusteré›†ç¾¤ï¼Œ16384ä¸ªæ§½ä½å¤Ÿç”¨äº†ã€‚æ²¡å¿…è¦æ‰©å±•åˆ°65536ä¸ªã€‚</p>
<p>3ã€æ§½ä½è¶Šå°ï¼ŒèŠ‚ç‚¹å°‘çš„æƒ…å†µä¸‹ï¼Œå‹ç¼©æ¯”é«˜ï¼Œå®¹æ˜“ä¼ è¾“</p>
<p>Redisä¸»èŠ‚ç‚¹çš„é…ç½®ä¿¡æ¯ä¸­ä»–æ‰€è´Ÿè´£çš„å“ˆå¸Œæ§½æ˜¯é€šè¿‡ä¸€å¼ bitmapçš„å½¢å¼æ¥å­˜å‚¨çš„ï¼Œåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¼šå¯¹bitmapè¿›è¡Œå‹ç¼©ï¼Œä½†æ˜¯å¦‚æœBitmapçš„å¡«å……ç‡ slots / N å¾ˆé«˜çš„è¯ï¼Œbitmapçš„å‹ç¼©ç‡å°±å¾ˆä½ã€‚å¦‚æœèŠ‚ç‚¹æ•°å¾ˆå°‘ï¼Œå“ˆå¸Œæ§½æ•°é‡å¾ˆå¤šçš„è¯ï¼Œbitmapçš„å‹ç¼©ç‡å°±å¾ˆä½ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´å°½é‡è®©æ§½ä½å’ŒèŠ‚ç‚¹æ•°æ¥è¿‘æ˜¯æœ€å¤§æ•ˆç‡çš„ï¼Œé‚£ä¹ˆèŠ‚ç‚¹æ•°ç”±äºä¸ä¼šè¶…è¿‡1000é‚£ä¹ˆ16384å°±åˆšå¥½äº†ã€‚</strong></p>
<p><strong>Redisä¸ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œè¿˜æ˜¯ä¼šä¸¢å¤±ä¸€äº›å†™å‘½ä»¤</strong></p>
<h3 id="é›†ç¾¤ç¯å¢ƒæ­å»º"><a href="#é›†ç¾¤ç¯å¢ƒæ­å»º" class="headerlink" title="é›†ç¾¤ç¯å¢ƒæ­å»º"></a>é›†ç¾¤ç¯å¢ƒæ­å»º</h3><p>1ã€3ä¸»3ä»redisé›†ç¾¤é…ç½®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">ip + ç«¯å£ è¿™æ—¶å€™è®©ä¸€ä¸»ä¸€ä»åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œä¹Ÿå°±æ˜¯è¿™æ—¶å€™æ¨¡æ‹Ÿ3å°æœåŠ¡å™¨å½¢æˆçš„é›†ç¾¤ã€‚</span><br><span class="line"></span><br><span class="line">é¦–å…ˆ mkdir -p /myredis/cluster</span><br><span class="line">vim /myredis/cluster/redisCluster6381.conf</span><br><span class="line">vim /myredis/cluster/redisCluster6382.conf</span><br><span class="line"></span><br><span class="line">	bind            0.0.0.0</span><br><span class="line">	daemonize       yes</span><br><span class="line">	protected-mode  no</span><br><span class="line">	port	        6381</span><br><span class="line">	logfile         &quot;/myredis/cluster/cluster6381.log&quot;</span><br><span class="line">	pidfile         /myredis/cluster6381.pid</span><br><span class="line">	dir             /myredis/cluster</span><br><span class="line">	appendonly		yes</span><br><span class="line">	appendfilename  &quot;appendonly6381.aof&quot;</span><br><span class="line">	requirepass		å¯†ç </span><br><span class="line">	masterauth		å¯†ç </span><br><span class="line">	</span><br><span class="line">	cluster-enabled  yes</span><br><span class="line">	cluster-config-file  nodes-6381.conf</span><br><span class="line">	cluster-node-timeout 5000</span><br><span class="line">å…¶ä»–é…ç½®ä¹Ÿç±»ä¼¼</span><br><span class="line"></span><br><span class="line">ç„¶åå¯åŠ¨6å°redisä¸»æœºå®ä¾‹</span><br><span class="line">redis-server /myredis/cluster/redisCluster6381.conf</span><br><span class="line">ã€‚ã€‚ã€‚</span><br><span class="line"></span><br><span class="line">ç„¶åé€šè¿‡redis-cliå‘½ä»¤ä¸º6å°æœºå™¨æ„å»ºé›†ç¾¤å…³ç³»</span><br><span class="line">	æ„å»ºä¸»ä»å…³ç³»å‘½ä»¤</span><br><span class="line">	redis-cli -a å¯†ç  --cluster create --cluster-replicas 1 ip:ç«¯å£ï¼ˆæ•´ä¸ªé›†ç¾¤éƒ½å†™ä¸Šï¼‰</span><br><span class="line">	ç„¶åè¿™æ—¶å€™ä¼šæ˜¾ç¤ºä¸€è¿ä¸²çš„ï¼Œè°æ˜¯ä¸»è°æ˜¯ä»ï¼Œç„¶åå›ç­”yeså°±å¥½äº†</span><br><span class="line"></span><br><span class="line">ç„¶åè¿›å…¥å®¢æˆ·ç«¯</span><br><span class="line">redis-cli -a å¯†ç  -p ç«¯å£</span><br><span class="line">ç„¶åè¿è¡Œ</span><br><span class="line">cluster nodes æŸ¥çœ‹èŠ‚ç‚¹å…³ç³»</span><br><span class="line">info replication æŸ¥çœ‹å½“å‰èŠ‚ç‚¹çš„å…³ç³»</span><br><span class="line">cluster info æŸ¥çœ‹èŠ‚ç‚¹å…³ç³»</span><br></pre></td></tr></table></figure>
<p>2ã€3ä¸»3ä»è¯»å†™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ—¶å€™å†™</span><br><span class="line">set k1 v1 å‡ºé”™äº†</span><br><span class="line">set k2 v2 æˆåŠŸäº†</span><br><span class="line">é‚£ä¹ˆè¿™æ—¶å€™éƒ¨åˆ†æ”¯æŒï¼Œéƒ¨åˆ†ä¸æ”¯æŒï¼Œå› ä¸ºè¿™æ—¶å€™æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸ºæ§½ä½çš„é™åˆ¶ï¼Œéœ€è¦ è·¯ç”±åˆ°ä½</span><br><span class="line">é‚£ä¹ˆä¸ºäº†é˜²æ­¢è·¯ç”±å¤±æ•ˆå¢åŠ å‚æ•° -c</span><br><span class="line">redis-cli -a å¯†ç  -p ç«¯å£ -c</span><br><span class="line">set k1 v1</span><br><span class="line">è¿™æ—¶å€™æˆåŠŸäº†ï¼Œä½†æ˜¯æ˜¯é‡å®šå‘åˆ°å…¶ä»–redisäº†ã€‚</span><br><span class="line">ç„¶åå»å…¶ä»–çš„redis</span><br><span class="line">get k1 é‚£ä¹ˆå°±æ‰¾åˆ°v1äº†</span><br><span class="line"></span><br><span class="line">é€šè¿‡cluster keyslot ï¼ˆkeyï¼‰è¿™æ ·å°±èƒ½çŸ¥é“keyå±äºå“ªä¸ªæ§½ä½</span><br></pre></td></tr></table></figure>
<p>3ã€ä¸»ä»å®¹é”™åˆ‡æ¢è¿ç§»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ä¸»6381å®•æœºï¼Œä»æœºä¼šä¸ä¼šä¸Šä½</span><br><span class="line">ç„¶åæŠŠ6381æ‰‹åŠ¨shutdown</span><br><span class="line">ç„¶åçœ‹å¯¹åº”ä»æœºä»€ä¹ˆæƒ…å†µ</span><br><span class="line">è¿™æ—¶å€™cluster nodes å‘ç°slaveå‡çº§äº†ã€‚è¿™æ—¶å€™ä»æœº ä¼šä¸Šä½</span><br><span class="line">é‚£è¿™æ—¶å€™åŸä¸»æœºæ¢å¤äº†ï¼Œä¼šå¦‚ä½•ï¼Ÿè¿™æ—¶å€™åŸä¸»æœºå°±å˜æˆä»æœºäº†ï¼Œè·Ÿå“¨å…µæ•ˆæœä¸€æ ·</span><br><span class="line"></span><br><span class="line">é›†ç¾¤ä¸ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œä¸€å®šä¼šæœ‰æ•°æ®ä¸¢å¤±çš„æƒ…å†µã€‚ä¼šä¸¢ä½†æ˜¯ä¸å¤šã€‚</span><br><span class="line"></span><br><span class="line">æ‰‹åŠ¨æ•…éšœè½¬ç§» æˆ–è€… èŠ‚ç‚¹ä»å±è°ƒæ•´è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ</span><br><span class="line">è¿™æ—¶å€™ç™»å…¥slaveæœºå™¨ï¼Œç„¶åç”¨å‘½ä»¤</span><br><span class="line">cluster failover</span><br><span class="line">è¿™æ ·å°±æŠŠä»æœºæ¢å¤æˆä¸ºä¸»æœºäº†</span><br></pre></td></tr></table></figure>
<p>4ã€ä¸»ä»æ‰©å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">æ–°å¯åŠ¨ä¸¤ä¸ªrediså®ä¾‹ï¼Œç„¶ååˆ©ç”¨redis-serverå¯åŠ¨ä¸¤ä¸ªå®ä¾‹ï¼Œè¿™æ—¶å€™ä¸¤ä¸ªéƒ½æ˜¯master</span><br><span class="line">ç„¶åå°†å…¶ä¸­ä¸€å°ä½œä¸ºmasteråŠ å…¥åŸæœ‰é›†ç¾¤</span><br><span class="line">redis-cli -a å¯†ç  --cluster add-node è‡ªå·±å®é™…IP:ç«¯å£ é›†ç¾¤é‡Œmasterçš„IP:é›†ç¾¤é‡Œmasterçš„ç«¯å£</span><br><span class="line"></span><br><span class="line">ç„¶åè¿™æ—¶å€™æ–°åŠ å…¥çš„èŠ‚ç‚¹æ²¡æœ‰è¢«åˆ†é…slot</span><br><span class="line">ç„¶åè¿™æ—¶å€™éœ€è¦é‡æ–°åˆ†é…slot</span><br><span class="line">ç„¶åè¿™æ—¶å€™éœ€è¦ç”¨å‘½ä»¤é‡æ–°åˆ†é…æ§½å·</span><br><span class="line">redis-cli -a å¯†ç  --cluster reshard æ–°åŠ å…¥çš„ip:æ–°åŠ å…¥çš„ç«¯å£å·</span><br><span class="line">ç„¶åä¼šé—®ä½ ç§»å¤šå°‘ï¼Œè¦ç”¨16384/4ç„¶åæ¥è®¡ç®—ç§»åŠ¨å¤šå°‘</span><br><span class="line">ç„¶åä¼šé—®æ–°åŠ å…¥çš„masterçš„èŠ‚ç‚¹å·</span><br><span class="line">ç„¶åä¼šé—®ä½ æœ‰ä»€ä¹ˆæ„è§ç„¶å all</span><br><span class="line"></span><br><span class="line">åˆ†é…å¥½åæŸ¥çœ‹åˆ†é…çš„slotå‘ç°</span><br><span class="line">ä»¥å‰æ˜¯è¿ç»­çš„åˆ†åŒºï¼Œç°åœ¨æ˜¯ä¹‹å‰3å®¶å„è‡ªåŒ€å‡ºæ¥ä¸€éƒ¨åˆ†ç©ºçš„ï¼Œç°åœ¨ä¸æ˜¯è¿ç»­çš„åˆ†åŒºäº†</span><br><span class="line"></span><br><span class="line">ç„¶åä¸ºæ–°çš„ä¸»èŠ‚ç‚¹åˆ†é…ä»èŠ‚ç‚¹</span><br><span class="line">redis-cli -a å¯†ç  --cluster add-node æ–°slaveip:æ–°slaveç«¯å£ æ–°masterip:æ–°masterç«¯å£ --cluster-slave --cluster-master-id æ–°ä¸»æœºèŠ‚ç‚¹ID</span><br><span class="line">ç„¶åå°±ä¸»ä»æ‰©å®¹æˆåŠŸäº†</span><br></pre></td></tr></table></figure>
<p>5ã€ä¸»ä»ç¼©å®¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆæ¸…é™¤ä»èŠ‚ç‚¹</span><br><span class="line">ç„¶åè¯·å‡ºæ¥çš„æ§½å·é‡æ–°åˆ†é…ç»™å…¶ä»–master</span><br><span class="line">ç„¶åå†åˆ é™¤è¦åˆ é™¤çš„master</span><br><span class="line">æœ€åæ¢å¤3ä¸»3ä»</span><br><span class="line"></span><br><span class="line">é¦–å…ˆæ£€æŸ¥é›†ç¾¤çš„æƒ…å†µï¼Œè·å¾—è¦åˆ é™¤ä»èŠ‚ç‚¹çš„èŠ‚ç‚¹ID cluster nodes</span><br><span class="line">ç„¶åå°†ä»èŠ‚ç‚¹åˆ é™¤ </span><br><span class="line">redis-cli -a å¯†ç  --cluster del-node ä»æœºip:ä»æœºç«¯å£ ä»æœºèŠ‚ç‚¹ID</span><br><span class="line">ç°åœ¨åˆ é™¤äº†</span><br><span class="line">redis-cli -a å¯†ç  --cluster check å…¶ä»–masterip:å…¶ä»–masterç«¯å£</span><br><span class="line">ç„¶åæ¸…ç©ºè¦åˆ é™¤çš„masterçš„æ§½ä½ï¼Œå…¨éƒ¨ç»™å…¶ä»–master</span><br><span class="line">redis-cli -a å¯†ç  --cluster reshard åˆ†é…ç»™å…¶ä»–masterçš„ip:å…¶ä»–masterçš„ç«¯å£</span><br><span class="line">ç„¶åæ‰¾åˆ°æ¥å—æ§½ä½çš„èŠ‚ç‚¹idå¾…ä¼šå„¿è¦ç”¨ï¼Œç„¶åæ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹idï¼Œç„¶åè¾“å…¥doneå°±åˆ†é…æ§½ä½äº†</span><br><span class="line"></span><br><span class="line">è¿™æ—¶å€™åˆ†é…çš„masteræœ‰ä¸¤å°slaveäº†ï¼Œä¹‹å‰æŠŠslaveåˆ é™¤ï¼Œç„¶åmasterå°±å˜æˆslaveäº†ï¼Œä¹‹å‰æŠŠslaveå…¨åˆ†ç»™æ–°masterï¼Œä¸ç„¶å°±è¦å†™ä¸‰æ¬¡äº†ï¼Œç°åœ¨ä¸€é”…ç«¯</span><br><span class="line"></span><br><span class="line">ç„¶åå°†å˜æˆslaveçš„masteråˆ é™¤</span><br><span class="line">redis-cli -a å¯†ç  --cluster del-node ä»æœºip:ä»æœºç«¯å£ ä»æœºèŠ‚ç‚¹ID</span><br><span class="line">è¿™æ—¶å€™å°±ä¸¤ä¸ªéƒ½åˆ é™¤å¹²å‡€äº†</span><br></pre></td></tr></table></figure>
<p><strong>é›†ç¾¤å¸¸ç”¨æ“ä½œå‘½ä»¤å’ŒCRC16ç®—æ³•åˆ†æ</strong></p>
<p>1ã€ä¸åœ¨åŒä¸€ä¸ªslotæ§½ä½ä¸‹çš„å¤šé”®æ“ä½œæ”¯æŒä¸å¥½ï¼Œé€šè¯†å ä½ç¬¦ç™»åœº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ä¸€ä¸ªredisé‡Œé¢</span><br><span class="line">set k1 v1</span><br><span class="line">set k2 v2</span><br><span class="line">ç„¶å</span><br><span class="line">mget k1 k2 k3</span><br><span class="line">ç„¶åè¿™æ—¶å€™æ˜¯æ‹¿ä¸åˆ°çš„ï¼Œä¸åœ¨åŒä¸€ä¸ªslotæ§½ä½ä¸‹çš„é”®å€¼æ— æ³•ä½¿ç”¨mset\mgetç­‰å¤šé”®æ“ä½œã€‚</span><br><span class="line"># æ­£ç¡®æ–¹å¼ï¼ˆå¯ç”¨é›†ç¾¤æ¨¡å¼ï¼‰</span><br><span class="line">redis-cli -c -p 6381 -a å¯†ç </span><br><span class="line">ä¸€ä¸ªä¸€ä¸ªæ‹¿å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœé”®åœ¨å¤šä¸ªæ§½ä½å°±ä¸èƒ½ä¸€æ¬¡æ€§æ‹¿å‡º</span><br><span class="line"></span><br><span class="line">å¯ä»¥é€šè¿‡&#123;&#125;æ¥å®šä¹‰åŒä¸€ä¸ªç»„çš„æ¦‚å¿µï¼Œä½¿keyä¸­&#123;&#125; å†…ç›¸åŒå†…å®¹çš„é”®å€¼å¯¹æ”¾åˆ°ä¸€ä¸ªslotæ§½ä½å»</span><br><span class="line">mset k1&#123;z&#125; v1 k2&#123;z&#125; v2 k3&#123;z&#125; v3</span><br><span class="line">é¦–å…ˆè¿™ä¸ªkeyæ˜¯k1&#123;z&#125;ï¼Œç„¶åæ§½ä½æ˜¯æ ¹æ®&#123;z&#125;æ¥å†³å®šçš„ï¼Œæ‰€ä»¥è¯´è¿™ä¸‰ä¸ªkeyä¼šåœ¨åŒä¸€ä¸ªæ§½ä½</span><br></pre></td></tr></table></figure>
<p>2ã€Redisé›†ç¾¤é‡Œé¢æœ‰16384ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªkeyé€šè¿‡CRC16æ ¡éªŒåå¯¹16384å–æ¨¡æ¥å†³å®šæ”¾ç½®å“ªä¸ªæ§½ã€‚</p>
<p>é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†hashæ§½ã€‚</p>
<p>3ã€å¸¸ç”¨å‘½ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é›†ç¾¤æ˜¯å¦å®Œæ•´æ‰èƒ½å¯¹å¤–æä¾›æœåŠ¡  cluster-require-full-coverage</span><br><span class="line">åœ¨é…ç½®é‡Œé¢è¿™ä¸ªé»˜è®¤YESï¼Œéœ€è¦é›†ç¾¤å®Œæ•´æ€§ï¼Œæ‰å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œé€šå¸¸åœ¨é›†ç¾¤ä¸­ï¼Œå¦‚æœä»»ä½•ä¸€ä¸ªæŒ‚äº†ï¼Œå¯¹å¤–æä¾›çš„æ•°æ®ä¸å®Œæ•´ï¼Œæ•´ä¸ªé›†ç¾¤æ˜¯ä¸å®Œæ•´çš„ï¼Œredisé»˜è®¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ä¼šå¯¹å¤–æä¾›æœåŠ¡çš„ã€‚</span><br><span class="line">å¦‚æœè¯‰æ±‚æ˜¯ï¼Œé›†ç¾¤ä¸å®Œæ•´ä¹Ÿéœ€è¦å¯¹å¤–æä¾›æœåŠ¡ï¼Œéœ€è¦å°†å‚æ•°è®¾ç½®ä¸ºNoã€‚</span><br><span class="line"></span><br><span class="line">CLUSTER COUNTKEYSINSLOT æ§½ä½æ•°å­—ç¼–å·  æŸ¥çœ‹æ§½ä½æƒ…å†µå¦‚æœæ˜¯1æ§½ä½è¢«å ç”¨ï¼Œ0ï¼Œæ§½ä½æ²¡å ç”¨</span><br><span class="line">CLUSTER KEYSLOT é”®åç§°  è¯¥é”®åº”è¯¥å­˜åœ¨å“ªä¸ªæ§½ä½ä¸Š</span><br></pre></td></tr></table></figure>
<h2 id="SpringBooté›†æˆRedis"><a href="#SpringBooté›†æˆRedis" class="headerlink" title="SpringBooté›†æˆRedis"></a>SpringBooté›†æˆRedis</h2><p>ä¹‹å‰javaè¿æ¥mysqlç”¨çš„é©±åŠ¨åŒ…æ˜¯jdbcï¼Œé‚£ä¹ˆjavaè¿æ¥redisä¹Ÿæœ‰è‡ªå·±çš„ä¸€å¥—é©±åŠ¨åŒ…ã€‚</p>
<h3 id="æ€»ä½“æ¦‚è¿°"><a href="#æ€»ä½“æ¦‚è¿°" class="headerlink" title="æ€»ä½“æ¦‚è¿°"></a>æ€»ä½“æ¦‚è¿°</h3><p><strong>jedis-lettuce-RedisTemplateä¸‰è€…çš„å…³ç³»</strong></p>
<p><strong>jedis ç›¸å½“äºjdbcï¼Œæœ€åˆçš„é©±åŠ¨åŒ…</strong></p>
<p><strong>lettuce å¯¹jedisä¼˜åŒ–</strong></p>
<p><strong>æœ€åé›†æˆRedisTemplate</strong></p>
<p><strong>æœ¬åœ°Javaè¿æ¥Rediså¸¸è§é—®é¢˜</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bindé…ç½®æ³¨é‡Šæ‰  å¦åˆ™ç›¸å½“äºwindowsç³»ç»Ÿè¿æ¥linuxç³»ç»Ÿçš„</span><br><span class="line">ä¿æŠ¤æ¨¡å¼è®¾ç½®ä¸ºno</span><br><span class="line">Linuxç³»ç»Ÿçš„é˜²ç«å¢™è®¾ç½®</span><br><span class="line">redisæœåŠ¡å™¨çš„IPåœ°å€å’Œå¯†ç æ˜¯å¦æ­£ç¡®</span><br><span class="line">å¿˜è®°å†™è®¿é—®redisçš„æœåŠ¡ç«¯å£å·å’Œauthå¯†ç </span><br></pre></td></tr></table></figure>
<h3 id="é›†æˆJedis"><a href="#é›†æˆJedis" class="headerlink" title="é›†æˆJedis"></a>é›†æˆJedis</h3><p>Jedis Clientæ˜¯Rediså®˜ç½‘æ¨èçš„ä¸€ä¸ªé¢å‘javaå®¢æˆ·ç«¯ï¼Œåº“æ–‡ä»¶å®ç°äº†å¯¹å„ç±»APIè¿›è¡Œå°è£…è°ƒç”¨</p>
<p>ä¹Ÿå°±æ˜¯ä¹‹å‰ç”¨çš„æ‰€æœ‰åå¤§ç±»å‹å’Œå‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡javaç¨‹åºè¿›è¡Œè°ƒç”¨äº†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">çº¦å®šå¤§äºé…ç½®å¤§äºç¼–ç ï¼Œç¼–ç æ”¾åœ¨æœ€å</span><br><span class="line">å»ºModule</span><br><span class="line">æ”¹POM</span><br><span class="line">å†™YML</span><br><span class="line">ä¸»å¯åŠ¨</span><br><span class="line">ä¸šåŠ¡ç±»</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œæ˜¯springbootç„¶åè¿™é‡Œç”¨æ¥äº†è§£Jedisçš„æ‰€ä»¥è¿™é‡Œä¸ç”¨@Componentï¼Œç”¨æœ€åŸå§‹çš„äººå·¥æ§åˆ¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisDemo</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//1 connectionè·å¾—ï¼Œé€šè¿‡æŒ‡å®šipå’Œç«¯å£å·</span></span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;192.168.111.185&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">//ä»¥å‰åœ¨linuxç«¯ç”¨redis-cli -a å¯†ç  -p ç«¯å£å·æ¥è¿æ¥å®¢æˆ·ç«¯ï¼Œè¿™é‡Œä¹Ÿç±»ä¼¼ï¼Œå·²ç»å‡†å¤‡å¥½å¯¹åº”çš„æ„é€ æ–¹æ³•äº†</span></span><br><span class="line">        <span class="comment">//2 æŒ‡å®šè®¿é—®æœåŠ¡å™¨çš„å¯†ç </span></span><br><span class="line">        jedis.auth(<span class="string">&quot;11111&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3 è·å¾—äº†jediså®¢æˆ·ç«¯ï¼Œå¯ä»¥åƒjdbcä¸€æ ·è®¿é—®redis</span></span><br><span class="line">        System.out.println(jedis.ping());</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">//keys</span></span><br><span class="line">        Set&lt;String&gt; keys = jedis.keys(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//string</span></span><br><span class="line">        jedis.set(<span class="string">&quot;k3&quot;</span>,<span class="string">&quot;v3&quot;</span>);</span><br><span class="line">        jedis.get(<span class="string">&quot;k3&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//list</span></span><br><span class="line">        jedis.lpush(<span class="string">&quot;list&quot;</span>,<span class="string">&quot;1&quot;</span>,<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>);</span><br><span class="line">        jedis.lrange(<span class="string">&quot;list&quot;</span>,<span class="number">0</span>,-<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//è®¾ç½®è¿‡æœŸæ—¶é—´</span></span><br><span class="line">        jedis.expire(<span class="string">&quot;k3&quot;</span>,<span class="number">20L</span>);</span><br><span class="line">        jedis.ttl(<span class="string">&quot;k3&quot;</span>);     </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é›†æˆlettuce"><a href="#é›†æˆlettuce" class="headerlink" title="é›†æˆlettuce"></a>é›†æˆlettuce</h3><p>ä¸ºä»€ä¹ˆå‡ºç°è¿™ä¸ªï¼Ÿ</p>
<p>å¦‚æœåœ¨é«˜å¹¶å‘çš„ç¯å¢ƒä¸‹ï¼Œè¿æ¥jedisæ¯æ¬¡éƒ½newä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç»å¯¹æœºå™¨æ‰¿æ‹…ä¸ä½ï¼Œè¿™æ ·å°±æƒ³åˆ°äº†æ± åŒ–æŠ€æœ¯ã€‚</p>
<p>jedisä¹Ÿæ”¯æŒæ± åŒ–æŠ€æœ¯ï¼Œä½†æ˜¯lettuceæ›´å¥½çš„å°è£…æ‰€ä»¥ä»¥åå°±ç”¨lettuceä½†æ˜¯è¢«springbooté›†æˆäº†ï¼Œæ‰€ä»¥ä»¥åå°±ç”¨springbootäº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆç”¨lettuceï¼š<strong>ä¸»è¦æ˜¯lettuceåº•å±‚ä½¿ç”¨çš„æ˜¯Netty</strong>ï¼Œjediså®¢æˆ·ç«¯è¿æ¥RedisæœåŠ¡å™¨çš„æ—¶å€™ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¦è‡ªå·±åˆ›å»ºjediså®ä¾‹å»è¿æ¥Rediså®¢æˆ·ç«¯ï¼Œå½“æœ‰å¾ˆå¤šä¸ªçº¿ç¨‹çš„æ—¶å€™ï¼Œä¸ä»…å¼€é”€å¤§éœ€è¦åå¤çš„åˆ›å»ºå…³é—­ä¸€ä¸ªRedisè¿æ¥ï¼Œè€Œä¸”ä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ˆä¸€ä¸ªçº¿ç¨‹é€šè¿‡Jediså®ä¾‹æ›´æ”¹RedisæœåŠ¡å™¨ä¸­çš„æ•°æ®ä¹‹åä¼šå½±å“å¦ä¸€ä¸ªçº¿ç¨‹ï¼‰ã€‚</p>
<p><strong>ä½¿ç”¨Lettuceè¿™ä¸ªå®¢æˆ·ç«¯è¿æ¥RedisæœåŠ¡å™¨çš„æ—¶å€™ï¼Œå°±ä¸ä¼šå‡ºç°ä¸Šé¢çš„æƒ…å†µ</strong>ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹éƒ½éœ€è¦è¿æ¥RedisæœåŠ¡å™¨çš„æ—¶å€™ï¼Œå¯ä»¥ä¿è¯åªåˆ›å»ºä¸€ä¸ªLettuceè¿æ¥ï¼Œä½¿æ‰€æœ‰çº¿ç¨‹éƒ½å…±äº«è¿™ä¸€ä¸ªLettuceè¿æ¥ï¼Œè¿™æ ·å¯ä»¥å‡å°‘åˆ›å»ºå…³é—­ä¸€ä¸ªLettuceè¿æ¥æ—¶å€™çš„å¼€é”€ã€‚è¿™ç§æ–¹å¼ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸ä¼šå‡ºç°ä¸€ä¸ªçº¿ç¨‹é€šè¿‡Lettuceæ›´æ”¹RedisæœåŠ¡å™¨ä¸­çš„æ•°æ®ä¹‹åè€Œå½±å“å¦ä¸€ä¸ªçº¿ç¨‹çš„æƒ…å†µã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">æ­¥éª¤è·Ÿä¸Šé¢ä¸€æ ·å°±æ˜¯æ”¹POMæ–‡ä»¶ç„¶åç”¨lettuceçš„ä¸šåŠ¡ç±»å°±å¯ä»¥äº†</span><br><span class="line"><span class="comment">//è¿™é‡Œæ˜¯springbootç„¶åè¿™é‡Œç”¨æ¥äº†è§£Jedisçš„æ‰€ä»¥è¿™é‡Œä¸ç”¨@Componentï¼Œç”¨æœ€åŸå§‹çš„äººå·¥æ§åˆ¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LettuceDemo</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">// 1 ä½¿ç”¨æ„å»ºå™¨é“¾å¼ç¼–ç¨‹æ¥builderæˆ‘ä»¬RedisURI</span></span><br><span class="line">        <span class="type">RedisURI</span> <span class="variable">uri</span> <span class="operator">=</span> RedisURI.builder()</span><br><span class="line">            .redis(<span class="string">&quot;192.168.111.185&quot;</span>).</span><br><span class="line">            withPort(<span class="number">6379</span>).</span><br><span class="line">            withAuthentication(<span class="string">&quot;default&quot;</span>,<span class="string">&quot;11111&quot;</span>)</span><br><span class="line">            .build();</span><br><span class="line">        <span class="comment">//2 åˆ›å»ºè¿æ¥å®¢æˆ·ç«¯</span></span><br><span class="line">        <span class="type">RedisClient</span> <span class="variable">redisClient</span> <span class="operator">=</span> RedisClient.create(uri);</span><br><span class="line">        <span class="type">StatefulRedisConnection</span> <span class="variable">conn</span> <span class="operator">=</span> redisClient.connect();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//3 é€šè¿‡connåˆ›å»ºæ“ä½œçš„command</span></span><br><span class="line">        <span class="type">RedisCommands</span> <span class="variable">commands</span> <span class="operator">=</span> conn.sync();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//======å„ç§ä¸šåŠ¡é€»è¾‘=======</span></span><br><span class="line">        <span class="type">List</span> <span class="variable">keys</span> <span class="operator">=</span> commands.keys(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        commands.set(<span class="string">&quot;k5&quot;</span>,<span class="string">&quot;v5&quot;</span>);</span><br><span class="line">        <span class="comment">//è·Ÿjedisç±»ä¼¼</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//4 å„ç§å…³é—­é‡Šæ”¾èµ„æº</span></span><br><span class="line">        conn.close();</span><br><span class="line">        redisClient.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é›†æˆRedisTemplate"><a href="#é›†æˆRedisTemplate" class="headerlink" title="é›†æˆRedisTemplate"></a>é›†æˆRedisTemplate</h3><h4 id="è¿æ¥å•æœº"><a href="#è¿æ¥å•æœº" class="headerlink" title="è¿æ¥å•æœº"></a>è¿æ¥å•æœº</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆbootæ•´åˆredisåŸºç¡€</span><br><span class="line">å»ºModule</span><br><span class="line">æ”¹POM</span><br><span class="line">	springbootå’Œredisæ•´åˆäº†é‚£ä¹ˆéœ€è¦å¼•å…¥åŒ…</span><br><span class="line">	spring-boot-starter-data-redis è¿™æ˜¯ Spring Boot å®˜æ–¹æä¾›çš„ Redis é›†æˆ starterï¼Œç”¨äºç®€åŒ– Redis çš„é…ç½®å’Œä½¿ç”¨ã€‚</span><br><span class="line">	commons-pool2  Apache æä¾›çš„ é€šç”¨å¯¹è±¡æ± åº“</span><br><span class="line">	springfox-swagger2  SpringFox æ˜¯ä¸€ä¸ªä¸º Spring Boot åº”ç”¨è‡ªåŠ¨ç”Ÿæˆ REST API æ–‡æ¡£çš„å·¥å…·ï¼Œswagger2 æ¨¡å—ç”¨äºç”Ÿæˆç¬¦åˆ Swagger 2.0 è§„èŒƒ çš„ API æè¿°ã€‚</span><br><span class="line">	springfox-swagger-ui æä¾› Swagger UI å¯è§†åŒ–ç•Œé¢ï¼Œå°† swagger2 ç”Ÿæˆçš„ JSON æ–‡æ¡£æ¸²æŸ“æˆäº¤äº’å¼ç½‘é¡µã€‚</span><br><span class="line">	</span><br><span class="line">å†™YML</span><br><span class="line">	server.port=7777</span><br><span class="line">	spring.application.name=redis7_study</span><br><span class="line">	# ======= logging æ—¥å¿—ç›¸å…³=============</span><br><span class="line">	logging.level.root=info</span><br><span class="line">	logging.level.com.atguigu.redis7=info</span><br><span class="line">	logging.pattern.console=%d&#123;yyyy-MM-dd HH:mm:ss.sss&#125; [%thread] %-51evel %logger- %msg%n</span><br><span class="line">	logging.file.name=D:/mylogs2023/redis7_study.log</span><br><span class="line">	logging.pattern.file=%d&#123;yyyy-MM-dd HH:mm:ss.sss&#125; [%thread]%-5level %logger- %msg%n</span><br><span class="line">    #=====swagger=======</span><br><span class="line">    spring.swagger2.enabled=true</span><br><span class="line">    #åœ¨springboot2.6.Xç»“åˆswagger2.9.xä¼šæç¤ºdocumentationPluginsBootstrapperç©ºæŒ‡é’ˆå¼‚å¸¸,</span><br><span class="line">    #åŸå› æ˜¯åœ¨springboot2.6,Xä¸­å°†SpringMVcé»˜è®¤è·¯å¾„åŒ¹é…ç­–è·¯ä»AntPathMatcheræ›´æ”¹ä¸ºPathPatternParser,</span><br><span class="line">    #å¯¼è‡´å‡ºé”™ï¼Œè§£å†³åŠæ³•æ˜¯matching-strategyåˆ‡æ¢å›ä¹‹å‰ant_path_matcher</span><br><span class="line">    spring.mvc.pathmatch.matching-strategy=ant_path_matcher</span><br><span class="line"></span><br><span class="line">    #=======rediså•æœº=========</span><br><span class="line">    spring.redis.database=0</span><br><span class="line">    #ä¿®æ”¹ä¸ºè‡ªå·±çœŸå®IP</span><br><span class="line">    spring.redis.host=192.168.111.185</span><br><span class="line">    spring.redis.port=6379</span><br><span class="line">    spring.redis.password=11111</span><br><span class="line">    spring.redis.lettuce.pool.max-active=8</span><br><span class="line">    spring.redis.lettuce.pool.max-wait=-1ms</span><br><span class="line">    spring.redis.lettuce.pool.max-idle=8</span><br><span class="line">    spring.redis.lettuce.pool.min-idle=0</span><br><span class="line"></span><br><span class="line">ä¸»å¯åŠ¨</span><br><span class="line">@SpringBootApplication</span><br><span class="line">ä¸šåŠ¡ç±»</span><br><span class="line">	é…ç½®ç±»</span><br><span class="line">		RedisConfig</span><br><span class="line">		Swagger</span><br><span class="line">	service</span><br><span class="line">		OrderService</span><br><span class="line">	controller</span><br><span class="line">		OrderController</span><br><span class="line">æµ‹è¯•</span><br></pre></td></tr></table></figure>
<p><strong>OrderService</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251202233318478.png" alt="image-20251202233318478"></p>
<p><strong>Controller</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251202233654676.png" alt="image-20251202233654676"></p>
<p><strong>ä½†æ˜¯å­˜å…¥çš„keyå’Œè¯»å–çš„keyéƒ½ä¹±ç ï¼Œéœ€è¦æ³¨æ„åºåˆ—åŒ–é—®é¢˜</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">keyå’Œvalue éƒ½æ˜¯é€šè¿‡Springæä¾›çš„Serializeråºåˆ—åŒ–ä¼ åˆ°æ•°æ®åº“çš„</span><br><span class="line">RedisTemplateæ˜¯é€šè¿‡JDKæ¥åºåˆ—åŒ–çš„</span><br><span class="line">StringRedisTemplateæ˜¯é€šè¿‡StringRedisSerializeråºåˆ—åŒ–çš„</span><br><span class="line">æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨StringRedisTemplateï¼ˆè¿™ä¸ªæ˜¯RedisTemplateçš„å­ç±»ï¼Œå­ç±»æ›´å®Œå–„ï¼‰</span><br><span class="line"></span><br><span class="line">ç¬¬ä¸€ç§è§£å†³æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨StringRedisTemplateï¼Œç„¶ååŠ å…¥çš„æ²¡æœ‰åºåˆ—åŒ–é—®é¢˜äº†ï¼Œä½†æ˜¯åœ¨rediså®¢æˆ·ç«¯æŸ¥çœ‹keyçš„æ—¶å€™æ˜¯ä¹±ç ï¼Œå¦‚æœæƒ³è¦rediså®¢æˆ·ç«¯é‡ŒæŸ¥çœ‹ä¹Ÿæ˜¯å¥½çš„è¯ï¼Œéœ€è¦æ ¹æ®æ·»åŠ å‘½ä»¤--rawæ¥å¼€å¯å®¢æˆ·ç«¯</span><br><span class="line"></span><br><span class="line">ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆï¼Œåœ¨RedisConfié‡Œé¢é…ç½®RedisTemplateï¼Œç„¶åæ‰‹åŠ¨æ§åˆ¶åºåˆ—åŒ–æ–¹å¼</span><br></pre></td></tr></table></figure>
<h4 id="è¿æ¥é›†ç¾¤"><a href="#è¿æ¥é›†ç¾¤" class="headerlink" title="è¿æ¥é›†ç¾¤"></a>è¿æ¥é›†ç¾¤</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨redisé›†ç¾¤6å°å®ä¾‹</span><br><span class="line">é…ç½®ymlæ–‡ä»¶</span><br><span class="line">	server.port=7777</span><br><span class="line"></span><br><span class="line">    spring.application.name=redis7_study</span><br><span class="line"></span><br><span class="line">    # ========================logging=====================</span><br><span class="line">    logging.level.root=info</span><br><span class="line">    logging.level.com.atguigu.redis7=info</span><br><span class="line">    logging.pattern.console=%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger- %msg%n </span><br><span class="line"></span><br><span class="line">    logging.file.name=D:/mylogs2023/redis7_study.log</span><br><span class="line">    logging.pattern.file=%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger- %msg%n</span><br><span class="line"></span><br><span class="line">    # ========================swagger=====================</span><br><span class="line">    spring.swagger2.enabled=true</span><br><span class="line">    #åœ¨springboot2.6.Xç»“åˆswagger2.9.Xä¼šæç¤ºdocumentationPluginsBootstrapperç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œ</span><br><span class="line">    #åŸå› æ˜¯åœ¨springboot2.6.Xä¸­å°†SpringMVCé»˜è®¤è·¯å¾„åŒ¹é…ç­–ç•¥ä»AntPathMatcheræ›´æ”¹ä¸ºPathPatternParserï¼Œ</span><br><span class="line">    # å¯¼è‡´å‡ºé”™ï¼Œè§£å†³åŠæ³•æ˜¯matching-strategyåˆ‡æ¢å›ä¹‹å‰ant_path_matcher</span><br><span class="line">    spring.mvc.pathmatch.matching-strategy=ant_path_matcher</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # ========================redisé›†ç¾¤=====================</span><br><span class="line">    spring.redis.password=111111</span><br><span class="line">    # è·å–å¤±è´¥ æœ€å¤§é‡å®šå‘æ¬¡æ•°</span><br><span class="line">    spring.redis.cluster.max-redirects=3</span><br><span class="line">    spring.redis.lettuce.pool.max-active=8</span><br><span class="line">    spring.redis.lettuce.pool.max-wait=-1ms</span><br><span class="line">    spring.redis.lettuce.pool.max-idle=8</span><br><span class="line">    spring.redis.lettuce.pool.min-idle=0</span><br><span class="line">spring.redis.cluster.nodes=192.168.111.175:6381,192.168.111.175:6382,192.168.111.172:6383,192.168.111.172:6384,192.168.111.174:6385,192.168.111.174:6386</span><br><span class="line"></span><br><span class="line">	ç›´æ¥é€šè¿‡å¾®æœåŠ¡è®¿é—®redisé›†ç¾¤</span><br><span class="line">        å¦‚æœé€šè¿‡å®¢æˆ·ç«¯è®¿é—®</span><br><span class="line">        redis-cli -a å¯†ç  -p ç«¯å£ -c --raw</span><br><span class="line">    é—®é¢˜æ¥äº†ï¼Œä¸€ä¸ªä¸»æœºæ„å¤–downäº†ï¼Œç°åœ¨6å°æœºå™¨åªå‰©5å°ï¼Œç„¶åä¸€å°æˆåŠŸä¸Šä½ï¼Œåœ¨æœåŠ¡å™¨é‡Œå°è¯•æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯åœ¨å®¢æˆ·ç«¯é‡Œé¢å°è¯•çš„æ—¶å€™å‡ºé”™äº†ï¼ŒæŠ¥é”™æ˜¾ç¤ºæ‰¾ä¸åˆ°æœåŠ¡å™¨å¹¶ä¸”è¶…æ—¶äº†ã€‚</span><br><span class="line">    SpringBootå®¢æˆ·ç«¯æ²¡æœ‰åŠ¨æ€æ„ŸçŸ¥åˆ°Redisé›†ç¾¤çš„æœ€æ–°é›†ç¾¤æ¶ˆæ¯ã€‚</span><br><span class="line">    åŸå› æ˜¯SpringBoot 2.X ç‰ˆæœ¬ï¼ŒRedisé»˜è®¤çš„è¿æ¥æ± é‡‡ç”¨Lettuceã€‚å½“Redisé›†ç¾¤èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–åï¼ŒLettuceé»˜è®¤æ˜¯ä¸ä¼šåˆ·æ–°èŠ‚ç‚¹æ‹“æ‰‘</span><br><span class="line">    è§£å†³æ–¹æ¡ˆï¼š</span><br><span class="line">    1ã€ç”¨jedisï¼Œä½†æ˜¯è¿™æ ·ä¸ä¼˜é›…äº†ã€‚</span><br><span class="line">    2ã€é‡å†™è¿æ¥å·¥å‚å®ä¾‹ï¼Œä½†æ˜¯è¿™æ ·æ›´éš¾äº†</span><br><span class="line">    3ã€åˆ·æ–°èŠ‚ç‚¹é›†ç¾¤æ‹“æ‰‘åŠ¨æ€æ„Ÿåº”ï¼ˆå®˜ç½‘æ¨èï¼‰</span><br><span class="line">    è¦ä¹ˆè°ƒç”¨RedisClusterClient.reloadPartitions</span><br><span class="line">    è¦ä¹ˆä¿®æ”¹é…ç½®ï¼Œå®šæ—¶æ‹“æ‰‘åˆ·æ–°é»˜è®¤æ˜¯å…³é—­çš„ï¼Œæ‰€ä»¥éœ€è¦æ”¹é…ç½®</span><br><span class="line">    æ”¹å†™YML</span><br><span class="line">    #æ”¯æŒé›†ç¾¤æ‹“æ‰‘åŠ¨æ€æ„Ÿåº”åˆ·æ–°,è‡ªé€‚åº”æ‹“æ‰‘åˆ·æ–°æ˜¯å¦ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„æ›´æ–°ï¼Œé»˜è®¤falseå…³é—­</span><br><span class="line">	spring.redis.lettuce.cluster.refresh.adaptive=true</span><br><span class="line">	#å®šæ—¶åˆ·æ–°</span><br><span class="line">	spring.redis.lettuce.cluster.refresh.period=2000</span><br><span class="line">	</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://oyy0v0.top">oyy0v0</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://oyy0v0.top/2024/08/23/2025-11-26%20Redis/">https://oyy0v0.top/2024/08/23/2025-11-26%20Redis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://oyy0v0.top" target="_blank">oyy0v0ğŸ˜¼</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/redis/">-redis</a></div><div class="post_share"><div class="social-share" data-image="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/23/2024-8-23%20Nginx%E5%92%8Clua%E5%92%8COpenresty%E9%AB%98%E6%80%A7%E8%83%BD%E5%AE%9E%E8%B7%B5/" title="Nginx+lua+OpenRestyé«˜æ€§èƒ½å®è·µ"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Nginx+lua+OpenRestyé«˜æ€§èƒ½å®è·µ</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/16/2024-8-16%20%E5%89%8D%E7%AB%AF%E9%80%9F%E9%80%9A/" title="å‰ç«¯é€Ÿé€š"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å‰ç«¯é€Ÿé€š</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2025/12/03/2025-12-03%20Redis%E9%AB%98%E7%BA%A7%E7%AF%87/" title="redis é«˜çº§ç¯‡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-03</div><div class="title">redis é«˜çº§ç¯‡</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/7.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">oyy0v0</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/oyy0v0"><i class="fab fa-github"></i><span>ğŸ’•å‰å¾€å°å®¶</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="/assets/QRCode.jpg" target="_blank" title="icon-weixin"><i class="å¾®ä¿¡" style="color: faa-tada;"></i></a><a class="social-icon" href="https://github.com/oyy0v0" target="_blank" title="icon-github"><i class="Github" style="color: faa-tade;"></i></a><a class="social-icon" href="mailto:2925886492@qq.com" target="_blank" title="icon-youxiang"><i class="QQé‚®ç®±" style="color: faa-tada;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿æ¥æ¥åˆ°æˆ‘çš„åšå®¢</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis"><span class="toc-text">Redis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E7%AE%80%E4%BB%8B"><span class="toc-text">Redisç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NoSQL%E7%AE%80%E4%BB%8B"><span class="toc-text">NoSQLç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Redis%E7%AE%80%E4%BB%8B"><span class="toc-text">2.Redisç®€ä»‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E5%8D%95%E6%9C%BA%E7%89%88%E5%AE%89%E8%A3%85"><span class="toc-text">Rediså•æœºç‰ˆå®‰è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E5%B8%B8%E7%94%A8%E7%9A%8410%E5%A4%A7%E7%B1%BB%E5%9E%8B"><span class="toc-text">Rediså¸¸ç”¨çš„10å¤§ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#String%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89"><span class="toc-text">Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hash%EF%BC%88%E5%93%88%E5%B8%8C%EF%BC%89"><span class="toc-text">Hashï¼ˆå“ˆå¸Œï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Set%EF%BC%88%E9%9B%86%E5%90%88%EF%BC%89"><span class="toc-text">Setï¼ˆé›†åˆï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zset-sorted-set%EF%BC%9A%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="toc-text">zset(sorted setï¼šæœ‰åºé›†åˆ)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GEO%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4"><span class="toc-text">GEOåœ°ç†ç©ºé—´</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HyperLogLog-%E5%9F%BA%E6%95%B0%E7%BB%9F%E8%AE%A1"><span class="toc-text">HyperLogLog åŸºæ•°ç»Ÿè®¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bitmap-%E4%BD%8D%E5%9B%BE"><span class="toc-text">bitmap ä½å›¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bitfield-%E4%BD%8D%E5%9F%9F"><span class="toc-text">bitfield ä½åŸŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stream%E6%B5%81"><span class="toc-text">streamæµ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">Rediså¸¸ç”¨å‘½ä»¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Key%E6%93%8D%E4%BD%9C"><span class="toc-text">1. Keyæ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-exists"><span class="toc-text">1.1  exists</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-expire"><span class="toc-text">1.2 expire</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3-ttl"><span class="toc-text">1.3 ttl</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-del"><span class="toc-text">1.4 del</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%80%BC-String"><span class="toc-text">2. å­—ç¬¦ä¸²å€¼(String)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">åº”ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%93%88%E5%B8%8C%E8%A1%A8-Hash"><span class="toc-text">3 å“ˆå¸Œè¡¨(Hash)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%88%97%E8%A1%A8%EF%BC%88List%EF%BC%89"><span class="toc-text">4. åˆ—è¡¨ï¼ˆListï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E9%9B%86%E5%90%88-Set"><span class="toc-text">5 é›†åˆ(Set)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88-zset"><span class="toc-text">6 æœ‰åºé›†åˆ zset</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E4%BD%8D%E5%9B%BE-bitmap"><span class="toc-text">7 ä½å›¾ bitmap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%9F%BA%E6%95%B0%E7%BB%9F%E8%AE%A1-hyperloglog"><span class="toc-text">8 åŸºæ•°ç»Ÿè®¡ hyperloglog</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%9C%B0%E7%90%86%E7%A9%BA%E9%97%B4-GEO"><span class="toc-text">9 åœ°ç†ç©ºé—´ GEO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-redis-%E6%B5%81-stream"><span class="toc-text">10 redis æµ stream</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-%E4%BD%8D%E5%9F%9F-bitfield"><span class="toc-text">11 ä½åŸŸ bitfield</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5"><span class="toc-text">RedisæŒä¹…åŒ–ç­–ç•¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-RDB"><span class="toc-text">1. RDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-AOF"><span class="toc-text">2 AOF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-RDB-AOF-%E6%B7%B7%E5%90%88"><span class="toc-text">3 RDB + AOF æ··åˆ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis-%E4%BA%8B%E5%8A%A1"><span class="toc-text">Redis äº‹åŠ¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E7%AE%A1%E9%81%93"><span class="toc-text">Redisç®¡é“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis-%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85"><span class="toc-text">Redis å‘å¸ƒè®¢é˜…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6"><span class="toc-text">Redisä¸»ä»å¤åˆ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%A8%E5%85%B5%EF%BC%88Sentinel%EF%BC%89"><span class="toc-text">å“¨å…µï¼ˆSentinelï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%EF%BC%88Cluster%EF%BC%89"><span class="toc-text">é›†ç¾¤ï¼ˆClusterï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E7%AE%97%E6%B3%95-%E5%88%86%E7%89%87-%E6%A7%BD%E4%BD%8Dslot"><span class="toc-text">é›†ç¾¤ç®—æ³•-åˆ†ç‰‡-æ§½ä½slot</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#redis%E9%9B%86%E7%BE%A4%E7%9A%84%E6%A7%BD%E4%BD%8Dslot"><span class="toc-text">redisé›†ç¾¤çš„æ§½ä½slot</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">é›†ç¾¤ç¯å¢ƒæ­å»º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E9%9B%86%E6%88%90Redis"><span class="toc-text">SpringBooté›†æˆRedis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E4%BD%93%E6%A6%82%E8%BF%B0"><span class="toc-text">æ€»ä½“æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90Jedis"><span class="toc-text">é›†æˆJedis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90lettuce"><span class="toc-text">é›†æˆlettuce</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E6%88%90RedisTemplate"><span class="toc-text">é›†æˆRedisTemplate</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%8D%95%E6%9C%BA"><span class="toc-text">è¿æ¥å•æœº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E9%9B%86%E7%BE%A4"><span class="toc-text">è¿æ¥é›†ç¾¤</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By oyy0v0</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.oyy0v0.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.oyy0v0.top/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script async src="//at.alicdn.com/t/c/font_4658720_723un29n3vn.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer data-pjax src="/js/readPercent.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg);"> <a class="categoryBar-list-link" href="categories/åšå®¢/">åšå®¢</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">java</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg);"> <a class="categoryBar-list-link" href="categories/javaå…¥é—¨/">javaå…¥é—¨</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">ç®—æ³•</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg);"> <a class="categoryBar-list-link" href="categories/GitHub/">GitHub</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">åšå®¢</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg);"> <a class="categoryBar-list-link" href="categories/ç®—æ³•/">ç®—æ³•</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr">AI</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/13.jpg);"> <a class="categoryBar-list-link" href="categories/é¢è¯•é›†åˆ/">é¢è¯•é›†åˆ</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">å‰ç«¯</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg);"> <a class="categoryBar-list-link" href="categories/AI/">AI</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">GitHub</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/11.jpg);"> <a class="categoryBar-list-link" href="categories/å‰ç«¯/">å‰ç«¯</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">å…«è‚¡æ–‡</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/10.jpg);"> <a class="categoryBar-list-link" href="categories/java/">java</a><span class="categoryBar-list-count">31</span><span class="categoryBar-list-descr">é¢è¯•é›†åˆ</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg);"> <a class="categoryBar-list-link" href="categories/è®¡ç®—æœºç½‘ç»œ/">è®¡ç®—æœºç½‘ç»œ</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">Goè¯­è¨€</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg);"> <a class="categoryBar-list-link" href="categories/Goè¯­è¨€/">Goè¯­è¨€</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">Linux</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/21.jpg);"> <a class="categoryBar-list-link" href="categories/æ“ä½œç³»ç»Ÿ/">æ“ä½œç³»ç»Ÿ</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">æ“ä½œç³»ç»Ÿ</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg);"> <a class="categoryBar-list-link" href="categories/è¸©å‘æ‚è®°/">è¸©å‘æ‚è®°</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">è®¡ç®—æœºç½‘ç»œ</span></li></ul></div></div>';
      console.log('å·²æŒ‚è½½butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = '8b4e8faa226f49ff851d67d0354499b7';
  var gaud_map_key = '85e43a6ba1ebb38fd12b0d8a886ecb9b';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œå¤‡ç”¨çº¿è·¯æ‰˜ç®¡äº4EVERLAND" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('å·²æŒ‚è½½butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/07/28/2025-6-18 å…«è‚¡æ–‡/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-07-28</span><a class="blog-slider__title" href="2025/07/28/2025-6-18 å…«è‚¡æ–‡/" alt="">å…«è‚¡æ–‡é›†åˆ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/07/28/2025-6-18 å…«è‚¡æ–‡/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/09/01/2024-9-1 DockeråŸºç¡€/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-09-01</span><a class="blog-slider__title" href="2024/09/01/2024-9-1 DockeråŸºç¡€/" alt="">Docker</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/09/01/2024-9-1 DockeråŸºç¡€/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/14/2025-10-14 Javaçº¿ç¨‹æ± çš„åŸç†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-14</span><a class="blog-slider__title" href="2025/10/14/2025-10-14 Javaçº¿ç¨‹æ± çš„åŸç†/" alt="">Javaçº¿ç¨‹æ± çš„åŸç†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/14/2025-10-14 Javaçº¿ç¨‹æ± çš„åŸç†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/29/2024-8-29 Solr/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/11.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-29</span><a class="blog-slider__title" href="2024/08/29/2024-8-29 Solr/" alt="">Solr</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/29/2024-8-29 Solr/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/24/2024-8-24 è™šæ‹ŸæœºVMware/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-24</span><a class="blog-slider__title" href="2024/08/24/2024-8-24 è™šæ‹ŸæœºVMware/" alt="">è™šæ‹Ÿæœº</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/24/2024-8-24 è™šæ‹ŸæœºVMware/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/26/2024-11-26è®¾è®¡æ¨¡å¼/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-26</span><a class="blog-slider__title" href="2024/11/26/2024-11-26è®¾è®¡æ¨¡å¼/" alt="">è®¾è®¡æ¨¡å¼</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/11/26/2024-11-26è®¾è®¡æ¨¡å¼/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/26/2024-11-22 é¢è¯•/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-26</span><a class="blog-slider__title" href="2024/11/26/2024-11-22 é¢è¯•/" alt="">é¢è¯•é›†åˆ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/11/26/2024-11-22 é¢è¯•/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-22 å¼€å‘æµç¨‹åŒ–/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-22 å¼€å‘æµç¨‹åŒ–/" alt="">å¼€å‘æµç¨‹åŒ–</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-22 å¼€å‘æµç¨‹åŒ–/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-14 Servletå…¥é—¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-14 Servletå…¥é—¨/" alt="">Servletå…¥é—¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-14 Servletå…¥é—¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-14 JSP/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/3.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-14 JSP/" alt="">JSP</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-14 JSP/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-12 å¸¸ç”¨æ³¨è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/4.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-12 å¸¸ç”¨æ³¨è§£/" alt="">å¸¸ç”¨æ³¨è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-12 å¸¸ç”¨æ³¨è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-14  Servletè¿›é˜¶/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-14  Servletè¿›é˜¶/" alt="">Servletè¿›é˜¶</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-14  Servletè¿›é˜¶/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/12/03/2025-12-03 Redisé«˜çº§ç¯‡/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-12-03</span><a class="blog-slider__title" href="2025/12/03/2025-12-03 Redisé«˜çº§ç¯‡/" alt="">redis é«˜çº§ç¯‡</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/12/03/2025-12-03 Redisé«˜çº§ç¯‡/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-11 Mavenå®æˆ˜/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-11 Mavenå®æˆ˜/" alt="">Maven</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-11 Mavenå®æˆ˜/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/12/14/2025-12-14 SpringBoot3/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-12-14</span><a class="blog-slider__title" href="2025/12/14/2025-12-14 SpringBoot3/" alt="">Springboot3</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/12/14/2025-12-14 SpringBoot3/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/23/2025-11-26 Redis/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-23</span><a class="blog-slider__title" href="2024/08/23/2025-11-26 Redis/" alt="">redis</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/23/2025-11-26 Redis/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/23/2025-11-23 SpringMVC/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-23</span><a class="blog-slider__title" href="2025/11/23/2025-11-23 SpringMVC/" alt="">SpringMVC</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/23/2025-11-23 SpringMVC/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/28/2025-10-28 JavaEE/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/10.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-28</span><a class="blog-slider__title" href="2025/10/28/2025-10-28 JavaEE/" alt="">JavaEE</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/28/2025-10-28 JavaEE/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/23/2025-11-22 Springæ”¶å½•é¢è¯•é¢˜/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-23</span><a class="blog-slider__title" href="2025/11/23/2025-11-22 Springæ”¶å½•é¢è¯•é¢˜/" alt="">Springé¢è¯•</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/23/2025-11-22 Springæ”¶å½•é¢è¯•é¢˜/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/23/2025-10-23 Spring/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-23</span><a class="blog-slider__title" href="2025/10/23/2025-10-23 Spring/" alt="">Spring</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/23/2025-10-23 Spring/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/30/2025-10-30 Springæ‰©å±•ç‚¹æ¡ˆä¾‹/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-30</span><a class="blog-slider__title" href="2025/10/30/2025-10-30 Springæ‰©å±•ç‚¹æ¡ˆä¾‹/" alt="">Springæ‰©å±•ç‚¹æ¡ˆä¾‹</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/30/2025-10-30 Springæ‰©å±•ç‚¹æ¡ˆä¾‹/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/22/2025-10-22 Sentinelé™æµå’Œç†”æ–­/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/13.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-22</span><a class="blog-slider__title" href="2025/10/22/2025-10-22 Sentinelé™æµå’Œç†”æ–­/" alt="">Sentinelé™æµå’Œç†”æ–­</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/22/2025-10-22 Sentinelé™æµå’Œç†”æ–­/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/12/2025-10-13 mybatisçš„æ‰§è¡ŒåŸç†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/21.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-12</span><a class="blog-slider__title" href="2025/10/12/2025-10-13 mybatisçš„æ‰§è¡ŒåŸç†/" alt="">Mybatisçš„æ‰§è¡ŒåŸç†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/12/2025-10-13 mybatisçš„æ‰§è¡ŒåŸç†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/07/20/2025-10-20 Mybatis/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-07-20</span><a class="blog-slider__title" href="2024/07/20/2025-10-20 Mybatis/" alt="">Mybatis</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/07/20/2025-10-20 Mybatis/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/22/2025-10-22 Nettyäº†è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-22</span><a class="blog-slider__title" href="2025/10/22/2025-10-22 Nettyäº†è§£/" alt="">Netty</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/22/2025-10-22 Nettyäº†è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/14/2025-10-21 Dubbo/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-14</span><a class="blog-slider__title" href="2024/08/14/2025-10-21 Dubbo/" alt="">Dubbo</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/14/2025-10-21 Dubbo/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/07/2024-8-7 Springboot/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/4.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="2024/08/07/2024-8-7 Springboot/" alt="">Springboot</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/07/2024-8-7 Springboot/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/23/2024-8-23 Nginxå’Œluaå’ŒOpenrestyé«˜æ€§èƒ½å®è·µ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-23</span><a class="blog-slider__title" href="2024/08/23/2024-8-23 Nginxå’Œluaå’ŒOpenrestyé«˜æ€§èƒ½å®è·µ/" alt="">Nginx+lua+OpenRestyé«˜æ€§èƒ½å®è·µ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/23/2024-8-23 Nginxå’Œluaå’ŒOpenrestyé«˜æ€§èƒ½å®è·µ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/07/2024-8-7 è¸©å‘è®°å½•/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="2024/08/07/2024-8-7 è¸©å‘è®°å½•/" alt="">è¸©å‘è®°å½•</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/07/2024-8-7 è¸©å‘è®°å½•/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/07/2024-8-9 å›ºå®šæ€è·¯è¯¦è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="2024/08/07/2024-8-9 å›ºå®šæ€è·¯è¯¦è§£/" alt="">å›ºå®šæ€è·¯è¯¦è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/07/2024-8-9 å›ºå®šæ€è·¯è¯¦è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/16/2024-8-16 å‰ç«¯é€Ÿé€š/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-16</span><a class="blog-slider__title" href="2024/08/16/2024-8-16 å‰ç«¯é€Ÿé€š/" alt="">å‰ç«¯é€Ÿé€š</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/16/2024-8-16 å‰ç«¯é€Ÿé€š/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/14/2024-8-14 RPCè¿œç¨‹æœåŠ¡è°ƒç”¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-14</span><a class="blog-slider__title" href="2024/08/14/2024-8-14 RPCè¿œç¨‹æœåŠ¡è°ƒç”¨/" alt="">RPCè¿œç¨‹æœåŠ¡è°ƒç”¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/14/2024-8-14 RPCè¿œç¨‹æœåŠ¡è°ƒç”¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/06/24/2025-6-24 ç®—æ³•åˆé›†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/3.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-06-24</span><a class="blog-slider__title" href="2025/06/24/2025-6-24 ç®—æ³•åˆé›†/" alt="">ç®—æ³•åˆé›†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/06/24/2025-6-24 ç®—æ³•åˆé›†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/10/2025-3-9 é˜Ÿåˆ—å’Œæ ˆ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-10</span><a class="blog-slider__title" href="2025/03/10/2025-3-9 é˜Ÿåˆ—å’Œæ ˆ/" alt="">é˜Ÿåˆ—å’Œæ ˆ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/10/2025-3-9 é˜Ÿåˆ—å’Œæ ˆ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/02/2025-3-2 é“¾è¡¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/9.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-02</span><a class="blog-slider__title" href="2025/03/02/2025-3-2 é“¾è¡¨/" alt="">é“¾è¡¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/02/2025-3-2 é“¾è¡¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-11 ç®—æ³•é—®é¢˜åˆé›†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-11 ç®—æ³•é—®é¢˜åˆé›†/" alt="">ç®—æ³•é—®é¢˜åˆé›†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-11 ç®—æ³•é—®é¢˜åˆé›†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/23/2025-2-23 æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-02-23</span><a class="blog-slider__title" href="2025/02/23/2025-2-23 æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰/" alt="">æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/02/23/2025-2-23 æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/02/2025-2-25 java8æ–°ç‰¹æ€§/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-02</span><a class="blog-slider__title" href="2025/03/02/2025-2-25 java8æ–°ç‰¹æ€§/" alt="">java8æ–°ç‰¹æ€§</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/02/2025-2-25 java8æ–°ç‰¹æ€§/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/04/2025-11-4 ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-04</span><a class="blog-slider__title" href="2025/11/04/2025-11-4 ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰/" alt="">ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/04/2025-11-4 ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/07/2025-11-7 åŠ¨æ€ä»£ç†å’Œåå°„/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/13.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-07</span><a class="blog-slider__title" href="2025/11/07/2025-11-7 åŠ¨æ€ä»£ç†å’Œåå°„/" alt="">åŠ¨æ€ä»£ç†å’Œåå°„</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/07/2025-11-7 åŠ¨æ€ä»£ç†å’Œåå°„/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/20/2025-10-20 RPCäº†è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-20</span><a class="blog-slider__title" href="2025/10/20/2025-10-20 RPCäº†è§£/" alt="">RPCäº†è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/20/2025-10-20 RPCäº†è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/07/13/2024-7-2 Vue2/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-07-13</span><a class="blog-slider__title" href="2024/07/13/2024-7-2 Vue2/" alt="">Vue2</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/07/13/2024-7-2 Vue2/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/18/2024-4-20 æ“ä½œç³»ç»Ÿ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-18</span><a class="blog-slider__title" href="2024/04/18/2024-4-20 æ“ä½œç³»ç»Ÿ/" alt="">æ“ä½œç³»ç»Ÿ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/18/2024-4-20 æ“ä½œç³»ç»Ÿ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/28/2024-4-28 goè¯­è¨€/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/11.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-28</span><a class="blog-slider__title" href="2024/04/28/2024-4-28 goè¯­è¨€/" alt="">Goè¯­è¨€</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/28/2024-4-28 goè¯­è¨€/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/05/14/2024-4-29 è®¡ç®—æœºç½‘ç»œ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-05-14</span><a class="blog-slider__title" href="2024/05/14/2024-4-29 è®¡ç®—æœºç½‘ç»œ/" alt="">è®¡ç®—æœºç½‘ç»œ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/05/14/2024-4-29 è®¡ç®—æœºç½‘ç»œ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/15/2024-4-15 æ•°æ®åº“/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-15</span><a class="blog-slider__title" href="2024/04/15/2024-4-15 æ•°æ®åº“/" alt="">æ•°æ®åº“</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/15/2024-4-15 æ•°æ®åº“/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/18/2024-4-18 JDBC/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-18</span><a class="blog-slider__title" href="2024/04/18/2024-4-18 JDBC/" alt="">JDBC</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/18/2024-4-18 JDBC/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/07/06/2023-7-1Javaå°è®°/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-06</span><a class="blog-slider__title" href="2023/07/06/2023-7-1Javaå°è®°/" alt="">Javaå°è®°</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/07/06/2023-7-1Javaå°è®°/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/12/18/2023-12-18 å‰ç«¯å°è®°/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-18</span><a class="blog-slider__title" href="2023/12/18/2023-12-18 å‰ç«¯å°è®°/" alt="">å‰ç«¯å°è®°</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/12/18/2023-12-18 å‰ç«¯å°è®°/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/08/15/2023-8-15 AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-08-15</span><a class="blog-slider__title" href="2023/08/15/2023-8-15 AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›/" alt="">AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/08/15/2023-8-15 AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/08/2023-5-8å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-08</span><a class="blog-slider__title" href="2023/05/08/2023-5-8å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨/" alt="">å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/05/08/2023-5-8å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/06/23/2023-6-24Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-23</span><a class="blog-slider__title" href="2023/06/23/2023-6-24Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹/" alt="">Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/06/23/2023-6-24Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/11/27/2022-11-27 æšä¸¾ç±»/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="2022/11/27/2022-11-27 æšä¸¾ç±»/" alt="">javaseå…¥é—¨ï¼ˆæšä¸¾1ï¼‰</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2022/11/27/2022-11-27 æšä¸¾ç±»/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/12/12/2023-12-11 å»ºç«‹åšå®¢ä¿å§†æ•™ç¨‹ï¼ˆ1ï¼‰/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-12</span><a class="blog-slider__title" href="2023/12/12/2023-12-11 å»ºç«‹åšå®¢ä¿å§†æ•™ç¨‹ï¼ˆ1ï¼‰/" alt="">å»ºç«‹åšå®¢</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/12/12/2023-12-11 å»ºç«‹åšå®¢ä¿å§†æ•™ç¨‹ï¼ˆ1ï¼‰/" alt="">è¯¦æƒ…   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/about/'|| '/about/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://github-api.oyy0v0.top//api?oyy0v0",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'oyy0v0')
    }
  </script><!-- hexo injector body_end end --></body></html>