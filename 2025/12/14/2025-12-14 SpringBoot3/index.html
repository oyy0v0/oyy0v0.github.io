<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Springboot3 | oyy0v0ğŸ˜¼</title><meta name="author" content="oyy0v0"><meta name="copyright" content="oyy0v0"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="çŸ¥è¯†åˆ†äº«">
<meta property="og:type" content="article">
<meta property="og:title" content="Springboot3">
<meta property="og:url" content="https://oyy0v0.top/2025/12/14/2025-12-14%20SpringBoot3/index.html">
<meta property="og:site_name" content="oyy0v0ğŸ˜¼">
<meta property="og:description" content="çŸ¥è¯†åˆ†äº«">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg">
<meta property="article:published_time" content="2025-12-14T13:40:00.000Z">
<meta property="article:modified_time" content="2025-12-22T19:35:25.662Z">
<meta property="article:author" content="oyy0v0">
<meta property="article:tag" content="-Springå…¨å®¶æ¡¶">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg"><link rel="shortcut icon" href="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E7%8C%AB.svg"><link rel="canonical" href="https://oyy0v0.top/2025/12/14/2025-12-14%20SpringBoot3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Springboot3',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-12-23 03:35:25'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4658720_723un29n3vn.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/readPercent.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://www.fomal.cc/static/css/runtime.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/7.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">56</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw icon-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw icon-shijianzhou"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw icon-biaoqian"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw icon-fenlei"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw icon-guanyu"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="oyy0v0ğŸ˜¼"><span class="site-name">oyy0v0ğŸ˜¼</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw icon-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw icon-shijianzhou"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw icon-biaoqian"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw icon-fenlei"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw icon-guanyu"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Springboot3</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2025-12-14T13:40:00.000Z" title="å‘è¡¨äº 2025-12-14 21:40:00">2025-12-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-12-22T19:35:25.662Z" title="æ›´æ–°äº 2025-12-23 03:35:25">2025-12-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">26.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>101åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Springboot3"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="SpringBoot3"><a href="#SpringBoot3" class="headerlink" title="SpringBoot3"></a>SpringBoot3</h1><p>ä»SpringBoot2å¼€å§‹webç¼–ç¨‹åˆ†ä¸ºäº†ä¸¤ä¸ªæµæ´¾ï¼Œ</p>
<p>ä¸€ä¸ªä½¿ç”¨ServletæŠ€æœ¯æ ˆï¼Œå¯ä»¥ç§°ä¸ºä¼ ç»Ÿæ´¾ï¼Œä¸€ä¸ªä½¿ç”¨ReactiveæŠ€æœ¯æ ˆï¼Œä¹Ÿå°±æ˜¯å“åº”å¼æŠ€æœ¯æ ˆï¼Œä½¿ç”¨Servletç¼–ç¨‹çš„è¯ï¼Œä¼šä½¿ç”¨ServletAPIè§„èŒƒï¼Œé…ä¸ŠServletå®¹å™¨ï¼Œæ¯”å¦‚Tomcatå†é…åˆSpringä¸€ç³»åˆ—æŠ€æœ¯æ ˆï¼Œæ¯”å¦‚Spring MVC,SpringSecurityï¼ŒSpringDataæ¥æ„å»ºwebåº”ç”¨ï¼Œè¿™ç§ç§°ä¸ºé˜»å¡åŒæ­¥çš„BIOæ¨¡å‹ã€‚</p>
<p>ä¸€ä¸ªä½¿ç”¨å“åº”å¼æŠ€æœ¯æ ˆï¼ŒæŒ‰ç…§Reactiveå’ŒStreamè§„èŒƒï¼Œæ­é…ä¸ŠNettyå’ŒTomcatåœ¨Servlet3.1+æ ‡å‡†ä¸Šä¹Ÿæ”¯æŒå¼‚æ­¥è¯·æ±‚ã€‚æœ‰äº†è¿™äº›å®¹å™¨æ­é…Spring SecurityReactiveæ¡†æ¶åšå®‰å…¨éªŒè¯ï¼ŒSpringWebFluxæ¡†æ¶åšMVCï¼ŒSpringDataReactiveåšæ•°æ®å¤„ç†ã€‚è¿™æ ·å°±èƒ½æŒ–æ˜CPUçš„èƒ½åŠ›å¤„ç†å¤§é‡å¹¶å‘</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251214211421617.png" alt="image-20251214211421617"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/deepseek_mermaid_20251221_ccefed.png" alt="deepseek_mermaid_20251221_ccefed" style="zoom:25%;" /></p>
<h2 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h2><ul>
<li>java17</li>
<li>Springã€SpringMVCã€MyBatis</li>
<li>Mavenã€IDEA</li>
</ul>
<p><strong>ç¯å¢ƒè¦æ±‚</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>ç¯å¢ƒ&amp;å·¥å…·</th>
<th>ç‰ˆæœ¬</th>
</tr>
</thead>
<tbody>
<tr>
<td>SpringBoot</td>
<td>3.0.4+</td>
</tr>
<tr>
<td>IDEA</td>
<td>2021+</td>
</tr>
<tr>
<td>jAVA</td>
<td>17+</td>
</tr>
<tr>
<td>Maven</td>
<td>3.5+</td>
</tr>
<tr>
<td>Tomcat</td>
<td>10.0+</td>
</tr>
<tr>
<td>Servlet</td>
<td>5.0+</td>
</tr>
<tr>
<td>GraalVM Community</td>
<td>22.3+</td>
</tr>
<tr>
<td>Native Build Tools</td>
<td>0.9.19+</td>
</tr>
</tbody>
</table>
</div>
<p><strong>SpringBootæ˜¯ä»€ä¹ˆ</strong></p>
<p>SpringBootå¸®æˆ‘ä»¬ç®€å•ã€å¿«é€Ÿçš„åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„Springåº”ç”¨ï¼Œå¤§å¤šæ•°SpringBootåº”ç”¨åªéœ€è¦ç¼–å†™å°‘é‡é…ç½®ï¼Œæ•´åˆSpringå¹³å°ä»¥åŠç¬¬ä¸‰æ–¹æŠ€æœ¯ã€‚</p>
<p><strong>ç‰¹æ€§</strong></p>
<ul>
<li><strong>å¿«é€Ÿåˆ›å»º</strong>ç‹¬ç«‹Springåº”ç”¨<ul>
<li>SSMï¼šå¯¼åŒ…ã€å†™é…ç½®ã€å¯åŠ¨è¿è¡Œ</li>
</ul>
</li>
<li><p>ç›´æ¥åµŒå…¥Tomcatã€Jetty or Undertowï¼ˆæ— éœ€éƒ¨ç½²waråŒ…ï¼‰ã€Servletå®¹å™¨ã€‘</p>
<ul>
<li>linux java tomcat mysqlï¼šwaræ”¾åˆ°tomcatçš„webappä¸‹</li>
<li>ç°åœ¨åº”ç”¨é‡ŒåµŒå…¥è¿™äº›å®¹å™¨æ‰“åŒ…æˆjaråŒ…ï¼Œç„¶åè¿è¡Œjava -jarå°±å¥½äº†ï¼Œå‰ææ˜¯éƒ½è¦æœ‰javaç¯å¢ƒå•Š</li>
</ul>
</li>
<li><p>æä¾›å¯é€‰çš„ <strong>starter</strong>ï¼Œç®€åŒ–åº”ç”¨ <strong>æ•´åˆ</strong></p>
<ul>
<li>åœºæ™¯å¯åŠ¨å™¨ï¼ˆstarterï¼‰ï¼šwebã€jsonã€é‚®ä»¶ã€ossï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰ã€å¼‚æ­¥ã€å®šæ—¶ä»»åŠ¡ã€ç¼“å­˜</li>
<li>ä»¥å‰å¼€å‘å¯¼åŒ…ä¸€å †ï¼Œæ§åˆ¶å¥½ç‰ˆæœ¬ã€‚</li>
<li>ä¸ºæ¯ä¸€ç§åœºæ™¯å‡†å¤‡äº†ä¸€ä¸ªä¾èµ–åæ ‡ï¼Œæ¯”å¦‚å¯¼å…¥web-starterã€mybatis-starterè¿™äº›ä¾èµ–ï¼Œç›¸å…³çš„éƒ½ä¾èµ–ä¸Šäº†ã€‚</li>
</ul>
</li>
<li>æŒ‰éœ€è‡ªåŠ¨é…ç½®Spring ä»¥åŠ ç¬¬ä¸‰æ–¹åº“<ul>
<li>å¦‚æœè¿™äº›åœºæ™¯æˆ‘ä»¬è¦ä½¿ç”¨ï¼ˆç”Ÿæ•ˆï¼‰ï¼Œè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰é…ç½®éƒ½ä¼šè‡ªåŠ¨é…ç½®å¥½ã€‚</li>
<li><strong>çº¦å®šå¤§äºé…ç½®</strong>ï¼šæ¯ä¸ªåœºæ™¯éƒ½æœ‰å¾ˆå¤šé»˜è®¤é…ç½®ã€‚</li>
<li>è‡ªå®šä¹‰ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹å‡ é¡¹å°±å¯ä»¥ã€‚</li>
</ul>
</li>
<li>æä¾› <strong>ç”Ÿäº§çº§åˆ«ç‰¹æ€§</strong>ï¼šå¦‚ ç›‘æ§æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥ã€å¤–éƒ¨åŒ–é…ç½®ç­‰ã€‚<ul>
<li>ç›‘æ§æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥ï¼ˆk8sï¼‰ã€å¤–éƒ¨åŒ–é…ç½®ï¼ˆä¹Ÿå°±æ˜¯è¯´é…ç½®å¯ä»¥ä¸ç”¨å†™åœ¨jaråŒ…é‡Œé¢ï¼Œåªç”¨é‡å¯å°±èƒ½è¯»å–åˆ°é…ç½®äº†ï¼‰</li>
</ul>
</li>
<li>æ— ä»£ç ç”Ÿæˆã€æ— xmlã€‚</li>
</ul>
<p>æ€»ç»“ï¼šç®€åŒ–å¼€å‘ã€ç®€åŒ–é…ç½®ã€ç®€åŒ–æ•´åˆã€ç®€åŒ–éƒ¨ç½²ã€ç®€åŒ–ç›‘æ§ã€ç®€åŒ–è¿ç»´ã€‚</p>
<h2 id="SpringBoot3æ ¸å¿ƒç‰¹æ€§"><a href="#SpringBoot3æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="SpringBoot3æ ¸å¿ƒç‰¹æ€§"></a>SpringBoot3æ ¸å¿ƒç‰¹æ€§</h2><p>å¦‚æœæƒ³è¦Springboot2å°±<code>https://start.aliyun.com</code>è¿™ä¸ªç½‘å€</p>
<p>å¦‚æœæƒ³è¦Springboot3å°±<code>https://start.spring.io</code></p>
<p>å…¶æ¬¡åˆ›å»ºä¹‹åè¯¥Mavené…ç½®</p>
<h3 id="1ã€å¿«é€Ÿå…¥é—¨"><a href="#1ã€å¿«é€Ÿå…¥é—¨" class="headerlink" title="1ã€å¿«é€Ÿå…¥é—¨"></a><strong>1ã€å¿«é€Ÿå…¥é—¨</strong></h3><p>ç¬¬ä¸€æ­¥é¦–å…ˆåˆ›å»ºPOMæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ‰€æœ‰çš„spring-booté¡¹ç›®éƒ½éœ€è¦ç»§æ‰¿spring-boot-starter-parent--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--webç›¸å…³çš„ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ æ”¹YML è¿™é‡Œä¸ç”¨</p>
<p>ç¬¬ä¸‰æ­¥ä¸»å¯åŠ¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MainApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬å››æ­¥ ä¸šåŠ¡ç±» è¿™é‡Œä¹Ÿä¸ç”¨</p>
<p>ç¬¬äº”æ­¥ æ§åˆ¶ç±» è¿™é‡Œå†™ä¸ªdemoController</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span> <span class="comment">//@Controller + @ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, Spring Boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿™é‡Œå°±éƒ¨ç½²å¥½äº†</strong></p>
<p>ç„¶åSpringBootç»™æˆ‘ä»¬æä¾›äº†æ‰“åŒ…jarçš„æ’ä»¶ï¼Œç„¶åæ”¹POMæ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å³è¾¹Mavenç„¶åè¿è¡Œpackageå°±èƒ½æ‰“åŒ…äº†ã€‚</p>
<p>æ‰“åŒ…å¥½åè¿è¡Œjava -jarå°±èƒ½è¿è¡Œäº†ã€‚</p>
<p>ç°åœ¨å‡è®¾æƒ³è¦æ”¹ç«¯å£å·ï¼Œä»¥å‰è¦æ‰“å¼€é¡¹ç›®ç„¶åä¿®æ”¹YMLç„¶åé‡æ–°æ‰“åŒ…ï¼Œé‡æ–°å‘å¸ƒï¼Œç„¶åé‡æ–°å¯åŠ¨ã€‚</p>
<p>ç°åœ¨åªç”¨åœ¨å¤–é¢æ–°å»ºä¸ªapplication.properties</p>
<p>ç„¶ååœ¨é‡Œé¢ç¼–å†™é…ç½®<code>server.port=8888</code></p>
<p>ç„¶åé‡æ–°å¯åŠ¨å°±å¯ä»¥æ›´æ¢ç«¯å£å·äº†</p>
<p>ç„¶åå®˜æ–¹å’Œç¬¬ä¸‰æ–¹æ”¯æŒå¾ˆå¤šåœºæ™¯äº†å®˜æ–¹æä¾›çš„åœºæ™¯ä¸€èˆ¬å‘½åä¸º</p>
<p>spring-boot-starter-xxxå•¥çš„ã€‚</p>
<p>ç¬¬ä¸‰æ–¹æä¾›çš„åœºæ™¯ä¸€èˆ¬å‘½åä¸º*.spring-boot-starter</p>
<h4 id="SpringBootä¸¤ä¸ªæœºåˆ¶"><a href="#SpringBootä¸¤ä¸ªæœºåˆ¶" class="headerlink" title="SpringBootä¸¤ä¸ªæœºåˆ¶"></a>SpringBootä¸¤ä¸ªæœºåˆ¶</h4><p>Springbootèƒ½è¿™ä¹ˆæ–¹ä¾¿é…ç½®ä¸»è¦æ˜¯ä¸¤ä¸ªæœºåˆ¶</p>
<h5 id="1ã€ä¾èµ–ç®¡ç†æœºåˆ¶"><a href="#1ã€ä¾èµ–ç®¡ç†æœºåˆ¶" class="headerlink" title="1ã€ä¾èµ–ç®¡ç†æœºåˆ¶"></a>1ã€ä¾èµ–ç®¡ç†æœºåˆ¶</h5><p>ä¸ºä»€ä¹ˆå¯¼å…¥starter-webæ‰€æœ‰å…³è”çš„ä¾èµ–éƒ½å¯¼å…¥è¿›æ¥ï¼Ÿ</p>
<ul>
<li>å¼€å‘ä»€ä¹ˆåœºæ™¯ï¼Œå¯¼å…¥ä»€ä¹ˆ <strong>åœºæ™¯å¯åŠ¨å™¨å°±å¥½</strong></li>
<li><strong>mavenä¾èµ–ä¼ é€’åŸåˆ™ï¼ŒAä¾èµ–Bï¼ŒBä¾èµ–Cï¼Œé‚£ä¹ˆAå°±ä¾èµ–C</strong></li>
</ul>
<p>ä¸ºä»€ä¹ˆç‰ˆæœ¬å·éƒ½ä¸ç”¨å†™ï¼Ÿ</p>
<ul>
<li>æ¯ä¸ªbooté¡¹ç›®æœ‰ä¸€ä¸ªçˆ¶é¡¹ç›®<code>spring-boot-starter-parent</code></li>
<li>parentçˆ¶é¡¹ç›®æ˜¯ <code>spring-boot-dependencies</code></li>
<li>çˆ¶é¡¹ç›® ç‰ˆæœ¬ä»²è£ä¸­å¿ƒï¼ŒæŠŠæ‰€æœ‰å¸¸è§çš„ä¾èµ–ç‰ˆæœ¬éƒ½å£°æ˜å¥½äº†ã€‚</li>
</ul>
<p>è‡ªå®šä¹‰ç‰ˆæœ¬å·</p>
<ul>
<li>åˆ©ç”¨mavençš„å°±è¿‘åŸåˆ™ï¼Œæœ‰å°±ç”¨è‡ªå®šä¹‰çš„ï¼Œæ²¡æœ‰å°±é»˜è®¤çš„ã€‚</li>
<li>ç„¶ååœ¨åŸæœ¬çš„POMé‡Œé¢è‡ªå®šä¹‰æˆ–è€…ç”¨<code>&lt;properties/&gt;</code>ä¸­å£°æ˜ç‰ˆæœ¬</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251215002318795.png" alt="image-20251215002318795"></p>
<h5 id="2ã€è‡ªåŠ¨é…ç½®æœºåˆ¶"><a href="#2ã€è‡ªåŠ¨é…ç½®æœºåˆ¶" class="headerlink" title="2ã€è‡ªåŠ¨é…ç½®æœºåˆ¶"></a>2ã€<strong>è‡ªåŠ¨é…ç½®æœºåˆ¶</strong></h5><p>åˆæ­¥ç†è§£åé¢å†ç†è§£å®Œæ•´æµç¨‹ã€‚</p>
<ul>
<li><p>è‡ªåŠ¨é…ç½®çš„Tomcatã€SpringMVCç­‰ã€‚</p>
<ul>
<li>ä»¥å‰ï¼šå†™DispatcherServletæ¥æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼ŒViewResolverå¤„ç†é¡µé¢è·³è½¬ï¼ŒCharacterEncodingFilterå¤„ç†å­—ç¬¦ç¼–ç </li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251123235925402.png" alt="image-20251123235925402"></p>
<ul>
<li>ç°åœ¨ï¼šè‡ªåŠ¨é…ç½®å¥½çš„è¿™äº›ç»„ä»¶</li>
<li>éªŒè¯ï¼šåœ¨ä¸»å…¥å£é‡Œé¢çš„<code>SpringApplication.run</code>è¿›å»çœ‹ï¼Œç„¶åå‘ç°è¿™ä¸ªæ–¹æ³•ç»™æˆ‘ä»¬è¿”å›<code>ConfigurableApplicationContext</code>,è¿™ä¸ªå…¶å®æ˜¯IOCå®¹å™¨ï¼Œç„¶åæˆ‘ä»¬åªéœ€è¦éªŒè¯è¿™ä¸ªIOCå®¹å™¨é‡Œé¢æœ‰æ²¡æœ‰è¿™äº›ç»„ä»¶å°±å¯ä»¥äº†ã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//java10 æ–°ç‰¹æ€§ï¼šå±€éƒ¨å˜é‡ç±»å‹çš„è‡ªåŠ¨æ¨æ–­</span></span><br><span class="line">        <span class="type">var</span> <span class="variable">ioc</span> <span class="operator">=</span> SpringApplication.run(MainApplication.class, args);</span><br><span class="line">        <span class="comment">//1ã€æ‰“å°IOCå®¹å™¨ä¸­çš„æ‰€æœ‰Beanå®šä¹‰åç§°</span></span><br><span class="line">        String[] beanDefinitionNames = ioc.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String beanDefinitionName : beanDefinitionNames) &#123;</span><br><span class="line">            System.out.println(beanDefinitionName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç°åœ¨å¯¼å…¥åœºæ™¯ï¼Œå®¹å™¨ä¸­å°±ä¼šè‡ªåŠ¨é…ç½®å¥½è¿™ä¸ªåœºæ™¯çš„æ ¸å¿ƒç»„ä»¶ã€‚è‡³äºä¸ºä»€ä¹ˆåé¢è¯´ã€‚</strong></p>
<ul>
<li><p>é»˜è®¤çš„åŒ…æ‰«æè§„åˆ™</p>
<ul>
<li>@SpringBootApplication æ ‡æ³¨çš„ç±»å°±æ˜¯ä¸»ç¨‹åºç±»</li>
<li>SpringBootåªä¼šæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…</li>
<li>@SpringBootApplication</li>
<li>è¿™ä¸ªåŠŸèƒ½å°±ç±»ä¼¼å¸®æˆ‘ä»¬å†™äº†component-scanï¼Œå¦‚æœæƒ³è¦é…ç½®æ‰«æ@SpringBootApplicationé‡Œé¢é…ç½®<code>@SpringBootApplication(scanBasePackages = &quot;com.bitzh&quot;</code>ï¼‰ï¼Œæˆ–è€…ç”¨<code>@ComponentScan(&quot;com.bitzh&quot;)æ³¨è§£</code></li>
</ul>
</li>
<li><p>é…ç½®é»˜è®¤å€¼</p>
<ul>
<li><strong>é…ç½®æ–‡ä»¶</strong>çš„æ‰€æœ‰é…ç½®é¡¹æ˜¯å’ŒæŸä¸ª<strong>ç±»çš„å¯¹è±¡</strong>å€¼è¿›è¡Œä¸€ ä¸€ç»‘å®šçš„</li>
<li>ç»‘å®šäº†é…ç½®æ–‡ä»¶ä¸­æ¯ä¸€é¡¹å€¼çš„ç±»ï¼š<strong>é…ç½®å±æ€§ç±»</strong></li>
<li>æ¯”å¦‚ï¼š<code>ServerProperties</code>ç»‘å®šäº†æ‰€æœ‰TomcatæœåŠ¡å™¨æœ‰å…³çš„é…ç½®</li>
<li><code>MultipartProperties</code>ç»‘å®šäº†æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„é…ç½®å…¶ä»–çš„å‚ç…§å®˜æ–¹æ–‡æ¡£</li>
</ul>
</li>
<li><p>æŒ‰éœ€åŠ è½½è‡ªåŠ¨é…ç½®</p>
<ul>
<li>å¯¼å…¥åœºæ™¯<code>spring-boot-starter-web</code></li>
<li>åœºæ™¯å¯åŠ¨å™¨é™¤äº†ä¼šå¯¼å…¥ç›¸å…³åŠŸèƒ½ä¾èµ–ä»¥å¤–è¿˜å¯¼å…¥äº†<code>spring-boot-starter</code>ï¼Œæ˜¯æ‰€æœ‰starterçš„starterï¼ŒåŸºç¡€æ ¸å¿ƒstarterï¼Œè¿™ä¸ªæœ‰ä¸ªåŒ…é‡Œé¢æœ‰ä¸ªä¾èµ–<code>spring-boot-autoconfigure</code>ï¼Œç„¶åè¿™ä¸ªåŒ…é‡Œé¢éƒ½æ˜¯å„ç§åœºæ™¯çš„<code>autoconfigure</code>ï¼Œ<strong>è‡ªåŠ¨é…ç½®ç±»</strong></li>
<li>è™½ç„¶å…¨åœºæ™¯çš„è‡ªåŠ¨é…ç½®éƒ½åœ¨<code>spring-boot-autoconfigure</code>è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯ä¸æ˜¯å…¨éƒ½å¼€å¯çš„ã€‚<ul>
<li>å¯¼å…¥å“ªä¸ªåœºæ™¯å°±å¼€å¯å“ªä¸ªåœºæ™¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong>å¯¼å…¥åœºæ™¯å¯åŠ¨å™¨ã€è§¦å‘<code>spring-boot-autoconfigure</code>è¿™ä¸ªåŒ…çš„è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆï¼Œå®¹å™¨ä¸­å°±ä¼šå…·æœ‰ç›¸å…³åœºæ™¯çš„åŠŸèƒ½</p>
</li>
</ul>
</li>
</ul>
<h4 id="æ ¸å¿ƒæŠ€èƒ½"><a href="#æ ¸å¿ƒæŠ€èƒ½" class="headerlink" title="æ ¸å¿ƒæŠ€èƒ½"></a>æ ¸å¿ƒæŠ€èƒ½</h4><p><strong>å¸¸ç”¨æ³¨è§£</strong></p>
<p>SpringBootæ‘’å¼ƒxmlé…ç½®æ–¹å¼ï¼Œæ”¹ä¸º<strong>å…¨æ³¨è§£é©±åŠ¨</strong></p>
<p>é‚£ä¹ˆå°±ä¼šæœ‰å¤§é‡çš„æ³¨è§£äº†ã€‚</p>
<h5 id="1ã€ç»„ä»¶æ³¨å†Œ"><a href="#1ã€ç»„ä»¶æ³¨å†Œ" class="headerlink" title="1ã€ç»„ä»¶æ³¨å†Œ"></a><strong>1ã€ç»„ä»¶æ³¨å†Œ</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Configuration ã€ @SpringBootConfiguration</span><br><span class="line">@Bean</span><br><span class="line">@Controllerã€@Servoceã€@Repositoryã€@Component</span><br><span class="line">@import</span><br><span class="line">@Componment</span><br></pre></td></tr></table></figure>
<p><strong>ä»¥å‰å†™ç»„ä»¶</strong></p>
<p>å…ˆåˆ›å»ºä¸ªbeanæ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//ç„¶åç”Ÿæˆsetå’Œgetæ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†™XMLé…ç½®æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ç„¶åé€šè¿‡beanæ ‡ç­¾æ³¨å†Œåˆ°å®¹å™¨ä¸­</span><br><span class="line">&lt;bean id=&quot;user&quot; class=&quot;com.bitzh.bean.User&quot;&gt;</span><br><span class="line">	&lt;property name=&quot;id&quot; value = &quot;1&quot;&gt;&lt;/property&gt;</span><br><span class="line">	&lt;property name=&quot;name&quot; value = &quot;zs&quot;&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
<p><strong>ç°åœ¨å†™ç»„ä»¶</strong></p>
<p>åˆ›å»ºä¸€ä¸ªconfigæ–‡ä»¶ï¼Œä»¥å‰çš„é…ç½®æ–‡ä»¶ï¼Œå˜æˆäº†ä¸€ä¸ªé…ç½®ç±»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span><span class="comment">//è¿™ä¸ªæ³¨è§£è·Ÿä¸‹é¢çš„ä¸€æ ·</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//æ›¿ä»£ä»¥å‰çš„é…ç½®æ–‡ä»¶,é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯å®¹å™¨ä¸­çš„ç»„ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig</span>&#123;</span><br><span class="line">	<span class="comment">//ç»„ä»¶é»˜è®¤æ˜¯å•å®ä¾‹çš„</span></span><br><span class="line">    <span class="meta">@Scope(&quot;prototype&quot;)</span><span class="comment">//å¯ä»¥é€šè¿‡è¿™ä¸ªæ³¨è§£æ¥ä»å•å®ä¾‹ç¼–ç¨‹åŸå‹æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡newéƒ½æ˜¯æ–°å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Bean(&quot;userHaHa&quot;)</span> <span class="comment">//æ›¿ä»£beanæ ‡ç­¾ï¼Œç»„ä»¶åœ¨å®¹å™¨ä¸­çš„åå­—é»˜è®¤æ˜¯æ–¹æ³•åï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°é…ç½®åå­—</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">var</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(<span class="number">1L</span>);</span><br><span class="line">        user.setName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨å°±æŠŠUseræ³¨å†Œåˆ°å®¹å™¨ä¸­äº†ã€‚</p>
<p><strong>é‚£ä¹ˆæƒ³è¦æŠŠç¬¬ä¸‰æ–¹åŒ…çš„ç»„ä»¶æ³¨å…¥åˆ°å®¹å™¨ä¸­</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€ç§ï¼šå…ˆå¯¼å…¥POMç„¶ååœ¨Configurationç±»é‡Œé¢</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> FastSqlException <span class="title function_">fastSqlException</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FastSqlException</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æœ€å¿«é€Ÿçš„ç¬¬äºŒç§ï¼Œåœ¨é…ç½®ç±»é‡Œé¢ç”¨@Importæ³¨è§£</span></span><br><span class="line"><span class="meta">@Import(FastSqlException.class)</span><span class="comment">//ç»™å®¹å™¨ä¸­æ”¾åˆ¶å®šç±»å‹çš„ç»„ä»¶ï¼Œç»„ä»¶çš„åå­—é»˜è®¤æ˜¯ç±»å</span></span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“å°†beanæ³¨å…¥åˆ°å®¹å™¨çš„æµç¨‹</strong></p>
<p>1ã€@Configura ç¼–å†™ä¸€ä¸ªé…ç½®ç±»</p>
<p>2ã€åœ¨é…ç½®ç±»ä¸­ï¼Œè‡ªå®šä¹‰æ–¹æ³•ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚é…åˆ@Beanæ³¨è§£</p>
<p>3ã€ä½¿ç”¨@Importæ³¨è§£å¯¼å…¥ç¬¬ä¸‰æ–¹Bean</p>
<h5 id="2ã€æ¡ä»¶æ³¨è§£"><a href="#2ã€æ¡ä»¶æ³¨è§£" class="headerlink" title="2ã€æ¡ä»¶æ³¨è§£"></a><strong>2ã€æ¡ä»¶æ³¨è§£</strong></h5><p>å¦‚æœæ³¨è§£åˆ¶å®šçš„æ¡ä»¶æˆç«‹ï¼Œåˆ™å‡ºå‘æŒ‡å®šè¡Œä¸º</p>
<p>@ConfitionalOnXxx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@ConditionalOnClass:å¦‚æœç±»è·¯å¾„ä¸­å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™å‡ºå‘æŒ‡å®šè¡Œä¸º</span><br><span class="line">@ConditionalOnMissingClass:å¦‚æœç±»è·¯å¾„ä¸­ä¸å­˜åœ¨è¿™ä¸ªç±»ï¼Œåˆ™å‡ºå‘æŒ‡å®šè¡Œä¸º</span><br><span class="line">@ConditionalOnBeanï¼šå¦‚æœå®¹å™¨ä¸­å­˜åœ¨Beanï¼Œåˆ™è§¦å‘æŒ‡å®šè¡Œä¸º</span><br><span class="line">@ConditionalOnMissingBean ç­‰ç­‰å¤§æ¦‚éƒ½æ˜¯è¿™ä¸ªæ„æ€</span><br></pre></td></tr></table></figure>
<p>åœºæ™¯ï¼šå¦‚æœå­˜åœ¨FastsqlExceptionè¿™ä¸ªç±»ï¼Œå°±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ªUserç»„ä»¶ï¼Œå«user01ï¼Œå¦åˆ™ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ªUserç»„ä»¶ï¼Œå«user02ã€‚å¦‚æœç³»ç»Ÿä¸­æœ‰user02è¿™ä¸ªç»„ä»¶å°±ç»™å®¹å™¨ä¸­æ”¾å¦å¤–ä¸€ä¸ªuser03ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppConfig02</span>&#123;</span><br><span class="line">    <span class="meta">@ConditionalOnClass(name=&quot;com.alibaba.druid.FastsqlException&quot;)</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ConditionalOnMissiongClass(value=&quot;com.alibaba.druid.FastsqlException&quot;)</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@ConditionalOnBean(value = User.class)</span></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">user03</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3ã€å±æ€§ç»‘å®š"><a href="#3ã€å±æ€§ç»‘å®š" class="headerlink" title="3ã€å±æ€§ç»‘å®š"></a><strong>3ã€å±æ€§ç»‘å®š</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@ConfigurationPropertiesï¼šå£°æ˜ç»„ä»¶çš„å±æ€§å’Œé…ç½®æ–‡ä»¶å“ªäº›å‰ç¼€å¼€å§‹é¡¹è¿›è¡Œç»‘å®š</span><br><span class="line">@EnableConfigurationPropertiesï¼šå¿«é€Ÿæ³¨å†Œç»„ä»¶æ³¨è§£ï¼Œç”¨äºå¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…çš„ç»„ä»¶è¿›è¡Œå±æ€§ç»‘å®š</span><br><span class="line">SpringBooté»˜è®¤åªæ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ï¼Œå¦‚æœå¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œå³ä½¿@Component\@ConfigurationPropertiesä¹Ÿæ²¡ç”¨</span><br><span class="line"></span><br><span class="line">å°†å®¹å™¨ä¸­ä»»æ„ç»„ä»¶çš„å±æ€§å€¼å’Œé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹è¿›è¡Œç»‘å®šã€‚</span><br><span class="line">1ã€ç»™å®¹å™¨æ³¨å†Œç»„ä»¶ ç”¨@Bean+@Configuration</span><br><span class="line">2ã€ä½¿ç”¨@ConfigurationProperties å£°æ˜ç»„ä»¶å’Œé…ç½®æ–‡ä»¶çš„å“ªäº›é…ç½®é¡¹è¿›è¡Œç»‘å®š</span><br><span class="line">ç¬¬ä¸€ç§ï¼šç”¨@Component</span><br><span class="line">é¦–å…ˆåœ¨é…ç½®æ–‡ä»¶application.propertiesé‡Œé¢ç¼–å†™</span><br><span class="line">å‡å¦‚</span><br><span class="line">user.id=1</span><br><span class="line">user.name=zs</span><br><span class="line">ç„¶åå†™Userç±»</span><br><span class="line">@Component</span><br><span class="line">@ConfigurationProperties(prefix = &quot;user&quot;)</span><br><span class="line">public class UserProperties &#123;</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line">    ç„¶åä¸€å †setå’Œgetæ–¹æ³•</span><br><span class="line">&#125;</span><br><span class="line">ç¬¬äºŒç§ï¼šç”¨@EnableConfigurationProperties</span><br><span class="line">user.id=1</span><br><span class="line">user.name=zs</span><br><span class="line">ç„¶ååœ¨ç±»ä¸­åªç”¨åŠ </span><br><span class="line">@ConfigurationProperties(prefix = &quot;user&quot;)</span><br><span class="line">public class UserProperties &#123;</span><br><span class="line">    private Long id;</span><br><span class="line">    private String name;</span><br><span class="line">    ç„¶åä¸€å †setå’Œgetæ–¹æ³•</span><br><span class="line">&#125;</span><br><span class="line">æœ€ååœ¨é…ç½®ç±»æˆ–è€…ä¸»å¯åŠ¨ç”¨@EnableConfigurationProperties()</span><br><span class="line">@EnableConfigurationProperties(User.class)</span><br><span class="line">public class AppConfig &#123;</span><br><span class="line">    // å¯ä»¥æ”¾å…¶ä»–@Bean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Springbootå¯¼å…¥å®Œæ•´æµç¨‹"><a href="#Springbootå¯¼å…¥å®Œæ•´æµç¨‹" class="headerlink" title="Springbootå¯¼å…¥å®Œæ•´æµç¨‹"></a>Springbootå¯¼å…¥å®Œæ•´æµç¨‹</h4><p>1ã€SpringBootæ€ä¹ˆå®ç°å¯¼å…¥ä¸€ä¸ªstarterã€å†™ä¸€äº›ç®€å•é…ç½®ï¼Œåº”ç”¨å°±èƒ½è·‘èµ·æ¥ï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒæ•´åˆã€‚</p>
<p>2ã€ä¸ºä»€ä¹ˆTomcatçš„ç«¯å£å·å¯ä»¥é…ç½®åœ¨application.propertiesä¸­ï¼Œå¹¶ä¸”tomcatèƒ½å¯åŠ¨æˆåŠŸ</p>
<p>3ã€å¯¼å…¥åœºæ™¯åå“ªäº›è‡ªåŠ¨é…ç½®èƒ½ç”Ÿæ•ˆï¼Ÿ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251216185522689.png" alt="image-20251216185522689"></p>
<p><strong>æµç¨‹ï¼š</strong></p>
<h5 id="1ã€å¯¼å…¥starter-webï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯"><a href="#1ã€å¯¼å…¥starter-webï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯" class="headerlink" title="1ã€å¯¼å…¥starter-webï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯"></a><strong>1ã€å¯¼å…¥<code>starter-web</code>ï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯</strong></h5><ul>
<li>1ã€åœºæ™¯å¯åŠ¨å™¨å¯¼å…¥äº†ç›¸å…³åœºæ™¯çš„æ‰€æœ‰ä¾èµ–ï¼š<code>starter-json</code>ã€<code>starter-tomcat</code>ã€<code>springmvc</code></li>
<li>2ã€æ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½å¼•å…¥äº†ä¸€ä¸ª<code>spring-boot-starter</code>ï¼Œ<strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</strong></li>
<li>3ã€<strong>æ ¸å¿ƒåœºæ™¯å¯åŠ¨å™¨</strong>å¼•å…¥äº†<code>springb-boot-autoconfiguration</code>åŒ…ã€‚</li>
<li>4ã€<code>springb-boot-autoconfiguration</code>é‡Œé¢å›Šæ‹¬äº†æ‰€æœ‰åœºæ™¯çš„æ‰€æœ‰é…ç½®ã€‚</li>
<li>5ã€åªè¦è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç±»éƒ½èƒ½ç”Ÿæ•ˆï¼Œé‚£ä¹ˆç›¸å½“äºSpringBootå®˜æ–¹å†™å¥½çš„æ•´åˆåŠŸèƒ½å°±èƒ½ç”Ÿæ•ˆã€‚</li>
<li>6ã€SpringBooté»˜è®¤æ‰«æä¸åˆ°<code>springb-boot-autoconfiguration</code>ä¸‹å†™å¥½çš„æ‰€æœ‰é…ç½®ç±»ã€‚ï¼ˆè¿™äº›é…ç½®ç±»ç»™æˆ‘ä»¬åšäº†æ•´åˆæ“ä½œï¼‰</li>
</ul>
<p>æ€»ç»“ï¼šå¯¼åŒ…çš„è¿‡ç¨‹å°±æ˜¯å¯¼å…¥äº†<code>springb-boot-autoconfiguration</code>ï¼Œç„¶åé‡Œé¢çš„é…ç½®ç±»éƒ½å¼•å…¥äº†ï¼Œè‡³äºç”Ÿä¸ç”Ÿæ•ˆçœ‹åé¢çš„ã€‚</p>
<h5 id="2ã€ä¸»ç¨‹åºï¼š-SpringBootApplication"><a href="#2ã€ä¸»ç¨‹åºï¼š-SpringBootApplication" class="headerlink" title="2ã€ä¸»ç¨‹åºï¼š@SpringBootApplication"></a><strong>2ã€ä¸»ç¨‹åºï¼š@SpringBootApplication</strong></h5><ul>
<li>1ã€<code>@SpringBootApplication</code>ç”±ä¸‰ä¸ªæ³¨è§£ç»„æˆ<code>@SpringBootConfiguration</code>ã€<code>@EnableAutoConfiguration</code>ã€<code>@ComponentScan</code></li>
<li>2ã€SpringBooté»˜è®¤åªèƒ½æ‰«æè‡ªå·±ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶ä¸‹é¢çš„å­åŒ…ï¼Œæ‰«æä¸åˆ°<code>spring-boot-autoconfigure</code>åŒ…ä¸­å®˜æ–¹å†™å¥½çš„é…ç½®ç±»ã€‚</li>
<li>3ã€<code>@EnableAutoConfiguration</code>è¿™ä¸ªæ³¨è§£å°±æ˜¯SpringBootå¼€å¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒï¼Œ<ul>
<li>1ã€æ˜¯ç”±<code>@Import(AutoConfigurationImportSelector.class)æä¾›åŠŸèƒ½</code>æ‰¹é‡ç»™å®¹å™¨ä¸­å¯¼å…¥ç»„ä»¶ã€‚</li>
<li>2ã€SpringBootå¯åŠ¨ä¼šé»˜è®¤åŠ è½½152ä¸ªé…ç½®ç±»ã€‚</li>
<li>3ã€è¿™152ä¸ªé…ç½®ç±»ï¼Œæ¥è‡ªäº<code>MET-IF</code>ä¸€ä¸ªè·¯å¾„ä¸­çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å¯¼å…¥çš„åŒ…çš„ï¼Œç„¶åé‡Œé¢æœ‰æ–‡ä»¶é…ç½®å¥½152ä¸ªæ–‡ä»¶æŒ‡å®š</li>
<li>é¡¹ç›®å¯åŠ¨çš„æ—¶å€™åˆ©ç”¨<code>@Import</code>æ‰¹é‡å¯¼å…¥ç»„ä»¶æœºåˆ¶æŠŠautoconfigureåŒ…ä¸‹çš„152ä¸ªè‡ªåŠ¨å¯¼å…¥ç±»å¯¼å…¥è¿›æ¥</li>
<li>è¿™äº›è‡ªåŠ¨é…ç½®ç±»é‡Œé¢ä¼šæœ‰@Beanæ”¾ä¸€å †ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å°±èƒ½å·¥ä½œäº†</li>
</ul>
</li>
</ul>
<p>æ€»ç»“ï¼šSpringBooté»˜è®¤åªæ‰«æä¸»ç¨‹åºçš„é…ç½®ç±»ï¼Œç„¶ååˆ©ç”¨<code>@SpringBootApplication</code>æ³¨è§£é‡Œé¢çš„<code>@EnableAutoConfiguration</code>æ³¨è§£é‡Œé¢çš„<code>@Import</code>æ³¨è§£å¯¼å…¥çš„152ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¹Ÿæ‰«æäº†ã€‚è‡ªåŠ¨é…ç½®ç±»éƒ½å¯¼å…¥äº†ä½†æ˜¯ä¸ä¸€å®šç”Ÿæ•ˆï¼Œé‡Œé¢æœ‰<code>@ConditionalOnClass</code>åˆ¤æ–­ï¼Œå¦‚æœæœ‰è¿™äº›ç±»ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚</p>
<h5 id="3ã€è‡ªåŠ¨é…ç½®ç±»"><a href="#3ã€è‡ªåŠ¨é…ç½®ç±»" class="headerlink" title="3ã€è‡ªåŠ¨é…ç½®ç±»"></a>3ã€è‡ªåŠ¨é…ç½®ç±»</h5><ul>
<li>1ã€<strong>ç»™å®¹å™¨ä¸­ä½¿ç”¨@Beanæ”¾ä¸€å †ç»„ä»¶</strong></li>
<li>2ã€æ¯ä¸ª <strong>è‡ªåŠ¨é…ç½®ç±»</strong>éƒ½å¯èƒ½æœ‰è¿™ä¸ªæ³¨è§£<code>@EnableAutoConfiguration(ServerProperties.class)</code>ç”¨æ¥æŠŠé…ç½®æ–‡ä»¶ä¸­é…çš„æŒ‡å®šå‰ç½®å±æ€§å°è£…åˆ°<code>xxxProperties</code> <strong>å±æ€§ç±»</strong>ä¸­ã€</li>
<li>ä»¥Tomcatä¸ºä¾‹å­ï¼šæŠŠæœåŠ¡å™¨çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯ä»¥<code>server</code>å¼€å¤´çš„ï¼Œé…ç½®éƒ½å°è£…åˆ°äº†å±æ€§ç±»ä¸­ã€‚</li>
</ul>
<h5 id="4ã€å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚æŠŠæ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰ã€‚"><a href="#4ã€å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚æŠŠæ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰ã€‚" class="headerlink" title="4ã€å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚æŠŠæ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰ã€‚"></a>4ã€å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚æŠŠæ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰ã€‚</h5><p><strong>æ ¸å¿ƒæµç¨‹ï¼š</strong></p>
<p>1ã€å¯¼å…¥starterï¼Œç„¶åå°±ä¼šå¯¼å…¥<code>autoconfigure</code>åŒ…ã€‚</p>
<p>2ã€<code>autoconfigure</code>åŒ…é‡Œé¢æœ‰ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œé¢æŒ‡å®šäº†æ‰€æœ‰å¯åŠ¨è¦åŠ è½½çš„<strong>è‡ªåŠ¨é…ç½®ç±»</strong>ã€‚</p>
<p>3ã€<code>@EnableAutoConfiguration</code>ä¼šè‡ªåŠ¨çš„æŠŠä¸Šé¢è‡ªåŠ¨é…ç½®ç±»æ–‡ä»¶é‡Œé¢å†™çš„æ‰€æœ‰<strong>è‡ªåŠ¨é…ç½®ç±»éƒ½å¯¼å…¥è¿›æ¥</strong>ã€‚<strong>xxxAutoConfigureation</strong> æ˜¯æœ‰æ¡ä»¶æ³¨è§£è¿›è¡ŒæŒ‰éœ€åŠ è½½</p>
<p>4ã€è¿™äº›å¯¼å…¥çš„<strong>xxxAutoConfigureation</strong> åˆç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€å †ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æœ‰152ä¸ªï¼Œç»„ä»¶éƒ½æ˜¯ä»<code>xxxProperties</code>ä¸­æå–å±æ€§å€¼</p>
<p>5ã€<code>xxxProperties</code>åˆæ˜¯å’Œé…ç½®æ–‡ä»¶è¿›è¡Œç»‘å®šã€‚</p>
<p>æ•ˆæœï¼šå¯¼å…¥staterã€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±èƒ½ä¿®æ”¹åº•å±‚è¡Œä¸ºã€‚</p>
<p><strong>å¦‚ä½•å­¦å¥½SpringBoot</strong></p>
<p>æ¡†æ¶çš„æ¡†æ¶ï¼Œåº•å±‚åŸºäºSpringã€‚èƒ½è°ƒæ•´æ¯ä¸€ä¸ªåœºæ™¯çš„åº•å±‚è¡Œä¸ºã€‚100%é¡¹ç›®ä¸€å®šä¼šç”¨åˆ°åº•å±‚è‡ªå®šä¹‰</p>
<p>ç±»ä¼¼äºæ‘„å½±ï¼š</p>
<p>å‚»ç“œç…§ç›¸æœºï¼šè‡ªåŠ¨é…ç½®å¥½</p>
<p>å•åï¼šæ•™å…·ã€å…‰åœˆã€å¿«é—¨ã€æ„Ÿå…‰åº¦â€¦.</p>
<p>å‚»ç“œ+å•åï¼š</p>
<p>1ã€ç†è§£ <strong>è‡ªåŠ¨é…ç½®åŸç†</strong></p>
<p>â€‹    a.å¯¼å…¥starter -&gt; ç”Ÿæ•ˆxxxAutoConfiguration -&gt; ç»„ä»¶ -&gt; xxxProperties -&gt; é…ç½®æ–‡ä»¶</p>
<p>2ã€ç†è§£ <strong>å…¶ä»–æ¡†æ¶åº•å±‚</strong></p>
<p>â€‹    a.æ‹¦æˆªå™¨</p>
<p>3ã€å¯ä»¥éšæ—¶ <strong>å®šåˆ¶åŒ–ä»»ä½•ç»„ä»¶</strong></p>
<p>â€‹    a.é…ç½®æ–‡ä»¶</p>
<p>â€‹    b.è‡ªå®šä¹‰ç»„ä»¶</p>
<p><strong>æ ¸å¿ƒï¼š</strong>è¿™ä¸ªåœºæ™¯è‡ªåŠ¨é…ç½®å¯¼å…¥äº†å“ªäº›ç»„ä»¶ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½Autowiredè¿›æ¥ä½¿ç”¨ï¼Œå¦‚æœç”¨ä¸äº†ï¼Œèƒ½ä¸èƒ½é€šè¿‡ä¿®æ”¹é…ç½®ï¼Œæ”¹å˜ç»„ä»¶çš„ä¸€äº›é»˜è®¤å‚æ•°ï¼Œéœ€ä¸éœ€è¦è‡ªå·±å®Œå…¨å®šä¹‰è¿™ä¸ªç»„ä»¶ï¼Œ<strong>åœºæ™¯å®šåˆ¶åŒ–</strong>éå¸¸é‡è¦ã€‚</p>
<p><strong>æœ€ä½³å®æˆ˜ï¼š</strong></p>
<ul>
<li>é€‰åœºæ™¯ï¼šå¯¼å…¥åˆ°é¡¹ç›®<ul>
<li>å®˜æ–¹ï¼šstarter</li>
<li>ç¬¬ä¸‰æ–¹ï¼šå»ä»“åº“æœ</li>
</ul>
</li>
<li>å†™é…ç½®ï¼šæ”¹é…ç½®æ–‡ä»¶å…³é”®é¡¹<ul>
<li>æ•°æ®åº“å‚æ•°ï¼ˆé“¾æ¥åœ°å€ï¼Œè´¦å·å¯†ç ç­‰ï¼‰</li>
</ul>
</li>
<li>åˆ†æè¿™ä¸ªåœºæ™¯ç»™æˆ‘ä»¬å¯¼å…¥äº†å“ªäº›èƒ½ç”¨çš„ç»„ä»¶<ul>
<li>è‡ªåŠ¨è£…é…è¿™äº›ç»„ä»¶è¿›è¡Œåç»­ä½¿ç”¨</li>
<li>ä¸æ»¡æ„Bootæä¾›çš„è‡ªåŠ¨é…å¥½çš„ç»„ä»¶<ul>
<li>å®šåˆ¶åŒ–<ul>
<li>æ”¹é…ç½®</li>
<li>è‡ªå®šä¹‰ç»„ä»¶</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>æ•´åˆredisä¸ºæ¡ˆä¾‹</strong></p>
<ul>
<li><p>é€‰åœºæ™¯ï¼šå®˜æ–¹æä¾›äº†ï¼Œç›´æ¥å¯¼å…¥<code>spring-boot-starter-date-redis</code></p>
</li>
<li><p>å†™é…ç½®ï¼šç„¶åå»çœ‹RedisAutoConfigurationé‡Œé¢ç„¶åçœ‹åˆ°é‡Œé¢çš„EnableConfigurationPropertiesï¼Œç„¶åå‘ç°é‡Œé¢çš„é…ç½®éƒ½å†™åœ¨RedisProperties.classé‡Œé¢ï¼Œç„¶åè¿›å»é…ç½®æ–‡ä»¶çœ‹çœ‹æœ‰å“ªäº›é…ç½®ã€‚</p>
</li>
<li><p>åˆ†æç»„ä»¶</p>
<ul>
<li>åˆ†æåˆ°RedisAutoConfigurationç»™å®¹å™¨ä¸­æ”¾äº†<code>StringRedisTemplete</code></li>
<li>ç»™ä¸šåŠ¡ä»£ç ä¸­è‡ªåŠ¨è£…é…<code>StringRedisTemplete</code></li>
</ul>
</li>
<li><p>å®šåˆ¶åŒ–</p>
<ul>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶</li>
<li>è‡ªå®šä¹‰ç»„ä»¶ï¼Œè‡ªå·±ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>StringRedisTemplete</code></li>
</ul>
</li>
</ul>
<h4 id="YAMLé…ç½®æ–‡ä»¶"><a href="#YAMLé…ç½®æ–‡ä»¶" class="headerlink" title="YAMLé…ç½®æ–‡ä»¶"></a><strong>YAMLé…ç½®æ–‡ä»¶</strong></h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#k: v #è¿™ä¸ªæ˜¯æ³¨é‡Šï¼Œå¤§å°å†™æ•æ„Ÿï¼Œk: vä¸­é—´æœ‰ç©ºæ ¼ï¼Œå±æ€§æœ‰å±‚çº§å…³ç³»ï¼Œä¸‹ä¸€è¡Œå°±æ˜¯å­å±æ€§</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9999</span></span><br></pre></td></tr></table></figure>
<p>æ”¯æŒçš„å†™æ³•ï¼š</p>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Dog dog; <span class="comment">//åµŒå¥—å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> Date birthDay;<span class="comment">//æ—¥æœŸç±»</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; text;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Dog&gt; dogs;<span class="comment">//æ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Dog&gt; cats;<span class="comment">//è¡¨ç¤ºMap</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆè¿™ä¸ªæƒ³è¦ç”¨YMLç»‘å®š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">	<span class="attr">name:</span> <span class="string">å¼ ä¸‰</span></span><br><span class="line">	<span class="attr">age:</span> <span class="number">18</span></span><br><span class="line">	<span class="attr">birthDay:</span> <span class="number">2010</span><span class="string">/10/12</span> <span class="number">12</span><span class="string">:12:12</span></span><br><span class="line">	<span class="attr">text:</span> [<span class="string">&quot;abcx&quot;</span>,<span class="string">&quot;der&quot;</span>]</span><br><span class="line">	<span class="attr">dog:</span></span><br><span class="line">		<span class="attr">name:</span> <span class="string">lisi</span></span><br><span class="line">		<span class="attr">age:</span> <span class="number">12</span></span><br><span class="line">     <span class="attr">dogs:</span></span><br><span class="line">     	<span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dog1</span></span><br><span class="line">     	  <span class="attr">age:</span> <span class="number">1</span></span><br><span class="line">     	<span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dog2</span></span><br><span class="line">     	  <span class="attr">age:</span> <span class="number">2</span></span><br><span class="line">     <span class="attr">cats:</span></span><br><span class="line">     	<span class="attr">d1:</span> </span><br><span class="line">     		<span class="attr">name:</span> <span class="string">å°è“</span></span><br><span class="line">     		<span class="attr">age:</span> <span class="number">3</span></span><br><span class="line">     	<span class="attr">d2:</span> &#123;<span class="attr">name:</span> <span class="string">å°ç»¿</span>,<span class="attr">age:</span> <span class="number">4</span>&#125;	</span><br></pre></td></tr></table></figure>
<p><strong>å°ç»†èŠ‚</strong></p>
<p>1ã€ç¬¦åˆé©¼å³°å‘½åçš„åå­—æ¨èå†™æˆï¼šbirth-day</p>
<p>2ã€æ–‡æœ¬ï¼šå•å¼•å·ä¸ä¼šè½¬ä¹‰æ¯”å¦‚\nå°±æ˜¯æ™®é€šå­—ç¬¦ï¼Œä½†æ˜¯åŒå¼•å·ä¼šè½¬ä¹‰ä¼šè¯†åˆ«æˆæ¢è¡Œç¬¦</p>
<p>3ã€çŸ­ç«–çº¿ä¸‹é¢çš„æ–‡æœ¬å¯ä»¥å­˜å‚¨å¤§æ–‡æœ¬ | ä¼šä¿ç•™æ–‡æœ¬æ ¼å¼</p>
<p>4ã€ç”¨&gt; è¡¨ç¤ºå¤§æ–‡æœ¬ï¼Œä¼šå‹ç¼© æ¢è¡Œå˜æˆç©ºæ ¼</p>
<p>5ã€ç”¨ä¸‰ä¸ª - å¯ä»¥åˆ†éš”æ–‡æ¡£æ›´ç¾è§‚</p>
<h4 id="æ—¥å¿—é…ç½®"><a href="#æ—¥å¿—é…ç½®" class="headerlink" title="æ—¥å¿—é…ç½®"></a><strong>æ—¥å¿—é…ç½®</strong></h4><p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¢³ç†æ¸…æ¥šå¸‚é¢ä¸Šçš„æ—¥å¿—æ¡†æ¶ï¼Œç„¶åè¦ç†æ¸…è§„èŒƒï¼Œ <strong>é¡¹ç›®å¼€å‘ä¸è¦ç¼–å†™soutï¼Œåº”è¯¥ç”¨æ—¥å¿—è®°å½•ä¿¡æ¯</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251217194550374.png" alt="image-20251217194550374"></p>
<p><strong>æ—¥å¿—é—¨é¢</strong>ï¼Œå°±åƒå®ƒçš„åå­—ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªâ€œæ¥å£å±‚â€æˆ–â€œç»Ÿä¸€å…¥å£â€ï¼Œå®ƒ<strong>ä¸è´Ÿè´£å®é™…çš„æ—¥å¿—è¾“å‡º</strong>ï¼Œè€Œæ˜¯æä¾›ä¸€å¥—<strong>æ ‡å‡†çš„ API</strong>ï¼Œè®©å¼€å‘è€…å¯ä»¥ä½¿ç”¨ä¸€è‡´çš„æ–¹å¼å†™æ—¥å¿—ä»£ç ã€‚</p>
<p><strong>æ—¥å¿—å®ç°</strong>å°±æ˜¯çœŸæ­£å¹²æ´»çš„ç»„ä»¶ï¼Œå®ƒè´Ÿè´£ï¼š</p>
<ul>
<li>æŠŠæ—¥å¿—æ¶ˆæ¯æ ¼å¼åŒ–</li>
<li>å†³å®šè¾“å‡ºåˆ°æ§åˆ¶å°ã€æ–‡ä»¶ã€ç½‘ç»œç­‰</li>
<li>æ§åˆ¶æ—¥å¿—çº§åˆ«ï¼ˆdebug/info/warn/errorï¼‰</li>
<li>ç®¡ç†æ—¥å¿—æ»šåŠ¨ã€å½’æ¡£ç­‰</li>
</ul>
<p>Springä½¿ç”¨commons-loggingä½œä¸ºå†…éƒ¨æ—¥å¿—ï¼Œä½†åº•å±‚æ—¥å¿—å®ç°æ˜¯å¼€æ”¾çš„ã€‚å¯å¯¹æ¥å…¶ä»–æ—¥å¿—æ¡†æ¶ã€‚</p>
<p><strong>Spring5ä»¥åcommons-loggingè¢«springç›´æ¥è‡ªå·±å†™äº†</strong>ã€‚åº•å±‚æ˜¯æœ‰åˆ¤æ–­é€»è¾‘çš„ï¼Œå¦‚æœå¯¼å…¥Log4jå°±ç”¨Log4jç­‰ç­‰ã€‚</p>
<p>Springboog3æ”¯æŒjulï¼Œlog4j2ï¼Œlogbackã€‚SpringBootæä¾›äº†é»˜è®¤çš„æ§åˆ¶å°è¾“å‡ºé…ç½®ï¼Œä¹Ÿå¯ä»¥é…ç½®è¾“å‡ºä¸ºæ–‡ä»¶ã€‚Logbackæ˜¯é»˜è®¤ä½¿ç”¨çš„ã€‚</p>
<p>è™½ç„¶æ—¥å¿—æ¡†æ¶å¾ˆå¤šï¼Œä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨SpringBootçš„é»˜è®¤é…ç½®å°±èƒ½å·¥ä½œçš„å¾ˆå¥½ã€‚</p>
<p><strong>SpringBootæ˜¯æ€ä¹ˆæŠŠæ—¥å¿—é»˜è®¤é…ç½®å¥½çš„</strong></p>
<p>é¦–å…ˆpomä¾èµ–ä¼šå¯¼å…¥åœºæ™¯ï¼Œæ¯”å¦‚webåœºæ™¯ï¼Œç„¶åæ¯ä¸ªåœºæ™¯å¯åŠ¨å™¨éƒ½ä¼šæœ‰spring-boot-starterã€‚</p>
<p>ç„¶ååœ¨æ ¸å¿ƒåœºæ™¯é‡Œé¢ï¼Œå¼•å…¥äº†æ—¥å¿—çš„æ‰€æœ‰åŠŸèƒ½spring-boot-starter-logging</p>
<p>é»˜è®¤ä½¿ç”¨Logback + sl4j ç»„åˆä½œä¸ºé»˜è®¤åº•å±‚æ—¥å¿—</p>
<p>ä»¥å‰è¯´è‡ªåŠ¨é…ç½®éƒ½åœ¨AutoConfigureé‡Œé¢ï¼Œä½†æ˜¯æ—¥å¿—æ˜¯ç³»ç»Ÿä¸€å¯åŠ¨å°±è¦ç”¨çš„ï¼Œè€ŒxxxAutoConfigureationæ˜¯ç³»ç»Ÿå¯åŠ¨å¥½äº†ä»¥åæ”¾å¥½çš„ç»„ä»¶ï¼Œåæ¥ç”¨çš„ã€‚</p>
<p>æ—¥å¿—æ˜¯åˆ©ç”¨ç›‘å¬å™¨æœºåˆ¶é…ç½®å¥½çš„ã€‚<code>ApplicationListener</code>ã€‚</p>
<p>æ—¥å¿—æ‰€æœ‰çš„é…ç½®éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶å®ç°ã€‚ä»¥loggingå¼€å§‹çš„æ‰€æœ‰é…ç½®éƒ½æ˜¯æ—¥å¿—çš„é…ç½®ã€‚</p>
<p><strong>æ ¸å¿ƒçš„ç›‘å¬å™¨æœºåˆ¶åé¢è¯¦ç»†è¯´</strong></p>
<h5 id="æ—¥å¿—æ ¼å¼"><a href="#æ—¥å¿—æ ¼å¼" class="headerlink" title="æ—¥å¿—æ ¼å¼"></a><strong>æ—¥å¿—æ ¼å¼</strong></h5><p>é»˜è®¤è¾“å‡ºæ ¼å¼ï¼š</p>
<ul>
<li>æ—¶é—´å’Œæ—¥æœŸï¼šæ¯«ç§’çº§ç²¾åº¦</li>
<li>æ—¥å¿—çº§åˆ«ï¼šERRORã€WARNã€INFOã€DEBUGã€or TRACE</li>
<li>è¿›ç¨‹ID</li>
<li><code>---</code>ï¼šæ¶ˆæ¯åˆ†éš”ç¬¦</li>
<li>çº¿ç¨‹åï¼šä½¿ç”¨ã€ã€‘åŒ…å«</li>
<li>Loggeråï¼šé€šå¸¸æ˜¯äº§ç”Ÿæ—¥å¿—çš„ç±»å</li>
<li>æ¶ˆæ¯ï¼šæ—¥å¿—è®°å½•çš„å†…å®¹</li>
</ul>
<p>æ³¨æ„ï¼šLogbackæ²¡æœ‰FATALçº§åˆ«ï¼Œå¯¹åº”çš„æ˜¯ERROR</p>
<p>é»˜è®¤å€¼ï¼šå‚ç…§<code>spring-boot</code>åŒ…<code>additional-spring-configuration-metadata.json</code>æ–‡ä»¶</p>
<p>å¯ä¿®æ”¹ä¸ºï¼š<code>%d&#123;yyyy-MM-dd HH:mm:ss&#125; %-5level [%thread] %logger&#123;15&#125; ===&gt; %msg%n</code></p>
<p>æˆ–è€…åœ¨cmdå‘½ä»¤é‡Œé¢åˆ©ç”¨javaçš„jdkå‘½ä»¤jpsä¹Ÿèƒ½çœ‹è¿è¡Œçš„è¿›ç¨‹</p>
<h5 id="å›å½’åˆ°ä½¿ç”¨"><a href="#å›å½’åˆ°ä½¿ç”¨" class="headerlink" title="å›å½’åˆ°ä½¿ç”¨"></a><strong>å›å½’åˆ°ä½¿ç”¨</strong></h5><p>å¦‚æœæƒ³åœ¨ä¸šåŠ¡é‡Œé¢å†™æ—¥å¿—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span>&#123;</span><br><span class="line">    <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(getClass());<span class="comment">//æ—¥å¿—è®°å½•å™¨</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping(&quot;/h&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;hahaha,æ–¹æ³•è¿›æ¥äº†&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æˆ–è€…å¯¼å…¥lombokç„¶åç”¨æ³¨è§£ç›´æ¥è·å¾—æ—¥å¿—è®°å½•å™¨</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/h&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;hahaha,æ–¹æ³•è¿›æ¥äº†&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="æ—¥å¿—çº§åˆ«"><a href="#æ—¥å¿—çº§åˆ«" class="headerlink" title="æ—¥å¿—çº§åˆ«"></a><strong>æ—¥å¿—çº§åˆ«</strong></h5><p>ç”±ä½åˆ°é«˜ï¼šALLã€TRACEã€DEBUGã€INFOã€WARNã€ERRORã€FATALã€OFF</p>
<ul>
<li>åªä¼šæ‰“å°åˆ¶å®šçº§åˆ«ä»¥åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—</li>
<li>ALLï¼šæ‰“å°æ‰€æœ‰æ—¥å¿—</li>
<li>TRACEï¼šè¿½è¸ªæ¡†æ¶è¯¦ç»†æµç¨‹æ—¥å¿—ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</li>
<li>DEBUGï¼šå¼€å‘è°ƒè¯•ç»†èŠ‚æ—¥å¿—</li>
<li>INFOï¼šå…³é”®ï¼Œæ„Ÿå…´è¶£ä¿¡æ¯æ—¥å¿—</li>
<li>WARNï¼šè­¦å‘Šä½†ä¸æ˜¯é”™è¯¯çš„ä¿¡æ¯æ—¥å¿—ï¼Œæ¯”å¦‚ï¼šç‰ˆæœ¬è¿‡æ—¶</li>
<li>ERRORï¼šä¸šåŠ¡é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚å‡ºç°å„ç§å¼‚å¸¸</li>
<li>FATALï¼šä¹‹å‘½é”™è¯¯æ—¥å¿—ï¼Œæ¯”å¦‚jvmç³»ç»Ÿå´©æºƒ</li>
<li>OFFï¼šå…³é—­æ‰€æœ‰æ—¥å¿—è®°å½•</li>
</ul>
<p>ä¸æŒ‡å®šçº§åˆ«çš„æ‰€æœ‰ç±»ï¼Œéƒ½æ˜¯ç”¨rootåˆ¶å®šçš„çº§åˆ«ä½œä¸ºé»˜è®¤çº§åˆ«</p>
<p>SpringBootæ—¥å¿—é»˜è®¤çº§åˆ«æ˜¯INFO</p>
<p>1ã€åœ¨application.ymlä¸­é…ç½®logging.levelåˆ¶å®šæ—¥å¿—çº§åˆ«</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é»˜è®¤æ‰€æœ‰æ—¥å¿—æ²¡æœ‰ç²¾ç¡®æŒ‡å®šçº§åˆ«å°±ä½¿ç”¨rootçš„é»˜è®¤çº§åˆ«</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">	<span class="attr">level:</span></span><br><span class="line">		<span class="attr">root:</span> <span class="string">info</span> <span class="comment">#é»˜è®¤info</span></span><br><span class="line"><span class="comment">#å¦‚æœæƒ³ç²¾ç¡®æŒ‡å®šå“ªä¸ªåŒ…æŒ‡å®šå“ªä¸ªçº§åˆ«</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">	<span class="attr">level:</span></span><br><span class="line">		<span class="attr">com.bitzh.logging.controller:</span> <span class="string">warn</span></span><br><span class="line"><span class="comment">#åç»­å¤ªç²¾ç¡®æ¯ä¸ªåŒ…è®¾è®¡æ—¥å¿—çº§åˆ«ä¼šå¤ªéº»çƒ¦ï¼Œæ‰€ä»¥æä¾›åˆ†ç»„</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">	<span class="attr">group:</span></span><br><span class="line">		<span class="attr">abc:</span> <span class="string">com.bitzh.logging.controller,com.bitzh.logging.service</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">	<span class="attr">level:</span></span><br><span class="line">		<span class="attr">abc:</span> <span class="string">info</span></span><br><span class="line"><span class="comment">#springbootè¿˜ç»™æˆ‘ä»¬åˆ†äº†sqlå’Œwebç»„</span></span><br></pre></td></tr></table></figure>
<p>2ã€levelå¯å–å€¼èŒƒå›´</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/h&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(String a)</span>&#123;</span><br><span class="line">        log.trace(<span class="string">&quot;traceæ—¥å¿—&quot;</span>)</span><br><span class="line">        log.debug(<span class="string">&quot;debugæ—¥å¿—&quot;</span>);</span><br><span class="line">        <span class="comment">//SpringBootåº•å±‚é»˜è®¤çš„æ—¥å¿—çº§åˆ«æ˜¯infoï¼Œåªä¼šæ‰“å°infoåŠä»¥åçš„</span></span><br><span class="line">        log.info(<span class="string">&quot;hahaha,æ–¹æ³•è¿›æ¥äº†&quot;</span>);</span><br><span class="line">        log.warn(<span class="string">&quot;warnæ—¥å¿—&quot;</span>);</span><br><span class="line">        log.error(<span class="string">&quot;erroræ—¥å¿—&quot;</span>);</span><br><span class="line">        <span class="comment">//å¦‚æœæƒ³çœ‹açš„å‚æ•°</span></span><br><span class="line">        log.info(<span class="string">&quot;a&#123;&#125;&quot;</span>,a);<span class="comment">//è¿™æ ·å°±èƒ½çœ‹åˆ°açš„å‚æ•°</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ã€åˆ¶å®šæ—¥å¿—æ–‡ä»¶</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">	<span class="attr">file:</span></span><br><span class="line">		<span class="attr">path:</span> <span class="string">D:\\demo.log</span> <span class="comment">#æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„,å¦‚æœpathå’Œnameéƒ½æœ‰å°±ä¼šéµå¾ªnameï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨name</span></span><br><span class="line">		<span class="attr">name:</span> <span class="string">demo.log</span>     <span class="comment">#æŒ‡å®šæ—¥å¿—æ–‡ä»¶çš„åï¼ŒåªæŒ‡å®šæ–‡ä»¶åå°±ä¼šæŠŠæ–‡ä»¶æ”¾åœ¨è·Ÿé¡¹ç›®åŒä½ç½®çš„ç›®å½•ä¸‹</span></span><br></pre></td></tr></table></figure>
<p>4ã€æ–‡ä»¶å½’æ¡£ä¸æ»šåŠ¨åˆ‡å‰²</p>
<p>é¦–å…ˆæ—¥å¿—æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæ‰€ä»¥å°±å‡ºç°äº†è¿™ä¸ªåŠŸèƒ½</p>
<blockquote>
<p>å½’æ¡£ï¼šæ¯å¤©çš„æ—¥å¿—å•ç‹¬å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</p>
<p>åˆ‡å‰²ï¼šæ¯ä¸ªæ–‡ä»¶10MBï¼Œè¶…è¿‡å¤§å°åˆ‡å‰²æˆå¦å¤–ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
</blockquote>
<p>1ã€æ¯å¤©çš„æ—¥å¿—åº”è¯¥ç‹¬ç«‹åˆ†å‰²å‡ºæ¥å­˜æ¡£ã€‚å¦‚æœä½¿ç”¨logback ï¼ˆSpringBooté»˜è®¤æ•´åˆï¼‰ã€‚å¯ä»¥é€šè¿‡ymlæ–‡ä»¶æŒ‡å®šæ—¥å¿—æ»šåŠ¨è§„åˆ™ã€‚</p>
<p>2ã€å¦‚æœæ˜¯å…¶ä»–æ—¥å¿—ç³»ç»Ÿï¼Œéœ€è¦è‡ªè¡Œé…ç½®ï¼Œæ¯”å¦‚æ·»åŠ log4j2.xmlæˆ–è€…log4j2-spring.xml</p>
<p>3ã€æ”¯æŒçš„æ»šåŠ¨è§„åˆ™è®¾ç½®å¦‚ä¸‹</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>é…ç½®é¡¹</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>logging.logback.rollingpolicy.file-name-pattern</code></td>
<td><strong>å¿…å¡«</strong>ã€‚å®šä¹‰å½’æ¡£æ—¥å¿—æ–‡ä»¶çš„å‘½åæ¨¡å¼ï¼Œæ”¯æŒæ—¶é—´ï¼ˆå¦‚ <code>%d&#123;yyyy-MM-dd&#125;</code>ï¼‰å’Œç´¢å¼•ï¼ˆå¦‚ <code>%i</code>ï¼‰ã€‚ä¾‹å¦‚ï¼š<code>$&#123;LOG_FILE&#125;.%d&#123;yyyy-MM-dd&#125;.%i.gz</code>ã€‚è¯¥æ¨¡å¼å†³å®šäº†æ—¥å¿—å¦‚ä½•æŒ‰æ—¶é—´æˆ–å¤§å°æ»šåŠ¨å¹¶å‹ç¼©ã€‚</td>
</tr>
<tr>
<td><code>logging.logback.rollingpolicy.max-file-size</code></td>
<td>å•ä¸ªæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ï¼Œè¶…è¿‡åè§¦å‘æ»šåŠ¨ï¼ˆä»…åœ¨æ–‡ä»¶åæ¨¡å¼ä¸­åŒ…å« <code>%i</code> æ—¶ç”Ÿæ•ˆï¼‰ã€‚ä¾‹å¦‚ï¼š<code>10MB</code>ã€‚</td>
</tr>
<tr>
<td><code>logging.logback.rollingpolicy.max-history</code></td>
<td>ä¿ç•™çš„å½’æ¡£æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤©æ•°ï¼ˆæˆ–å‘¨æœŸæ•°ï¼‰ã€‚è¶…è¿‡æ­¤å¤©æ•°çš„æ—§æ—¥å¿—ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚ä¾‹å¦‚ï¼š<code>30</code> è¡¨ç¤ºä¿ç•™æœ€è¿‘30å¤©çš„æ—¥å¿—ã€‚</td>
</tr>
<tr>
<td><code>logging.logback.rollingpolicy.total-size-cap</code></td>
<td>æ‰€æœ‰å½’æ¡£æ—¥å¿—æ–‡ä»¶çš„æ€»å¤§å°ä¸Šé™ã€‚è¶…è¿‡åä¼šåˆ é™¤æœ€æ—§çš„å½’æ¡£æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š<code>1GB</code>ã€‚</td>
</tr>
<tr>
<td><code>logging.logback.rollingpolicy.clean-history-on-start</code></td>
<td>åº”ç”¨å¯åŠ¨æ—¶æ˜¯å¦æ¸…ç†è¿‡æœŸçš„å½’æ¡£æ—¥å¿—ï¼ˆ<code>true</code>/<code>false</code>ï¼‰ã€‚é»˜è®¤ä¸º <code>false</code>ã€‚</td>
</tr>
</tbody>
</table>
</div>
<h5 id="è‡ªå®šä¹‰é…ç½®"><a href="#è‡ªå®šä¹‰é…ç½®" class="headerlink" title="è‡ªå®šä¹‰é…ç½®"></a><strong>è‡ªå®šä¹‰é…ç½®</strong></h5><p>é€šå¸¸æˆ‘ä»¬é…ç½®ymlå°±å¤Ÿäº†ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦ç”¨ä»¥å‰çš„è‡ªå®šä¹‰logbacké…ç½®ï¼Œå°±ç›´æ¥æŠŠlogback.xmlæ”¾åˆ°resourcesä¸‹é¢ï¼Œç„¶åspringbootå°±ä¼šç”¨è‡ªå·±çš„logbcakçš„é…ç½®äº†ã€‚</p>
<p>ä½†æ˜¯æ–‡ä»¶åspringæ›´æ¨è<code>logback-spring.xml</code>è¿™ç§æ ¼å¼ï¼Œè¿™æ ·springå°±èƒ½æ§åˆ¶çš„äº†ã€‚</p>
<p>å¦‚æœæ”¾log4j2ï¼Œå¯ä»¥æ”¹æ–‡ä»¶åä¸º<code>log4j2-spring.xml</code></p>
<p>æœ€ä½³å®æˆ˜ï¼šè‡ªå·±è¦å†™é…ç½®ï¼Œé…ç½®æ–‡ä»¶ååŠ ä¸Š<code>xx-spring.xml</code></p>
<h5 id="åˆ‡æ¢æ—¥å¿—ç»„åˆ"><a href="#åˆ‡æ¢æ—¥å¿—ç»„åˆ" class="headerlink" title="åˆ‡æ¢æ—¥å¿—ç»„åˆ"></a><strong>åˆ‡æ¢æ—¥å¿—ç»„åˆ</strong></h5><p>å¦‚æœä¸æƒ³è¦logbackæƒ³è¦åˆ‡æ¢log4j2ï¼Œé‚£ä¹ˆéœ€è¦åˆ©ç”¨mavençš„å°±è¿‘åŸåˆ™ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬ä¹‹å‰å¯¼å…¥<code>spring-boot-starter-web</code>é‡Œé¢æœ‰æ ¸å¿ƒåœºæ™¯ï¼Œä½†æ˜¯æˆ‘ä»¬å†å¯¼å…¥<code>spring-boot-starter</code>ç„¶åæˆ‘ä»¬åˆ©ç”¨æ’é™¤<code>&lt;exclusions&gt;</code>æ’é™¤æ‰logback</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span><span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> <span class="comment">&lt;!-- è¿™é‡Œå†™logbackï¼Œç„¶åä¸‹é¢å†å¯¼å…¥æ–°çš„æ—¥å¿—å®ç°æ¡†æ¶ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span><span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="2ã€Webå¼€å‘"><a href="#2ã€Webå¼€å‘" class="headerlink" title="2ã€Webå¼€å‘"></a><strong>2ã€Webå¼€å‘</strong></h3><blockquote>
<p>SpringBootçš„Webå¼€å‘èƒ½åŠ›ï¼Œç”±SpringMVCæä¾›ã€‚</p>
</blockquote>
<h4 id="1ã€Webåœºæ™¯"><a href="#1ã€Webåœºæ™¯" class="headerlink" title="1ã€Webåœºæ™¯"></a>1ã€Webåœºæ™¯</h4><p>æˆ‘ä»¬è¦å­¦å¥½æ•´ä¸ªwebå¼€å‘åœºæ™¯ï¼Œæˆ‘ä»¬è¦å…ˆäº†è§£springbootå¯¹springmvcæä¾›äº†å“ªäº›åœºæ™¯ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹å¦‚ä½•çµæ´»é…ç½®ï¼Œå¦‚ä½•å®šåˆ¶ç»„ä»¶ç­‰ç­‰ã€‚</p>
<p>é¦–å…ˆè¦äº†è§£è‡ªåŠ¨é…ç½®äº†ä»€ä¹ˆ</p>
<p>1ã€æ•´åˆé…ç½®åœºæ™¯</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2ã€å¼•å…¥äº†autoconfigureåŠŸèƒ½</p>
<p>3ã€<code>@EnableAutoConfiguration</code>æ³¨è§£ä½¿ç”¨<code>@Import(AutoConfigurationImportSelector.class)</code>æ‰¹é‡å¯¼å…¥ç»„ä»¶ï¼ŒåŠ è½½<code>META-INF/spring/%s.imports</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ–¹æ³•åº•å±‚å†™äº†ä¸€ä¸ª%sçš„å ä½ç¬¦ï¼Œè¿™ä¸ªå ä½ç¬¦å¯ä»¥é€šè¿‡æºå…¥çš„å½¢å‚æ¥è·å–å€¼ï¼Œå¹¶æ›¿æ¢æ‰è¿™ä¸ªå ä½ç¬¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¼å…¥äº†webåŒ…ï¼Œå®é™…ä¸ŠåŠ è½½äº†</p>
<p>4ã€<code>META-INF/spring/org.springframwork.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰ç»„ä»¶ã€‚ç„¶åè¿›å»çœ‹è¿™ä¸ªæ–‡ä»¶é‡Œé¢å†™äº†å¾ˆå¤šè‡ªåŠ¨é…ç½®çš„åŒ…åã€‚</p>
<p>5ã€æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»å¦‚ä¸‹</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>è‡ªåŠ¨é…ç½®ç±»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration</code></td>
<td>è‡ªåŠ¨é…ç½®å†…åµŒ Servlet å®¹å™¨ï¼ˆTomcat/Jetty/Undertowï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration</code></td>
<td>é…ç½® <code>DispatcherServlet</code>ï¼ˆSpring MVC æ ¸å¿ƒï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration</code></td>
<td>è‡ªåŠ¨é…ç½® Spring Web MVCï¼ˆè§†å›¾è§£æã€é™æ€èµ„æºã€æ‹¦æˆªå™¨ç­‰ï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration</code></td>
<td>é…ç½®å­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ï¼ˆè§£å†³ä¸­æ–‡ä¹±ç ï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration</code></td>
<td>æ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼ˆ<code>multipart/form-data</code>ï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration</code></td>
<td>é…ç½® MVC é”™è¯¯é¡µé¢å’Œå¼‚å¸¸å¤„ç†</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration</code></td>
<td>Servlet ç¯å¢ƒä¸‹çš„ WebSocket æ”¯æŒ</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration</code></td>
<td>WebSocket + STOMP æ¶ˆæ¯ä»£ç†æ”¯æŒ</td>
</tr>
</tbody>
</table>
</div>
<p>ç„¶åè¿˜æœ‰å“åº”å¼çš„ç±»</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>è‡ªåŠ¨é…ç½®ç±»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration</code></td>
<td>é…ç½®å“åº”å¼å†…åµŒæœåŠ¡å™¨ï¼ˆNetty/Tomcat/Jetty/Undertow Reactiveï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration</code></td>
<td>é…ç½® <code>HttpHandler</code>ï¼ˆWebFlux åº•å±‚å…¥å£ï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration</code></td>
<td>è‡ªåŠ¨é…ç½® Spring WebFluxï¼ˆè·¯ç”±ã€ç¼–è§£ç ã€é™æ€èµ„æºç­‰ï¼‰</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.reactive.ReactiveMultipartAutoConfiguration</code></td>
<td>å“åº”å¼æ–‡ä»¶ä¸Šä¼ æ”¯æŒ</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.reactive.WebSessionIdResolverAutoConfiguration</code></td>
<td>é…ç½® WebSession ID è§£æ</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration</code></td>
<td>WebFlux çš„å…¨å±€é”™è¯¯å¤„ç†</td>
</tr>
<tr>
<td><code>org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration</code></td>
<td>å“åº”å¼ WebSocket æ”¯æŒ</td>
</tr>
</tbody>
</table>
</div>
<p>6ã€è¿™äº›è‡ªåŠ¨é…ç½®ç±»åˆç»‘å®šäº†é…ç½®æ–‡ä»¶çš„ä¸€å †é…ç½®é¡¹</p>
<ul>
<li>1ã€SpringMVCçš„æ‰€æœ‰é…ç½®ä»¥spring.mvcå¼€å¤´</li>
<li>2ã€Webåœºæ™¯çš„é€šç”¨é…ç½®ä»¥<code>spring.web</code>å¼€å¤´</li>
<li>3ã€æ–‡ä»¶ä¸Šä¼ é…ç½®ä»¥<code>spring.servlet.multipart</code>å¼€å¤´</li>
<li>4ã€æœåŠ¡å™¨çš„é…ç½®ä»¥<code>server</code>å¼€å¤´ æ¯”å¦‚ï¼šç¼–ç æ–¹å¼</li>
</ul>
<p>7ã€é»˜è®¤é…ç½®Webæ•ˆæœ</p>
<p>Spring Boot çš„è‡ªåŠ¨é…ç½®æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>æ³¨å…¥ <code>ContentNegotiatingViewResolver</code> å’Œ <code>BeanNameViewResolver</code> çš„ Beanï¼Œæ–¹ä¾¿è§†å›¾è§£æã€‚</li>
<li>æ”¯æŒé™æ€èµ„æºçš„è®¿é—®ï¼Œé™æ€èµ„æºæ”¾åœ¨staticæ–‡ä»¶å¤¹ä¸‹å³å¯ç›´æ¥è®¿é—®ã€‚</li>
<li>è‡ªåŠ¨æ³¨å†Œ <code>Converter</code>ã€<code>GenericConverter</code> å’Œ <code>Formatter</code> çš„ Beanï¼Œé€‚é…å¸¸è§çš„æ•°æ®ç±»å‹è½¬æ¢å’Œæ ¼å¼åŒ–éœ€æ±‚ã€‚</li>
<li>æ”¯æŒ <code>HttpMessageConverters</code>ï¼Œæ–¹ä¾¿è¿”å›jsonç­‰æ•°æ®ç±»å‹ï¼ˆæ–¹æ³•åªè¦æ˜¯å¯¹è±¡å°±è½¬æ¢ä¸ºjsonï¼‰ã€‚</li>
<li>è‡ªåŠ¨æ³¨å†Œ <code>MessageCodesResolver</code>ï¼Œæ–¹ä¾¿å›½é™…åŒ–åŠé”™è¯¯æ¶ˆæ¯å¤„ç†ã€‚</li>
<li>æ”¯æŒé™æ€çš„ <code>index.html</code> é¡µé¢ã€‚</li>
<li>è‡ªåŠ¨ä½¿ç”¨ <code>ConfigurableWebBindingInitializer</code> Beanï¼Œå®ç°æ¶ˆæ¯å¤„ç†ï¼Œæ•°æ®ç»‘å®šï¼ˆå°±æ¯”å¦‚æ¥å—å‰ç«¯ä¼ æ¥çš„è¶…æ–‡æœ¬æ•°æ®æ”¾åœ¨å¯¹è±¡é‡Œé¢ï¼‰ï¼Œç±»å‹è½¬åŒ–ã€æ•°æ®æ ¡éªŒ ç­‰åŠŸèƒ½ã€‚</li>
</ul>
<hr>
<blockquote>
<p>é‡è¦ï¼š</p>
<ul>
<li>å¦‚æœæƒ³è¦ä¿æŒ boot mvc çš„é»˜è®¤é…ç½®ï¼Œå¹¶ä¸”è‡ªå®šä¹‰æ›´å¤šçš„mvcé…ç½®ï¼Œå¦‚ï¼šinterceptorsï¼Œformatters,view controllersç­‰ã€‚å¯ä»¥ä½¿ç”¨@Configurationæ³¨è§£æ·»åŠ ä¸€ä¸ªWebMvcConfigurerç±»å‹çš„é…ç½®ç±»ï¼Œå¹¶ä¸è¦æ ‡æ³¨@EnableWebMvc</li>
<li>å¦‚æœæƒ³è¦ä¿æŒboot mvcçš„é»˜è®¤é…ç½®ï¼Œä½†è¦è‡ªå®šä¹‰æ ¸å¿ƒç»„ä»¶å®ä¾‹ï¼Œæ¯”å¦‚ï¼šRequestMappingHandlerMappingï¼ŒRequestMappingHandlerAdapteræˆ–ExceptionHandlerExceptionResolverï¼Œç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcRegistrationsç»„ä»¶å³å¯</li>
<li>å¦‚æœæƒ³å…¨é¢æ¥ç®¡Spring MVC,@Configurationæ ‡æ³¨ä¸€ä¸ªé…ç½®ç±»ï¼Œå¹¶åŠ ä¸Š@EnableWebMvcæ³¨è§£ï¼Œå®ç°WebMvcConfigureræ¥å£</li>
</ul>
</blockquote>
<p>æ‰€ä»¥ç”¨springbootè¿›è¡Œwebå¼€å‘æœ‰ä¸‰ç§æ–¹å¼</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>å…¨è‡ªåŠ¨</th>
<th>ç›´æ¥ç¼–å†™æ§åˆ¶å™¨é€»è¾‘</th>
<th></th>
<th>å…¨éƒ¨ä½¿ç”¨è‡ªåŠ¨é…ç½®é»˜è®¤æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‰‹è‡ªä¸€ä½“</td>
<td>@Configuration + é…ç½® WebMvcConfigurer + é…ç½®WebMvcRegistrations</td>
<td>ä¸è¦æ ‡æ³¨@EnableWebMvc</td>
<td>è‡ªåŠ¨é…ç½®æ•ˆæœï¼Œæ‰‹åŠ¨è®¾ç½®éƒ¨åˆ†åŠŸèƒ½ï¼Œå®šä¹‰MVCåº•å±‚ç»„ä»¶</td>
</tr>
<tr>
<td>å…¨æ‰‹åŠ¨</td>
<td>@Configuration + é…ç½® WebMvcConfigurer</td>
<td>æ ‡æ³¨@EnableWebMvc</td>
<td>ç¦ç”¨è‡ªåŠ¨é…ç½®æ•ˆæœï¼Œå…¨æ‰‹åŠ¨è®¾ç½®</td>
</tr>
</tbody>
</table>
</div>
<p>æ€»ç»“ï¼š<strong>ç»™å®¹å™¨ä¸­å†™ä¸€ä¸ªé…ç½®ç±» <code>@Configuration</code> ç»§æ‰¿ <code>WebMvcConfigurer</code> ä½†æ˜¯ä¸è¦æ ‡æ³¨ <code>@EnableWebMvc</code>ï¼Œå®ç°æ‰‹è‡ªä¸€ä½“çš„æ•ˆæœ</strong></p>
<p><strong>ç°åœ¨å¼€å§‹äº†è§£è§„åˆ™</strong></p>
<h4 id="2ã€é™æ€èµ„æº"><a href="#2ã€é™æ€èµ„æº" class="headerlink" title="2ã€é™æ€èµ„æº"></a><strong>2ã€é™æ€èµ„æº</strong></h4><h5 id="0ã€ä¸»è¦ç ”ç©¶WebMvcConfigurationåŸç†"><a href="#0ã€ä¸»è¦ç ”ç©¶WebMvcConfigurationåŸç†" class="headerlink" title="0ã€ä¸»è¦ç ”ç©¶WebMvcConfigurationåŸç†"></a><strong>0ã€ä¸»è¦ç ”ç©¶<code>WebMvcConfiguration</code>åŸç†</strong></h5><h6 id="1ã€ç”Ÿæ•ˆæ¡ä»¶"><a href="#1ã€ç”Ÿæ•ˆæ¡ä»¶" class="headerlink" title="1ã€ç”Ÿæ•ˆæ¡ä»¶"></a><strong>1ã€ç”Ÿæ•ˆæ¡ä»¶</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration(</span></span><br><span class="line"><span class="meta">    after = &#123;DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class, ValidationAutoConfiguration.class&#125;</span></span><br><span class="line"><span class="meta">)</span><span class="comment">//åœ¨è¿™äº›è‡ªåŠ¨é…ç½®ä¹‹å</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(</span></span><br><span class="line"><span class="meta">    type = Type.SERVLET</span></span><br><span class="line"><span class="meta">)</span><span class="comment">//åªæœ‰æ˜¯webåº”ç”¨ç”Ÿæ•ˆï¼Œå¿…é¡»æ˜¯servletç±»å‹ï¼Œreactiveå“åº”å¼</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class&#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(&#123;WebMvcConfigurationSupport.class&#125;)</span><span class="comment">//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªBean</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(-2147483638)</span><span class="comment">//ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="meta">@ImportRuntimeHints(&#123;WebResourcesRuntimeHints.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DEFAULT_SUFFIX</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SERVLET_LOCATION</span> <span class="operator">=</span> <span class="string">&quot;/&quot;</span>;</span><br></pre></td></tr></table></figure>
<h6 id="2ã€æ•ˆæœ"><a href="#2ã€æ•ˆæœ" class="headerlink" title="2ã€æ•ˆæœ"></a><strong>2ã€æ•ˆæœ</strong></h6><p>1ã€æ”¾äº†ä¸¤ä¸ªFilterï¼š</p>
<p><code>HiddenHttpMethodFilter</code>ï¼šé¡µé¢è¡¨å•æäº¤Restè¯·æ±‚ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰</p>
<p><code>FromContentFilter</code>ï¼šè¡¨å•å†…å®¹Filter,GETï¼ˆæ•°å»æ”¾URLåé¢ï¼‰ã€POSTï¼ˆæ•°æ®æ”¾è¯·æ±‚ä½“å†…ï¼‰è¯·æ±‚å¯ä»¥æºå¸¦æ•°æ®ï¼ŒPUTã€DELETEçš„è¯·æ±‚ä½“æ•°æ®ä¼šè¢«å¿½ç•¥</p>
<p>2ã€ç»™å®¹å™¨ä¸­æ”¾äº†<code>WebMvcConfigurer</code>ç»„ä»¶ï¼Œç»™SpringMVCæ·»åŠ å„ç§å®šåˆ¶åŠŸèƒ½ã€‚</p>
<p>è¿™é‡Œæ”¾äº†å¾ˆå¤šåº•å±‚è§„åˆ™ï¼Œæ‰€æœ‰çš„ åŠŸèƒ½æœ€ç»ˆä¼šå’Œé…ç½®æ–‡ä»¶ç»‘å®š</p>
<p><code>WebMvcProperties.class</code>: <code>spring.mvcå¼€å¤´é…ç½®æ–‡ä»¶</code></p>
<p><code>WebProperties.class</code>ï¼š <code>spring.webå¼€å¤´é…ç½®æ–‡ä»¶</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(</span></span><br><span class="line"><span class="meta">        proxyBeanMethods = false</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="meta">@Import(&#123;EnableWebMvcConfiguration.class&#125;)</span><span class="comment">//é¢å¤–å¯¼å…¥äº†å…¶ä»–é…ç½®</span></span><br><span class="line">    <span class="meta">@EnableConfigurationProperties(&#123;WebMvcProperties.class, WebProperties.class&#125;)</span><span class="comment">//è¿™é‡Œå±æ€§ç»‘å®š</span></span><br><span class="line">    <span class="meta">@Order(0)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">WebMvcAutoConfigurationAdapter</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span>, ServletContextAware &#123;</span><br></pre></td></tr></table></figure>
<h6 id="3ã€WebMvcConfigureræ¥å£"><a href="#3ã€WebMvcConfigureræ¥å£" class="headerlink" title="3ã€WebMvcConfigureræ¥å£"></a>3ã€WebMvcConfigureræ¥å£</h6><p>æä¾›äº†é…ç½®SpringMVCåº•å±‚çš„æ‰€æœ‰ç»„ä»¶å…¥å£</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251218113429282.png" alt="image-20251218113429282"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°è§£æå™¨ï¼ˆcontrollerä¸Šçš„æ‰€æœ‰å‚æ•°éƒ½è¦è§£æï¼‰</span><br><span class="line">è·¨åŸŸ</span><br><span class="line">æ ¼å¼åŒ–å™¨</span><br><span class="line">æ‹¦æˆªå™¨</span><br><span class="line">æ·»åŠ èµ„æºå¤„ç†å™¨ï¼Œå¤„ç†é™æ€èµ„æºè§„åˆ™</span><br><span class="line">è¿”å›å€¼å¤„ç†å™¨</span><br><span class="line">è§†å›¾æ§åˆ¶å™¨ï¼š/a ç›´æ¥è·³è½¬åˆ°xxx.htmlé¡µé¢ã€‚</span><br><span class="line">å¼‚æ­¥æ”¯æŒ</span><br><span class="line">å†…å®¹åå•†</span><br><span class="line">é»˜è®¤å¤„ç†ï¼Œé»˜è®¤æ¥å—/ è¯·æ±‚</span><br><span class="line">é…ç½®å¼‚å¸¸è§£æå™¨</span><br><span class="line">æ¶ˆæ¯è½¬åŒ–å™¨</span><br><span class="line">è·¯å¾„åŒ¹é…</span><br><span class="line">è§†å›¾è§£æ</span><br><span class="line">æ‰©å±•ï¼šå¼‚å¸¸è§£æå™¨</span><br><span class="line">æ‰©å±•ï¼šæ¶ˆæ¯è½¬æ¢</span><br><span class="line">åé¢ä¸¤ä¸ªgetæ˜¯è·å–çš„</span><br></pre></td></tr></table></figure>
<h6 id="4ã€é™æ€èµ„æºè§„åˆ™æºç "><a href="#4ã€é™æ€èµ„æºè§„åˆ™æºç " class="headerlink" title="4ã€é™æ€èµ„æºè§„åˆ™æºç "></a>4ã€é™æ€èµ„æºè§„åˆ™æºç </h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.resourceProperties.isAddMappings()) &#123;</span><br><span class="line">        logger.debug(<span class="string">&quot;Default resource handling disabled&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.addResourceHandler(registry, <span class="built_in">this</span>.mvcProperties.getWebjarsPathPattern(), <span class="string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.addResourceHandler(registry, <span class="built_in">this</span>.mvcProperties.getStaticPathPattern(), (Consumer)((registration) -&gt; &#123;</span><br><span class="line">            registration.addResourceLocations(<span class="built_in">this</span>.resourceProperties.getStaticLocations());</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.servletContext != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">ServletContextResource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletContextResource</span>(<span class="built_in">this</span>.servletContext, <span class="string">&quot;/&quot;</span>);</span><br><span class="line">                registration.addResourceLocations(<span class="keyword">new</span> <span class="title class_">Resource</span>[]&#123;resource&#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é¦–å…ˆå¯ä»¥çœ‹åˆ°è¿™ä¸ªæºç é‡Œé¢addResourceHandlerè°ƒç”¨äº†ä¸¤æ¬¡ï¼Œæ·»åŠ äº†ä¸¤ç§é™æ€èµ„æºè§„åˆ™ã€‚</p>
<h6 id="5ã€-EnableWebMvcConfiguration-æºç "><a href="#5ã€-EnableWebMvcConfiguration-æºç " class="headerlink" title="5ã€ EnableWebMvcConfiguration æºç "></a>5ã€ <strong>EnableWebMvcConfiguration æºç </strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//SpringBoot ç»™å®¹å™¨ä¸­æ”¾ WebMvcConfigurationSupport ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="comment">//æˆ‘ä»¬å¦‚æœâ¾ƒâ¼°æ”¾äº†WebMvcConfigurationSupport ç»„ä»¶ï¼ŒBootçš„WebMvcAutoConfigurationéƒ½ä¼šå¤±æ•ˆã€‚</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(WebProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">EnableWebMvcConfiguration</span> <span class="keyword">extends</span> <span class="title class_">DelegatingWebMvcConfiguration</span> <span class="keyword">implements</span> <span class="title class_">ResourceLoaderAware</span> </span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>HandlerMapping  ï¼š æ ¹æ®è¯·æ±‚è·¯å¾„  /a  æ‰¾é‚£ä¸ªhandlerèƒ½å¤„ç†è¯·æ±‚ </p>
<p>a. WelcomePageHandlerMapping  ï¼š  </p>
<p>â…°.  è®¿é—®  /**  è·¯å¾„ä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼Œéƒ½åœ¨ä»¥å‰å››ä¸ªé™æ€èµ„æºè·¯å¾„ä¸‹æ‰¾ï¼Œæ¬¢è¿â»šä¹Ÿâ¼€æ · </p>
<p>â…±.  æ‰¾ index.html  ï¼šåªè¦é™æ€èµ„æºçš„ä½ç½®æœ‰â¼€ä¸ª  index.html  â»šâ¾¯ï¼Œé¡¹â½¬å¯åŠ¨é»˜è®¤è®¿é—®</p>
</li>
</ol>
<h6 id="6ã€ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½ç”Ÿæ•ˆ"><a href="#6ã€ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½ç”Ÿæ•ˆ" class="headerlink" title="6ã€ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½ç”Ÿæ•ˆ"></a>6ã€ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½ç”Ÿæ•ˆ</h6><ol>
<li>WebMvcAutoConfiguration æ˜¯â¼€ä¸ªâ¾ƒåŠ¨é…ç½®ç±»ï¼Œå®ƒâ¾¥â¾¯æœ‰â¼€ä¸ª  EnableWebMvcConfiguration  </li>
<li>EnableWebMvcConfiguration  ç»§æ‰¿ä¸  DelegatingWebMvcConfiguration  ï¼Œè¿™ä¸¤ä¸ªéƒ½ â½£æ•ˆ</li>
<li><code>DelegatingWebMvcConfiguration</code>  åˆ©â½¤ DI æŠŠå®¹å™¨ä¸­ æ‰€æœ‰ <code>WebMvcConfigurer</code>æ³¨â¼Šè¿›æ¥</li>
<li>åˆ«â¼ˆè°ƒâ½¤ <code>DelegatingWebMvcConfiguration</code> çš„â½…æ³•é…ç½®åº•å±‚è§„åˆ™ï¼Œâ½½å®ƒè°ƒâ½¤æ‰€æœ‰  WebMvcConfigurer  çš„é…ç½®åº•å±‚â½…æ³•ã€‚</li>
</ol>
<p><strong>æ€»ç»“ï¼šSpring Boot é€šè¿‡ä¸€ä¸ªâ€œå§”æ‰˜ä»£ç†ç±»â€è‡ªåŠ¨èšåˆæ‰€æœ‰ <code>WebMvcConfigurer</code> å®ç°ï¼Œå¹¶ç»Ÿä¸€è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ã€‚</strong></p>
<p>ç¬¬ä¸€æ­¥ï¼šè‡ªåŠ¨é…ç½®å…¥å£ â€”â€” <code>WebMvcAutoConfiguration</code></p>
<ul>
<li>Spring Boot å¯åŠ¨æ—¶ï¼Œä¼šåŠ è½½ <code>WebMvcAutoConfiguration</code>ï¼ˆæ¡ä»¶æ»¡è¶³æ—¶ï¼‰ã€‚</li>
<li>è¿™ä¸ªç±»æ˜¯ <strong>Spring MVC çš„è‡ªåŠ¨é…ç½®ç±»</strong>ï¼Œè´Ÿè´£è®¾ç½®é»˜è®¤çš„è§†å›¾è§£æå™¨ã€æ¶ˆæ¯è½¬æ¢å™¨ã€é™æ€èµ„æºå¤„ç†ç­‰ã€‚</li>
</ul>
<p>ç¬¬äºŒæ­¥ï¼šå…³é”®è§’è‰² â€”â€” <code>DelegatingWebMvcConfiguration</code></p>
<p>åœ¨ <code>WebMvcAutoConfiguration</code> å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼šè€Œ<code>DelegatingWebMvcConfiguration</code> æ˜¯çœŸæ­£çš„æ ¸å¿ƒï¼š</p>
<p>ç¬¬ä¸‰æ­¥ï¼šä¾èµ–æ³¨å…¥èšåˆæ‰€æœ‰ <code>WebMvcConfigurer</code></p>
<ul>
<li><code>@Autowired List&lt;WebMvcConfigurer&gt; configurers</code><br>â†’ Spring å®¹å™¨ä¼š<strong>è‡ªåŠ¨æŠŠæ‰€æœ‰ç±»å‹ä¸º <code>WebMvcConfigurer</code> çš„ Bean æ”¶é›†åˆ°ä¸€ä¸ª List ä¸­</strong>ã€‚</li>
<li>ç„¶åäº¤ç»™ <code>WebMvcConfigurerComposite</code>ï¼ˆä¸€ä¸ªç»„åˆå™¨ï¼‰ç®¡ç†ã€‚</li>
</ul>
<p><strong>é™æ€èµ„æºæ˜ å°„è§„åˆ™</strong></p>
<h5 id="1ã€é»˜è®¤è§„åˆ™"><a href="#1ã€é»˜è®¤è§„åˆ™" class="headerlink" title="1ã€é»˜è®¤è§„åˆ™"></a><strong>1ã€é»˜è®¤è§„åˆ™</strong></h5><p>1ã€é™æ€èµ„æºæ˜ å°„è§„åˆ™åœ¨<code>WebMvcConfiguration</code>ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p>
<p>è§„åˆ™ä¸€ï¼šè®¿é—® <code>/webjars/**</code> è·¯å¾„å°±å»<code>classpath:/META-INF/resources/webjars/</code>ä¸‹æ‰¾èµ„æº</p>
<p>mavenå¯¼å…¥ä¾èµ–æ¯”å¦‚å¯¼å…¥vueç›¸å…³jsï¼Œç›¸å…³çš„jså°±è¿›æ¥äº†ï¼Œï¼Œç„¶åè®¿é—®webjarså¯¹åº”è·¯å¾„å°±èƒ½è®¿é—®å¯¹åº”jsäº†ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸ªä¸å¸¸ç”¨</p>
<p>è§„åˆ™äºŒï¼šè®¿é—®ï¼š<code>/**</code>è·¯å¾„å°±å»<code>é™æ€èµ„æºé»˜è®¤çš„å››ä¸ªä½ç½®æ‰¾èµ„æº</code></p>
<p><code>&quot;classpath:/META-INF/resources/&quot;,</code></p>
<p><code>&quot;classpath:/resources/&quot;,</code> </p>
<p><code>&quot;classpath:/static/&quot;,</code></p>
<p><code>&quot;classpath:/public/&quot;</code></p>
<p>ä¹Ÿå°±æ˜¯æ”¾åœ¨ç±»è·¯å¾„ä¸‹çš„è¿™å››ä¸ªä½ç½®å°±èƒ½è®¿é—®é™æ€èµ„æºã€‚</p>
<p>ç±»è·¯å¾„å°±æ˜¯javaåŒ…ä¸‹é¢æˆ–è€…resoutcesåŒ…ä¸‹é¢å°±æ˜¯ä¸¤ä¸ªç±»è·¯å¾„ã€‚</p>
<p><strong>2ã€é™æ€èµ„æºç¼“å­˜è§„åˆ™</strong></p>
<p>3ã€è§„åˆ™ä¸‰ï¼šé™æ€èµ„æºé»˜è®¤éƒ½æœ‰ç¼“å­˜è§„åˆ™çš„è®¾ç½®ã€‚</p>
<p>a. æ‰€æœ‰ç¼“å­˜çš„è®¾ç½®ï¼Œç›´æ¥é€šè¿‡é…ç½®æ–‡ä»¶ï¼š <code>spring.web</code></p>
<p>b. cachePeriodï¼šç¼“å­˜å‘¨æœŸï¼Œå¤šä¹…ä¸ç”¨æ‰¾æœåŠ¡å™¨è¦æ–°çš„ã€‚<strong>é»˜è®¤æ²¡æœ‰</strong>ï¼Œä»¥ç§’ä¸ºå•ä½</p>
<p>c. cacheControlï¼šHTTPç¼“å­˜æ§åˆ¶ï¼Œ<strong>é»˜è®¤æ— </strong>ï¼Œç¼“å­˜å¤§ä½“åˆ†ä¸ºç§æœ‰ç¼“å­˜å’Œå…±äº«ç¼“å­˜ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Guides/Caching">HTTP ç¼“å­˜ - HTTP | MDN</a></p>
<p>d. useLastModifiedï¼šæ˜¯å¦ä½¿ç”¨æœ€åä¸€æ¬¡ä¿®æ”¹ã€‚æ³¨æ„ï¼šLast-Modifiedé¦–éƒ¨ï¼Œåªæ˜¯å‘Šè¯‰æµè§ˆå™¨ï¼Œè¦æƒ³ä½¿ç”¨ç¼“å­˜ï¼Œå¿…é¡»æ¯æ¬¡å¸¦è¯¥é¦–éƒ¨å»æœåŠ¡å™¨éªŒè¯ï¼Œé€šè¿‡å°±å“åº”304ï¼Œä¸é€šè¿‡å°±è¿”å›å®Œæ•´èµ„æºï¼Œå¹¶é‡å†™è®¾ç½®Last-Modified</p>
<blockquote>
<p>å¦‚æœæµè§ˆå™¨è®¿é—®äº†ä¸€ä¸ªé™æ€èµ„æº<code>index.js</code>ï¼Œå¦‚æœè¿™ä¸ªèµ„æºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸‹æ¬¡è®¿é—®çš„è§†ä¹å°±å¯ä»¥ç›´æ¥è®©æµè§ˆå™¨ç”¨è‡ªå·±ç¼“å­˜ä¸­çš„ä¸œè¥¿ï¼Œè€Œä¸ç”¨ç»™æœåŠ¡å™¨å‘è¯·æ±‚ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">registration.setCachePeriod(<span class="built_in">this</span>.getSeconds(<span class="built_in">this</span>.resourceProperties.getCache().getPeriod()));</span><br><span class="line">                registration.setCacheControl(<span class="built_in">this</span>.resourceProperties.getCache().getCachecontrol().toHttpCacheControl());</span><br><span class="line">                registration.setUseLastModified(<span class="built_in">this</span>.resourceProperties.getCache().isUseLastModified());</span><br></pre></td></tr></table></figure>
<p><strong>æ¬¢è¿é¡µ</strong></p>
<p>æ¬¢è¿é¡µè§„åˆ™åœ¨ <code>WebMvcAutoConfiguration</code>ä¸­è¿›è¡Œäº†å®šä¹‰ï¼š</p>
<p>1ã€åœ¨é™æ€èµ„æºç›®å½•ä¸‹æ‰¾index.html</p>
<p>2ã€æ²¡æœ‰å°±åœ¨templatesä¸‹æ‰¾indexæ¨¡ç‰ˆé¡µ</p>
<p><strong>Favicon</strong></p>
<ol>
<li>åœ¨é™æ€èµ„æºâ½¬å½•ä¸‹æ‰¾  favicon.ico</li>
</ol>
<p><strong>ç¼“å­˜å®éªŒ</strong></p>
<p>ä¸Šé¢è®²è§£äº†ä¸‰ç§é™æ€èµ„æºè§„åˆ™ï¼Œæ— è®ºå“ªç§è§„åˆ™éƒ½é…äº†ä¸‰ä¸ªæ–¹æ³•æ¥æ§åˆ¶ç¼“å­˜ï¼Œ</p>
<p>ä¸€ä¸ªæ˜¯setCacheControlï¼Œ</p>
<p>ä¸€ä¸ªæ˜¯SetCachePeriodï¼Œ</p>
<p>ä¸€ä¸ªæ˜¯setUseLastModifiedï¼Œ</p>
<p>ç„¶åè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½è¦é€šè¿‡resourcePropertiesæ¥ç»‘å®šé…ç½®é¡¹ï¼Œ</p>
<p>é‚£ä¹ˆå°±å»é‡Œé¢çœ‹æœ‰ä»€ä¹ˆé…ç½®é¡¹ï¼Œ</p>
<p>ç„¶åçœ‹åˆ°é‡Œé¢çš„é…ç½®é¡¹æ˜¯spring.webå¼€å¤´çš„ï¼Œ</p>
<p>ç„¶åçœ‹è¿™ä¸ªç±»é…ä»€ä¹ˆä¿¡æ¯ï¼Œ</p>
<p>å¯ä»¥é…localeå›½é™…åŒ–ä¿¡æ¯ï¼Œç¬¬äºŒä¸ªé…resources,ç„¶åresourceé‡Œé¢é…ç½®é™æ€èµ„æºç­–ç•¥ï¼Œç„¶åresourcesé‡Œé¢å¯ä»¥é…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">staticLocations é™æ€èµ„æºçš„è·¯å¾„</span><br><span class="line">addMappings     æ˜¯å¦å¼€å¯é™æ€èµ„æºçš„æ˜ å°„</span><br><span class="line">Chain           é™æ€èµ„æºå¤„ç†é“¾</span><br><span class="line">Cache           ç¼“å­˜è§„åˆ™</span><br></pre></td></tr></table></figure>
<p>é‚£ä¹ˆæˆ‘ä»¬çœ‹äº†æºç ä¹‹åå°±ä¼šé…ç½®,ç„¶åæˆ‘ä»¬æƒ³è¦é…ç½®cacheï¼Œåˆå¯ä»¥ç‚¹è¿›å»çœ‹æºç ï¼Œçœ‹cacheé‡Œé¢éœ€è¦é…ä»€ä¹ˆ</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">resources:</span></span><br><span class="line">	  <span class="attr">add-mappings:</span> <span class="literal">true</span>	<span class="comment">#è¿™æ ·å°±å¼€å¯äº†é™æ€èµ„æºæ˜ å°„äº†</span></span><br><span class="line">	  <span class="attr">cache:</span></span><br><span class="line">	    <span class="attr">period:</span> <span class="number">3600</span>        <span class="comment">#ç¼“å­˜3600ç§’ï¼Œä¸€å°æ—¶åé¢å¦‚æœéœ€è¦æ›´è¯¦ç»†çš„é…ç½®ï¼Œå¯ä»¥ç»§ç»­çœ‹</span></span><br><span class="line">	    <span class="attr">cachecontrol:</span>       <span class="comment">#ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–Periodé…ç½®</span></span><br><span class="line">	    	<span class="attr">max-age:</span> <span class="number">7200</span>   <span class="comment">#æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ã€‚     </span></span><br></pre></td></tr></table></figure>
<p><strong>ä¸Šé¢å°±äº†è§£äº†é»˜è®¤è§„åˆ™å¦‚ä½•äº†è§£ä»¥åŠé…ç½®äº†ï¼Œä¸‹é¢å¼€å§‹è‡ªå®šä¹‰è§„åˆ™äº†</strong></p>
<h5 id="2ã€è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™"><a href="#2ã€è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™" class="headerlink" title="2ã€è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™"></a><strong>2ã€è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™</strong></h5><blockquote>
<p>è‡ªå®šä¹‰é™æ€èµ„æºè·¯å¾„ï¼Œè‡ªå®šä¹‰ç¼“å­˜è§„åˆ™</p>
</blockquote>
<p>æœ‰ä¸¤ç§è‡ªå®šä¹‰é™æ€èµ„æºçš„æ–¹å¼ï¼Œä»¥é™æ€èµ„æºä¸ºä¾‹çœ‹æºç ï¼Œä»–ç»‘å®šäº†ä¸¤ä¸ªä¸€ä¸ªæ˜¯ä¸Šé¢çš„webPropertiesï¼Œä¸€ä¸ªæ˜¯webMvc</p>
<h6 id="1ã€é…ç½®æ–¹å¼"><a href="#1ã€é…ç½®æ–¹å¼" class="headerlink" title="1ã€é…ç½®æ–¹å¼"></a>1ã€é…ç½®æ–¹å¼</h6><p>æ‰€ä»¥è¯´ä»¥åæƒ³è¦è‡ªå®šä¹‰è§„åˆ™ä¸€ä¸ªå°±æ˜¯æ”¹spring.webçš„è·Ÿä¸Šé¢ä¸€æ ·ï¼Œä¸€ä¸ªæ˜¯ä¿®æ”¹spring.mvcçš„é…ç½®ã€‚</p>
<p>ç°åœ¨è¿™é‡Œææ¸…æ¥šï¼Œè¿™ä¸¤ä¸ªèƒ½é…å“ªäº›ï¼Ÿ</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1spring.web</span></span><br><span class="line"><span class="comment"># 1.é…ç½®å›½é™…åŒ–çš„åŒºåŸŸä¿¡æ¯</span></span><br><span class="line"><span class="comment"># 2.é™æ€èµ„æºç­–ç•¥(å¼€å¯ã€å¤„ç†é“¾ã€ç¼“å­˜)</span></span><br><span class="line"><span class="comment">#å¼€å¯é™æ€èµ„æºæ˜ å°„è§„åˆ™</span></span><br><span class="line"><span class="attr">spring.web.resources.add-mappings</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#è®¾ç½®ç¼“å­˜</span></span><br><span class="line"><span class="comment">#spring.web.resources.cache.period=3600</span></span><br><span class="line"><span class="comment">##ç¼“å­˜è¯¦ç»†åˆå¹¶é¡¹æ§åˆ¶ï¼Œè¦†ç›–periodé…ç½®ï¼š</span></span><br><span class="line"><span class="comment">## æµè§ˆå™¨ç¬¬â¼€æ¬¡è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨æ­¤èµ„æºç¼“å­˜7200ç§’ï¼Œ7200ç§’ä»¥å†…çš„æ‰€æœ‰æ­¤èµ„æºè®¿é—®ä¸â½¤å‘ç»™æœåŠ¡å™¨è¯·æ±‚ï¼Œ7200ç§’ä»¥åå‘è¯·æ±‚ç»™æœåŠ¡å™¨</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.cachecontrol.max-age</span>=<span class="string">7200</span></span><br><span class="line"><span class="comment">## å…±äº«ç¼“å­˜</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.cachecontrol.cache-public</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#ä½¿â½¤èµ„æºlast-modified æ—¶é—´ï¼Œæ¥å¯¹â½æœåŠ¡å™¨å’Œæµè§ˆå™¨çš„èµ„æºæ˜¯å¦ç›¸åŒæ²¡æœ‰å˜åŒ–ã€‚ç›¸åŒè¿”å›304</span></span><br><span class="line"><span class="attr">spring.web.resources.cache.use-last-modified</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#â¾ƒå®šä¹‰é™æ€èµ„æºâ½‚ä»¶å¤¹ä½ç½®,è¿™ä¸ªæ˜¯èµ„æºä½ç½®è·¯å¾„ï¼Œå…¶ä»–ä¸¤ä¸ªæ˜¯è®¿é—®è·¯å¾„</span></span><br><span class="line"><span class="attr">spring.web.resources.static-locations</span>=<span class="string">classpath:/a/,classpath:/b/,classpath:/static/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#2ã€spring.mvc</span></span><br><span class="line"><span class="comment">## 2.1.â¾ƒå®šä¹‰webjarsè·¯å¾„å‰ç¼€</span></span><br><span class="line"><span class="attr">spring.mvc.webjars-path-pattern</span>=<span class="string">/wj/**</span></span><br><span class="line"><span class="comment">## 2.2. é™æ€èµ„æºè®¿é—®è·¯å¾„å‰ç¼€</span></span><br><span class="line"><span class="attr">spring.mvc.static-path-pattern</span>=<span class="string">/static/**</span></span><br></pre></td></tr></table></figure>
<p>å°æç¤ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.web.resources.static-locations=classpath:/a/,classpath:/b/,classpath:/static/</span><br><span class="line">è¡¨ç¤º Spring ä¼šä»ä»¥ä¸‹ä¸‰ä¸ª classpath ç›®å½•ä¸­æŸ¥æ‰¾é™æ€èµ„æºã€‚</span><br><span class="line">spring.mvc.static-path-pattern=/static/**</span><br><span class="line">è¡¨ç¤ºï¼šæ‰€æœ‰ä»¥ /static/ å¼€å¤´çš„è¯·æ±‚ï¼Œéƒ½ä¼šè¢«å½“ä½œé™æ€èµ„æºå¤„ç†ã€‚</span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">ç”¨æˆ·è®¿é—® http://localhost:8080/static/logo.png</span><br><span class="line">Spring ä¼šå» a/, b/, static/ è¿™äº›ç›®å½•ä¸‹æ‰¾ logo.png</span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>spring.mvc : é…ç½®é™æ€èµ„æºè®¿é—®å‰ç¼€è·¯å¾„</p>
<p>spring.webï¼šé…ç½®</p>
<ul>
<li><p>é™æ€èµ„æºç›®å½•</p>
</li>
<li><p>é™æ€èµ„æºç¼“å­˜ç­–ç•¥</p>
</li>
</ul>
<h6 id="2ã€ä»£ç æ–¹å¼"><a href="#2ã€ä»£ç æ–¹å¼" class="headerlink" title="2ã€ä»£ç æ–¹å¼"></a>2ã€ä»£ç æ–¹å¼</h6><p>æ‰€æœ‰ä»£ç çš„æ–¹å¼ï¼Œéƒ½åº”è¯¥å†™ä¸€ä¸ªé…ç½®ç±»ï¼Œç„¶åæ”¾åˆ°ä¸€ä¸ªåŒ…ä¸‹ã€‚</p>
<blockquote>
<p> å®¹å™¨ä¸­åªè¦æœ‰â¼€ä¸ª WebMvcConfigurer ç»„ä»¶ã€‚é…ç½®çš„åº•å±‚â¾ä¸ºéƒ½ä¼šâ½£æ•ˆ</p>
<p> @EnableWebMvc //ç¦â½¤bootçš„é»˜è®¤é…ç½®</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€ç§å†™æ³•åˆ©ç”¨å®ç°ï¼Œé‡å†™</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//è¿™æ˜¯â¼€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">    <span class="comment">//ä¿ç•™ä»¥å‰è§„åˆ™</span></span><br><span class="line">    WebMvcConfigurer.<span class="built_in">super</span>.addResourceHandlers(registry);</span><br><span class="line">    <span class="comment">//â¾ƒâ¼°å†™æ–°çš„è§„åˆ™ã€‚</span></span><br><span class="line">    registry.addResourceHandler(<span class="string">&quot;/static/**&quot;</span>)</span><br><span class="line">    		.addResourceLocations(<span class="string">&quot;classpath:/a/&quot;</span>,<span class="string">&quot;classpath:/b/&quot;</span>)</span><br><span class="line">    		.setCacheControl(CacheControl.maxAge(<span class="number">1180</span>, TimeUnit.SECONDS));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§å†™æ³•ï¼Œç›´æ¥é‡å†™åˆ©ç”¨return,</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">webMvcConfigurer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">                <span class="comment">// å°† /static/** çš„è¯·æ±‚æ˜ å°„åˆ°å¤šä¸ª classpath èµ„æºä½ç½®</span></span><br><span class="line">                registry.addResourceHandler(<span class="string">&quot;/static/**&quot;</span>)</span><br><span class="line">                        .addResourceLocations(<span class="string">&quot;classpath:/a/&quot;</span>, <span class="string">&quot;classpath:/b/&quot;</span>)</span><br><span class="line">                        .setCacheControl(CacheControl.maxAge(<span class="number">1180</span>, TimeUnit.SECONDS)); <span class="comment">// æ³¨æ„ï¼šå•ä½æ˜¯ç§’ï¼Œä¸æ˜¯åˆ†é’Ÿ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3ã€è·¯å¾„åŒ¹é…"><a href="#3ã€è·¯å¾„åŒ¹é…" class="headerlink" title="3ã€è·¯å¾„åŒ¹é…"></a>3ã€è·¯å¾„åŒ¹é…</h4><blockquote>
<p>Spring5.3 ä¹‹ååŠ â¼Šäº†æ›´å¤šçš„ è¯·æ±‚è·¯å¾„åŒ¹é…çš„å®ç°ç­–ç•¥ï¼›</p>
<p>ä»¥å‰åªâ½€æŒ AntPathMatcher ç­–ç•¥, ç°åœ¨æä¾›äº† PathPatternParser ç­–ç•¥ã€‚å¹¶ä¸”å¯ä»¥è®©æˆ‘ä»¬æŒ‡å®š åˆ°åº•ä½¿â½¤é‚£ç§ç­–ç•¥ã€‚</p>
</blockquote>
<h5 id="1ã€Anté£æ ¼è·¯å¾„ç”¨æ³•"><a href="#1ã€Anté£æ ¼è·¯å¾„ç”¨æ³•" class="headerlink" title="1ã€Anté£æ ¼è·¯å¾„ç”¨æ³•"></a>1ã€Anté£æ ¼è·¯å¾„ç”¨æ³•</h5><p>Ant â»›æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•å…·æœ‰ä»¥ä¸‹è§„åˆ™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">*ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„å­—ç¬¦ã€‚</span><br><span class="line">?ï¼šè¡¨ç¤ºä»»æ„â¼€ä¸ªå­—ç¬¦ã€‚</span><br><span class="line">**ï¼šè¡¨ç¤ºä»»æ„æ•°é‡çš„â½¬å½•ã€‚</span><br><span class="line">&#123;&#125;ï¼šè¡¨ç¤ºâ¼€ä¸ªå‘½åçš„æ¨¡å¼å ä½ç¬¦ã€‚</span><br><span class="line">[]ï¼šè¡¨ç¤ºå­—ç¬¦é›†åˆï¼Œä¾‹å¦‚[a-z]è¡¨ç¤ºâ¼©å†™å­—âºŸã€‚</span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">*.html åŒ¹é…ä»»æ„åç§°ï¼Œæ‰©å±•åä¸º.htmlçš„â½‚ä»¶ã€‚</span><br><span class="line">/folder1/*/*.java åŒ¹é…åœ¨folder1â½¬å½•ä¸‹çš„ä»»æ„ä¸¤çº§â½¬å½•ä¸‹çš„.javaâ½‚ä»¶ã€‚</span><br><span class="line">/folder2/**/*.jsp åŒ¹é…åœ¨folder2â½¬å½•ä¸‹ä»»æ„â½¬å½•æ·±åº¦çš„.jspâ½‚ä»¶ã€‚</span><br><span class="line">/&#123;type&#125;/&#123;id&#125;.html åŒ¹é…ä»»æ„â½‚ä»¶åä¸º&#123;id&#125;.htmlï¼Œåœ¨ä»»æ„å‘½åçš„&#123;type&#125;â½¬å½•ä¸‹çš„â½‚ä»¶ã€‚</span><br><span class="line">æ³¨æ„ï¼šAnt â»›æ ¼çš„è·¯å¾„æ¨¡å¼è¯­æ³•ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œå¦‚ï¼š</span><br><span class="line">è¦åŒ¹é…â½‚ä»¶è·¯å¾„ä¸­çš„æ˜Ÿå·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\\*ã€‚</span><br><span class="line">è¦åŒ¹é…â½‚ä»¶è·¯å¾„ä¸­çš„é—®å·ï¼Œåˆ™éœ€è¦è½¬ä¹‰ä¸º\\?ã€‚</span><br></pre></td></tr></table></figure>
<h5 id="2ã€æ¨¡å¼åˆ‡æ¢"><a href="#2ã€æ¨¡å¼åˆ‡æ¢" class="headerlink" title="2ã€æ¨¡å¼åˆ‡æ¢"></a>2ã€æ¨¡å¼åˆ‡æ¢</h5><blockquote>
<p>AntPathMatcher ä¸  PathPatternParser </p>
<p>â— PathPatternParser åœ¨ jmh åŸºå‡†æµ‹è¯•ä¸‹ï¼Œæœ‰ 6~8 å€ååé‡æå‡ï¼Œé™ä½ 30%~40%ç©ºé—´åˆ†é… ç‡ </p>
<p>â— PathPatternParser å…¼å®¹ AntPathMatcherè¯­æ³•ï¼Œå¹¶â½€æŒæ›´å¤šç±»å‹çš„è·¯å¾„æ¨¡å¼ </p>
<p>â— PathPatternParser  â€œ**â€ å¤šæ®µåŒ¹é…çš„â½€æŒä»…å…è®¸åœ¨æ¨¡å¼æœ«å°¾ä½¿â½¤</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/a*/b?/&#123;p1:[a-f]+&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(HttpServletRequest request, <span class="meta">@PathVariable(&quot;p1&quot;)</span> String path)</span> &#123;</span><br><span class="line">    log.info(<span class="string">&quot;è·¯å¾„å˜é‡p1ï¼š&#123;&#125;&quot;</span>, path);</span><br><span class="line">    <span class="comment">//è·å–è¯·æ±‚è·¯å¾„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">    <span class="keyword">return</span> uri;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ€»ç»“ï¼š  </p>
<p>ä½¿â½¤é»˜è®¤çš„è·¯å¾„åŒ¹é…è§„åˆ™ï¼Œæ˜¯ç”±  PathPatternParser  æä¾›çš„</p>
<p>å¦‚æœè·¯å¾„ä¸­é—´éœ€è¦æœ‰ **ï¼Œæ›¿æ¢æˆantâ»›æ ¼è·¯å¾„</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ”¹å˜è·¯å¾„åŒ¹é…ç­–ç•¥ï¼š</span></span><br><span class="line"><span class="comment"># ant_path_matcher â½¼ç‰ˆç­–ç•¥ï¼›</span></span><br><span class="line"><span class="comment"># path_pattern_parser æ–°ç‰ˆç­–ç•¥ï¼›</span></span><br><span class="line"><span class="attr">spring.mvc.pathmatch.matching-strategy</span>=<span class="string">ant_path_matcher</span></span><br></pre></td></tr></table></figure>
<h4 id="4ã€å†…å®¹åå•†"><a href="#4ã€å†…å®¹åå•†" class="headerlink" title="4ã€å†…å®¹åå•†"></a>4ã€å†…å®¹åå•†</h4><blockquote>
<p>ä¸€å¥—ç³»ç»Ÿé€‚é…å¤šç«¯æ•°æ®è¿”å›</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220000446975.png" alt="image-20251220000446975"></p>
<h5 id="1ã€å¤šç«¯å†…å®¹é€‚é…"><a href="#1ã€å¤šç«¯å†…å®¹é€‚é…" class="headerlink" title="1ã€å¤šç«¯å†…å®¹é€‚é…"></a>1ã€å¤šç«¯å†…å®¹é€‚é…</h5><h6 id="1ã€é»˜è®¤è§„åˆ™-1"><a href="#1ã€é»˜è®¤è§„åˆ™-1" class="headerlink" title="1ã€é»˜è®¤è§„åˆ™"></a>1ã€é»˜è®¤è§„åˆ™</h6><p>åŸºäºè¯·æ±‚å¤´çš„å†…å®¹åå•†æ˜¯é»˜è®¤å¼€å¯çš„ï¼ŒåŸºäºè¯·æ±‚å‚æ•°çš„æ˜¯é»˜è®¤å…³é—­çš„</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220001519599.png" alt="image-20251220001519599"></p>
<h6 id="2ã€æ•ˆæœæ¼”ç¤º"><a href="#2ã€æ•ˆæœæ¼”ç¤º" class="headerlink" title="2ã€æ•ˆæœæ¼”ç¤º"></a>2ã€æ•ˆæœæ¼”ç¤º</h6><blockquote>
<p>è¯·æ±‚åŒä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥è¿”å›jsonå’Œxmlä¸åŒæ ¼å¼æ•°æ®</p>
</blockquote>
<p>é¦–å…ˆæˆ‘ä»¬å¯¼å…¥webçš„å¯åŠ¨å™¨é‡Œé¢é»˜è®¤å¼•å…¥äº†jsonåŒ…ï¼Œç„¶åé»˜è®¤æ˜¯åˆ©ç”¨jacksonåŒ…çš„åŠŸèƒ½</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åé»˜è®¤æ˜¯è¿”å›jsonæ•°æ®çš„ï¼Œä½†æ˜¯å¦‚æœåŠ ä¸Šjacksonçš„æ³¨è§£å¹¶ä¸”å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†å°±èƒ½å®ç°å†…å®¹åå•†çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@JacksonXmlRootElement</span>  <span class="comment">// å¯ä»¥å†™å‡ºä¸ºxmlâ½‚æ¡£</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="3ã€å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†"><a href="#3ã€å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†" class="headerlink" title="3ã€å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†"></a>3ã€å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†</h6><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"> #å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚é»˜è®¤å‚æ•°åï¼šformatã€‚é»˜è®¤æ­¤åŠŸèƒ½ä¸å¼€å¯</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.favor-parameter</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># æŒ‡å®šå†…å®¹åå•†æ—¶ä½¿â½¤çš„å‚æ•°åã€‚é»˜è®¤æ˜¯format</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.parameter-name</span>=<span class="string">type</span></span><br></pre></td></tr></table></figure>
<p>é‚£å¦‚æœåé¢è¿˜æƒ³è¿”å›Ymlå‘¢ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦äº†è§£å†…å®¹åå•†çš„åº•å±‚åŸç†</p>
<h5 id="2ã€è‡ªå®šä¹‰å†…å®¹è¿”å›"><a href="#2ã€è‡ªå®šä¹‰å†…å®¹è¿”å›" class="headerlink" title="2ã€è‡ªå®šä¹‰å†…å®¹è¿”å›"></a>2ã€è‡ªå®šä¹‰å†…å®¹è¿”å›</h5><p><strong>ä¸‹é¢æ¼”ç¤ºå¦‚ä½•è‡ªå®šä¹‰ç»„ä»¶äº†</strong></p>
<h6 id="1ã€å¢åŠ Yamlè¿”å›æ”¯æŒ"><a href="#1ã€å¢åŠ Yamlè¿”å›æ”¯æŒ" class="headerlink" title="1ã€å¢åŠ Yamlè¿”å›æ”¯æŒ"></a>1ã€å¢åŠ Yamlè¿”å›æ”¯æŒ</h6><p>ä¹‹å‰ï¼Œæˆ‘ä»¬çœ‹<code>EnableWebMvcConfiguration</code>é‡Œé¢å†™äº†æ”¯æŒçš„è¿”å›æ ¼å¼é‡Œé¢æ²¡æœ‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœè¦æ·»åŠ ï¼Œå°±å…ˆçœ‹<code>EnableWebMvcConfiguration</code>ï¼Œç„¶åå‘ç°<code>EnableWebMvcConfiguration</code>ç»§æ‰¿äº†<code>DelegatingWebMvcConfiguration</code>ï¼Œç„¶åè¿™ä¸ªåˆç»§æ‰¿äº†<code>WebMvcConfigurationSupport</code>ï¼ˆä¹Ÿå°±æ˜¯æœ€ç»ˆç»§æ‰¿çš„æ˜¯è¿™ä¸ªï¼‰ï¼Œç„¶åçœ‹äº†é‡Œé¢æ²¡æœ‰æ”¯æŒymlçš„ï¼Œæœ‰xmlæ‰€ä»¥ä¹‹å‰å¯¼ä¸ªåŒ…ï¼Œç„¶åé…ç½®ä¸€ä¸‹å°±èƒ½æ”¯æŒäº†ï¼Œä½†æ˜¯è¿™é‡Œåº•å±‚æ²¡æœ‰æ”¯æŒyamlï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰äº†ã€‚</p>
<p>é¦–å…ˆå¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-yaml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æŠŠå¯¹è±¡å†™å‡ºæˆYAML</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æµ‹è¯•ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">	<span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    person.setId(<span class="number">1L</span>);</span><br><span class="line">    person.setUserName(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    person.setEmail(<span class="string">&quot;aaa@qq.com&quot;</span>);</span><br><span class="line">    person.setAge(<span class="number">18</span>);</span><br><span class="line">    <span class="type">YAMLFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">YAMLFactory</span>().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER);</span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(factory);<span class="comment">//åœ¨åº•å±‚è½¬jsonæˆ–è€…å…¶ä»–éƒ½æ˜¯åˆ©ç”¨è¿™ä¸ªï¼Œç„¶åå‘ç°é‡Œé¢å¯ä»¥ä¼ å…¥å·¥å‚çš„æ–¹æ³•</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> mapper.writeValueAsString(person);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨èƒ½åœ¨æµ‹è¯•ç±»é‡Œè¿›è¡Œè½¬åŒ–ï¼Œåé¢å°±æ˜¯è¦è¿›è¡Œé…ç½®ï¼Œå‘ŠçŸ¥springbootï¼Œå­˜åœ¨ä¸€ç§æ–°æ ¼å¼å«yaml</p>
<p>ç¼–å†™é…ç½®</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ–°å¢â¼€ç§åª’ä½“ç±»å‹</span></span><br><span class="line"><span class="attr">spring.mvc.contentnegotiation.media-types.yaml</span>=<span class="string">text/yaml</span></span><br></pre></td></tr></table></figure>
<p>å¢åŠ  <code>HttpMessageConverter</code> ç»„ä»¶ï¼Œä¸“â»”è´Ÿè´£æŠŠå¯¹è±¡å†™å‡ºä¸ºyamlæ ¼å¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WebMvcConfigurer <span class="title function_">webMvcConfigurer</span><span class="params">()</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">	<span class="meta">@Override</span> <span class="comment">//é…ç½®â¼€ä¸ªèƒ½æŠŠå¯¹è±¡è½¬ä¸ºyamlçš„messageConverter</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureMessageConverters</span><span class="params">(List&lt;HttpMessageConverter&lt;?&gt; &gt; converters)</span> &#123;</span><br><span class="line">			converters.add(<span class="keyword">new</span> <span class="title class_">MyYamlHttpMessageConverter</span>());<span class="comment">//è¿™é‡Œå°±æ˜¯å¢åŠ è‡ªå®šä¹‰çš„è½¬æ¢å™¨äº†</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyYamlHttpMessageConverter</span> <span class="keyword">extends</span> <span class="title class_">AbstractHttpMessageConverter</span>&lt;Object&gt;&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyYamlHttpMessageConverter</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//springbootä¸çŸ¥é“è¿™ä¸ªè½¬æ¢å™¨æ”¯æŒå“ªç§ç±»å‹ï¼Œæ‰€ä»¥è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œåˆšå¥½é‡Œé¢æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯å‘Šè¯‰springbootæ”¯æŒå“ªç§ç±»å‹çš„</span></span><br><span class="line">        <span class="built_in">super</span>(<span class="keyword">new</span> <span class="title class_">MediaType</span>(<span class="string">&quot;text&quot;</span>,<span class="string">&quot;yaml&quot;</span>,Charset.forName(<span class="string">&quot;UTF-8&quot;</span>)));<span class="comment">//è¿™é‡Œå…¶å®è·Ÿä¸Šé¢çš„é…ç½®æ˜¯è¦å¯¹åº”çš„</span></span><br><span class="line">    	<span class="built_in">this</span>.objectMapper = <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(<span class="keyword">new</span> <span class="title class_">YAMLFactory</span>().disable(YAMLGenerator.Feature.WRITE_DOC_START_MARKER));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">supports</span><span class="params">(Class&lt;?&gt; clazz)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//è¿™é‡Œå¯ä»¥å†™åˆ¤æ–­ï¼Œä½†è¿™é‡Œçœç•¥äº†ï¼Œåªè¦æ˜¯å¯¹è±¡ç±»å‹éƒ½æ”¯æŒ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//@RequestBodyé…åˆï¼Œè¿™æ¬¡æˆ‘ä»¬çš„å®ä¾‹æ˜¯ResponseBodyï¼Œä¸ç”¨ç®¡å¦‚ä½•è¯»å–ï¼Œåªç”¨ç®¡è¿”å›å°±å¥½äº†ï¼Œæ‰€ä»¥è¿™ä¸ªä¸ç”¨å†™</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">readInternal</span><span class="params">(Class&lt;?&gt; clazz, HttpInputMessage inputMessage)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">writeInternal</span><span class="params">(Object methodReturnValue, HttpOutputMessage outputMessage)</span> </span><br><span class="line">            <span class="keyword">throws</span> IOException, HttpMessageNotWritableException &#123;</span><br><span class="line">        <span class="comment">//try-withè¯­æ³•</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> outputMessage.getBody())&#123;</span><br><span class="line">            <span class="comment">// å°†å¯¹è±¡è½¬æ¢ä¸ºYAMLå¹¶å†™å…¥è¾“å‡ºæµ</span></span><br><span class="line">            <span class="built_in">this</span>.objectMapper.writeValue(os, methodReturnValue);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="2ã€æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–"><a href="#2ã€æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–" class="headerlink" title="2ã€æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–"></a><strong>2ã€æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–</strong></h6><p>ç¬¬ä¸€æ­¥ï¼šé…ç½®åª’ä½“ç±»å‹çš„æ”¯æŒã€‚</p>
<p>â€‹    <code>spring.mvc.contentnegotiation.media-types.yaml=text/yaml</code></p>
<p>ç¬¬äºŒæ­¥ï¼šç¼–å†™å¯¹åº”çš„HttpMessageConverterã€‚</p>
<p>â€‹    æŒ‰ç…§ä¸Šé¢çš„ç¤ºä¾‹</p>
<p>ç¬¬ä¸‰æ­¥ï¼šæŠŠ<code>MessageConverter</code>åŠ å…¥åˆ°åº•å±‚ã€‚</p>
<p>â€‹    å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>webMvcConfigurer</code>ç»„ä»¶å¹¶é…ç½®åº•å±‚çš„<code>MessageConverter</code></p>
<h5 id="3ã€å†…å®¹åå•†åŸç†-HttpMessageConverter"><a href="#3ã€å†…å®¹åå•†åŸç†-HttpMessageConverter" class="headerlink" title="3ã€å†…å®¹åå•†åŸç†-HttpMessageConverter"></a>3ã€å†…å®¹åå•†åŸç†-HttpMessageConverter</h5><blockquote>
<p><code>HttpMessageConverter</code>æ€ä¹ˆå·¥ä½œï¼Ÿä½•æ—¶å·¥ä½œï¼Ÿ</p>
<p>å®šåˆ¶<code>HttpMessageConverter</code> æ¥å®ç°å¤šç«¯å†…å®¹åå•†</p>
<p>ç¼–å†™ <code>WebMvcConfigurer</code>  æä¾›çš„ <code>configureMessageConverters</code> åº•å±‚ï¼Œä¿®æ”¹åº•å±‚çš„<code>HttpMessageConverter</code> å°±è¡Œäº†ã€‚</p>
</blockquote>
<p>å®ç°ä¸Šæˆ‘ä»¬åˆ©ç”¨<code>WebMvcConfigurer</code>  æä¾›çš„ <code>configureMessageConverters</code> ï¼Œç„¶åè‡ªå®šä¹‰è¿™ä¸ª<code>configureMessageConverters</code> å°±èƒ½ä¿®æ”¹åº•å±‚çš„<code>HttpMessageConverter</code> å°±è¡Œäº†ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ<strong>é‚£ä¹ˆæˆ‘ä»¬å…ˆäº†è§£@ResponseBodyçš„åŸç†</strong></p>
<h6 id="1ã€-ReeponseBody-ç”±-HttpMessageConverter-å¤„ç†"><a href="#1ã€-ReeponseBody-ç”±-HttpMessageConverter-å¤„ç†" class="headerlink" title="1ã€@ReeponseBody ç”± HttpMessageConverter å¤„ç†"></a><strong>1ã€<code>@ReeponseBody</code> ç”± <code>HttpMessageConverter</code> å¤„ç†</strong></h6><blockquote>
<p>æ ‡æ³¨äº†<code>@ReeponseBody</code> çš„è¿”å›å€¼ å°†ä¼šç”±æ”¯æŒä»–çš„ <code>HttpMessageConverter</code> å†™ç»™æµè§ˆå™¨</p>
</blockquote>
<p>å¦‚æœ<code>controller</code>æ–¹æ³•çš„è¿”å›å€¼æ ‡æ³¨äº†<code>@RespomseBody</code>æ³¨è§£</p>
<p>æµç¨‹ï¼š</p>
<p>â€‹    1ã€è¯·æ±‚è¿›æ¥ï¼Œå…ˆåˆ°äº† <code>DispatcherServlet</code>çš„ <code>doDispatch()</code>è¿›è¡Œå¤„ç†</p>
<p>â€‹    2ã€æ‰¾åˆ°ä¸€ä¸ª <code>HandlerAdapter</code>é€‚é…å™¨</p>
<p>â€‹    3ã€ç„¶åæˆ‘ä»¬æ ‡æ³¨äº†GetMappingï¼Œç„¶ååŒ¹é…åˆ°äº† <code>RequestMappingHandlerAdapter</code> æ¥æ‰§è¡Œï¼Œè°ƒç”¨<code>invokeHandlerMethod()</code>æ–¹æ³•æ¥æ‰§è¡Œã€‚</p>
<p>â€‹    4ã€åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå‡†å¤‡å¥½ä¸¤ä¸ªä¸œè¥¿</p>
<p>â€‹        a. <code>HandlerMethodArgumentResolver</code> ï¼š å‚æ•°è§£æå™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸ªå‚æ•°å€¼</p>
<p>â€‹        b. <code>HandlerMethodReturnValueHandler</code> ï¼š è¿”å›å€¼å¤„ç†å™¨ï¼Œç¡®å®šç›®æ ‡æ–¹æ³•çš„åè¿½åªè¯¥æ€ä¹ˆå†™å‡ºå»ã€‚</p>
<p>â€‹    5ã€<code>RequestMappingHandlerAdapter</code> é‡Œé¢çš„<code>invokeAndHandle(webReques,mavContainer)</code> çœŸæ­£æ‰§è¡Œç›®æ ‡æ–¹æ³•</p>
<p>â€‹    6ã€ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œä¼šè¿”å› <strong>è¿”å›å€¼å¯¹è±¡</strong></p>
<p>â€‹    7ã€æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„è¿”å›å€¼å¤„ç†å™¨ <code>HandlerMethodReturnValueHandler</code></p>
<p>â€‹    8ã€æœ€ç»ˆæ‰¾åˆ° <code>RequestResponseBodyMethodProcessor</code>   èƒ½å¤„ç† æ ‡æ³¨äº† <code>@ResponseBody</code> æ³¨è§£çš„â½…æ³•</p>
<p>â€‹    9ã€<code>RequestResponseBodyMethodProcessor</code>è°ƒâ½¤ <code>writeWithMessageConverters</code> ï¼Œåˆ©ç”¨</p>
<p><code>MessageConverter</code>   æŠŠè¿”å›å€¼å†™å‡ºå»</p>
<blockquote>
<p>ä¸Šé¢è§£é‡Šï¼š<code>@ResponseBody</code> ç”± <code>HttpMessageConverter</code> å¤„ç†ï¼Œä¸‹é¢è§£é‡Š<code>HttpMessageConverter</code> å¦‚ä½•å¤„ç†çš„</p>
</blockquote>
<h6 id="2ã€HttpMessageConverter-ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†"><a href="#2ã€HttpMessageConverter-ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†" class="headerlink" title="2ã€HttpMessageConverter ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†"></a>2ã€<code>HttpMessageConverter</code> ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†</h6><p>â€‹    1ã€éå†æ‰€æœ‰çš„ <code>MessageConverter</code> çœ‹è°æ”¯æŒè¿™ç§å†…å®¹ç±»å‹çš„æ•°æ®</p>
<p>â€‹    2ã€é»˜è®¤çš„ <code>MessageConverter</code> æœ‰å¾ˆå¤šConverter</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220021951029.png" alt="image-20251220021951029"></p>
<p>â€‹    3ã€  æœ€ç»ˆå› ä¸ºè¦ json  æ‰€ä»¥ MappingJackson2HttpMessageConverter  â½€æŒå†™å‡ºjson </p>
<p>â€‹    4ã€  jacksonâ½¤ ObjectMapper  æŠŠå¯¹è±¡å†™å‡ºå»</p>
<h6 id="3ã€WebMvcAutoConfiguration-æä¾›å‡ ç§é»˜è®¤-HttpMessageConverters"><a href="#3ã€WebMvcAutoConfiguration-æä¾›å‡ ç§é»˜è®¤-HttpMessageConverters" class="headerlink" title="3ã€WebMvcAutoConfiguration æä¾›å‡ ç§é»˜è®¤ HttpMessageConverters"></a><strong>3ã€<code>WebMvcAutoConfiguration</code> æä¾›å‡ ç§é»˜è®¤ <code>HttpMessageConverters</code></strong></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">EnableWebMvcConfiguration é€šè¿‡ addDefaultHttpMessageConverters æ·»åŠ äº†é»˜è®¤çš„ MessageConverter,å¦‚ä¸‹ï¼š</span><br><span class="line">ByteArrayHttpMessageConverter ï¼š â½€æŒå­—èŠ‚æ•°æ®è¯»å†™</span><br><span class="line">StringHttpMessageConverter ï¼š â½€æŒå­—ç¬¦ä¸²è¯»å†™</span><br><span class="line">ResourceHttpMessageConverter ï¼šâ½€æŒèµ„æºè¯»å†™</span><br><span class="line">ResourceRegionHttpMessageConverter : â½€æŒåˆ†åŒºèµ„æºå†™å‡º</span><br><span class="line">AllEncompassingFormHttpMessageConverter ï¼šâ½€æŒè¡¨å•xml/jsonè¯»å†™</span><br><span class="line">MappingJackson2HttpMessageConverter ï¼š â½€æŒè¯·æ±‚å“åº”ä½“Jsonè¯»å†™</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç³»ç»Ÿæä¾›é»˜è®¤çš„MessageConverter åŠŸèƒ½æœ‰é™ï¼Œä»…â½¤äºjsonæˆ–è€…æ™®é€šè¿”å›æ•°æ®ã€‚é¢å¤–å¢åŠ æ–°çš„å†…å®¹åå•† åŠŸèƒ½ï¼Œå¿…é¡»å¢åŠ æ–°çš„  HttpMessageConverter</p>
</blockquote>
<p>é‚£ä¹ˆå°±è‡ªç„¶æƒ³åˆ°ï¼Œå¯¼å…¥ç›¸å…³çš„POMåŒ…ç„¶åç¼–å†™é…ç½®ï¼Œå¢åŠ ç›¸åº”çš„Converterå°±å¯ä»¥äº†ã€‚</p>
<h6 id="4ã€WebMvcConfigurationSupport"><a href="#4ã€WebMvcConfigurationSupport" class="headerlink" title="4ã€WebMvcConfigurationSupport"></a>4ã€WebMvcConfigurationSupport</h6><p>æä¾›äº†å¾ˆå¤šçš„é»˜è®¤è®¾ç½®ã€‚</p>
<p>åˆ¤æ–­ç³»ç»Ÿä¸­æ˜¯å¦æœ‰ç›¸åº”çš„ç±»ï¼šå¦‚æœæœ‰ï¼Œå°±åŠ å…¥ç›¸åº”çš„<code>HttpMessageConverter</code></p>
<h4 id="5ã€æ¨¡æ¿å¼•æ“"><a href="#5ã€æ¨¡æ¿å¼•æ“" class="headerlink" title="5ã€æ¨¡æ¿å¼•æ“"></a>5ã€æ¨¡æ¿å¼•æ“</h4><blockquote>
<p>ç”±äº SpringBoot ä½¿â½¤äº†åµŒâ¼Šå¼ Servlet å®¹å™¨ã€‚æ‰€ä»¥ JSP é»˜è®¤æ˜¯ä¸èƒ½ä½¿â½¤çš„ã€‚ </p>
<p>å¦‚æœéœ€è¦æœåŠ¡ç«¯â»šâ¾¯æ¸²æŸ“ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿â½¤  æ¨¡æ¿å¼•æ“</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220043210589.png" alt="image-20251220043210589"></p>
<p>ä¸Šé¢æ˜¯å‰åç«¯åˆ†ç¦»å¼€å‘ï¼Œä¸‹é¢æ˜¯å‰åç«¯ä¸åˆ†ç¦»å¼€å‘ã€‚</p>
<p>æ¨¡æ¿å¼•æ“â»šâ¾¯é»˜è®¤æ”¾åœ¨  <code>src/main/resources/templates</code> </p>
<p>SpringBoot åŒ…å«ä»¥ä¸‹æ¨¡æ¿å¼•æ“çš„â¾ƒåŠ¨é…ç½® </p>
<p>FreeMarker </p>
<p>Groovy </p>
<p><strong>Thymeleaf</strong> </p>
<p>Mustache</p>
<h5 id="1ã€Thymeleafæ•´åˆ"><a href="#1ã€Thymeleafæ•´åˆ" class="headerlink" title="1ã€Thymeleafæ•´åˆ"></a>1ã€Thymeleafæ•´åˆ</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>â¾ƒåŠ¨é…ç½®åŸç† </p>
<ol>
<li>å¼€å¯äº†  <code>org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration</code>  â¾ƒåŠ¨é…ç½® </li>
<li>å±æ€§ç»‘å®šåœ¨  ThymeleafProperties ä¸­ï¼Œå¯¹åº”é…ç½®â½‚ä»¶  spring.thymeleaf å†…å®¹ </li>
<li>æ‰€æœ‰çš„æ¨¡æ¿â»šâ¾¯é»˜è®¤åœ¨  classpath:/templates  â½‚ä»¶å¤¹ä¸‹ </li>
<li>é»˜è®¤æ•ˆæœ<ol>
<li>æ‰€æœ‰çš„æ¨¡æ¿â»šâ¾¯åœ¨  classpath:/templates/  ä¸‹â¾¯æ‰¾</li>
<li>æ‰¾åç¼€åä¸º .html  çš„â»šâ¾¯</li>
</ol>
</li>
</ol>
<h5 id="2ã€åŸºç¡€è¯­æ³•"><a href="#2ã€åŸºç¡€è¯­æ³•" class="headerlink" title="2ã€åŸºç¡€è¯­æ³•"></a>2ã€åŸºç¡€è¯­æ³•</h5><h6 id="1ã€æ ¸å¿ƒç”¨æ³•"><a href="#1ã€æ ¸å¿ƒç”¨æ³•" class="headerlink" title="1ã€æ ¸å¿ƒç”¨æ³•"></a>1ã€æ ¸å¿ƒç”¨æ³•</h6><p><code>th:xxx</code> ï¼šåŠ¨æ€æ¸²æŸ“åˆ¶å®šçš„htmlæ ‡ç­¾å±æ€§å€¼æˆ–è€…thæŒ‡ä»¤ï¼ˆéå†ã€åˆ¤æ–­ç­‰ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">th:text æ ‡ç­¾å†…æ–‡æœ¬å€¼æ¸²æŸ“</span><br><span class="line">th:utext ä¸ä¼šè½¬ä¹‰ï¼Œæ˜¾ç¤ºä¸ºhtmlåŸæœ¬çš„æ ·å­</span><br><span class="line">th:å±æ€§ æ ‡ç­¾åˆ¶å®šå±æ€§æ¸²æŸ“</span><br><span class="line">th:attr æ ‡ç­¾ä»»æ„å±æ€§æ¸²æŸ“</span><br><span class="line">th:if</span><br><span class="line">th:eachç­‰</span><br></pre></td></tr></table></figure>
<p>ä¾‹å¦‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;content&#125;&quot;</span>&gt;</span>åŸå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../images/gtvglogo.png&quot;</span> </span></span><br><span class="line"><span class="tag">     <span class="attr">th:attr</span>=<span class="string">&quot;src=@&#123;/images/gtvglogo.png&#125;,title=#&#123;logo&#125;,alt=#&#123;logo&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>è¡¨è¾¾å¼ï¼šç”¨æ¥åŠ¨æ€å–å€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$&#123;&#125; å˜é‡å–å€¼ï¼Œä½¿ç”¨modelå…±äº«ç»™é¡µé¢çš„å€¼éƒ½ç›´æ¥ç”¨$&#123;&#125;</span><br><span class="line">@&#123;&#125; urlè·¯å¾„</span><br><span class="line">#&#123;&#125; å›½é™…åŒ–æ¶ˆæ¯</span><br><span class="line">~&#123;&#125; ç‰‡æ®µå¼•ç”¨</span><br><span class="line">*&#123;&#125; å˜é‡é€‰æ‹©ï¼Œéœ€è¦é…åˆth:objectç»‘å®šå¯¹è±¡</span><br></pre></td></tr></table></figure>
<p>ç³»ç»Ÿå·¥å…·&amp;å†…ç½®å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">param ï¼šè¯·æ±‚å‚æ•°å¯¹è±¡</span><br><span class="line">session ï¼šsessionå¯¹è±¡</span><br><span class="line">application ï¼šapplicationå¯¹è±¡</span><br><span class="line">#execInfo ï¼šæ¨¡æ¿æ‰§â¾ä¿¡æ¯</span><br><span class="line">#messages ï¼šå›½é™…åŒ–æ¶ˆæ¯</span><br><span class="line">#uris ï¼šuri/urlâ¼¯å…·</span><br><span class="line">#conversions ï¼šç±»å‹è½¬æ¢â¼¯å…·</span><br><span class="line">#dates ï¼šâ½‡æœŸâ¼¯å…·ï¼Œæ˜¯ava.util.Date å¯¹è±¡çš„â¼¯å…·ç±»</span><br><span class="line">#calendars ï¼šç±»ä¼¼#datesï¼Œåªä¸è¿‡æ˜¯java.util.Calendar å¯¹è±¡çš„â¼¯å…·ç±»</span><br><span class="line">#temporals ï¼š JDK8+ java.time API â¼¯å…·ç±»</span><br><span class="line">#numbers ï¼šæ•°å­—æ“ä½œâ¼¯å…·</span><br><span class="line">#strings ï¼šå­—ç¬¦ä¸²æ“ä½œ</span><br><span class="line">#objects ï¼šå¯¹è±¡æ“ä½œ</span><br><span class="line">#bools ï¼šboolæ“ä½œ</span><br><span class="line">#arrays ï¼šarrayâ¼¯å…·</span><br><span class="line">#lists ï¼šlistâ¼¯å…·</span><br><span class="line">#sets ï¼šsetâ¼¯å…·</span><br><span class="line">#maps ï¼šmapâ¼¯å…·</span><br><span class="line">#aggregates ï¼šé›†åˆèšåˆâ¼¯å…·ï¼ˆsumã€avgï¼‰</span><br><span class="line">#ids ï¼šidâ½£æˆå·¥å…·</span><br></pre></td></tr></table></figure>
<h6 id="2ã€è¯­æ³•ç¤ºä¾‹"><a href="#2ã€è¯­æ³•ç¤ºä¾‹" class="headerlink" title="2ã€è¯­æ³•ç¤ºä¾‹"></a>2ã€è¯­æ³•ç¤ºä¾‹</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">è¡¨è¾¾å¼ï¼š</span><br><span class="line">    å˜é‡å–å€¼ï¼š$&#123;...&#125;</span><br><span class="line">    url å–å€¼ï¼š@&#123;...&#125;</span><br><span class="line">    å›½é™…åŒ–æ¶ˆæ¯ï¼š#&#123;...&#125;</span><br><span class="line">    å˜é‡é€‰æ‹©ï¼š*&#123;...&#125;</span><br><span class="line">    â½šæ®µå¼•â½¤: ~&#123;...&#125;</span><br><span class="line"></span><br><span class="line">â½‚æœ¬æ“ä½œï¼š</span><br><span class="line">	æ‹¼ä¸²ï¼š +</span><br><span class="line">	â½‚æœ¬æ›¿æ¢ï¼š| The name is $&#123;name&#125; |</span><br><span class="line"></span><br><span class="line">å¸ƒå°”æ“ä½œï¼š</span><br><span class="line">    â¼†è¿›åˆ¶è¿ç®—ï¼š and,or</span><br><span class="line">    å–åï¼š!,not</span><br><span class="line"></span><br><span class="line">â½è¾ƒè¿ç®—ï¼š</span><br><span class="line">	â½è¾ƒï¼š &gt;ï¼Œ&lt;ï¼Œ&lt;=ï¼Œ&gt;=ï¼ˆgtï¼Œltï¼Œge,leï¼‰</span><br><span class="line">	ç­‰å€¼è¿ç®—ï¼š ==,!=ï¼ˆeqï¼Œneï¼‰</span><br><span class="line">æ¡ä»¶è¿ç®—ï¼š</span><br><span class="line">    if-thenï¼š (if)?(then)</span><br><span class="line">    if-then-else: (if)?(then):(else)</span><br><span class="line">    default: (value)?:(defaultValue)</span><br><span class="line">ç‰¹æ®Šè¯­æ³•ï¼š</span><br><span class="line">	â½†æ“ä½œï¼š_</span><br><span class="line"></span><br><span class="line">æ‰€æœ‰ä»¥ä¸Šéƒ½å¯ä»¥åµŒå¥—ç»„åˆ</span><br><span class="line">&#x27;User is of type &#x27; + ($&#123;user.isAdmin()&#125; ? &#x27;Administrator&#x27; : ($&#123;user.type&#125; ?: &#x27;Unknown&#x27;))</span><br></pre></td></tr></table></figure>
<h6 id="3ã€å±æ€§è®¾ç½®"><a href="#3ã€å±æ€§è®¾ç½®" class="headerlink" title="3ã€å±æ€§è®¾ç½®"></a>3ã€å±æ€§è®¾ç½®</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.th:href=&quot;@&#123;/product/list&#125;&quot;</span><br><span class="line">2.th:attr=&quot;class=$&#123;active&#125;&quot;</span><br><span class="line">3.th:attr=&quot;src=@&#123;/images/gtvglogo.png&#125;,title=$&#123;logo&#125;,alt=#&#123;logo&#125;&quot;</span><br><span class="line">4.th:checked=&quot;$&#123;user.active&#125;&quot;</span><br></pre></td></tr></table></figure>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;content&#125;&quot;</span>&gt;</span>åŸå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;../../images/gtvglogo.png&quot;</span> <span class="attr">th:attr</span>=<span class="string">&quot;src=@&#123;/images/gtvglogo.png&#125;,title=#&#123;logo&#125;,alt=#&#123;logo&#125;&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="4ã€éå†"><a href="#4ã€éå†" class="headerlink" title="4ã€éå†"></a>4ã€éå†</h6><blockquote>
<p>è¯­ æ³•ï¼š   th:each=â€ å…ƒç´ å , è¿­ä»£çŠ¶æ€ : ${ é›†åˆ }â€</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;prod : $&#123;prods&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;prod.name&#125;&quot;</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;prod.price&#125;&quot;</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;&quot;</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;prod,iterStat : $&#123;prods&#125;&quot;</span> <span class="attr">th:class</span>=<span class="string">&quot;$&#123;iterStat.odd&#125;? &#x27;odd&#x27;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;prod.name&#125;&quot;</span>&gt;</span>Onions<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;prod.price&#125;&quot;</span>&gt;</span>2.41<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;&quot;</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">        index: [[$&#123;iterStat.index&#125;]]</span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">iterStat æœ‰ä»¥ä¸‹å±æ€§ï¼š</span><br><span class="line">    indexï¼šå½“å‰éå†å…ƒç´ çš„ç´¢å¼•ï¼Œä»0å¼€å§‹</span><br><span class="line">    countï¼šå½“å‰éå†å…ƒç´ çš„ç´¢å¼•ï¼Œä»1å¼€å§‹</span><br><span class="line">    sizeï¼šéœ€è¦éå†å…ƒç´ çš„æ€»æ•°é‡</span><br><span class="line">    currentï¼šå½“å‰æ­£åœ¨éå†çš„å…ƒç´ å¯¹è±¡</span><br><span class="line">    even/oddï¼šæ˜¯å¦å¶æ•°/å¥‡æ•°â¾</span><br><span class="line">    firstï¼šæ˜¯å¦ç¬¬â¼€ä¸ªå…ƒç´ </span><br><span class="line">    lastï¼šæ˜¯å¦æœ€åâ¼€ä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure>
<h6 id="5ã€åˆ¤æ–­"><a href="#5ã€åˆ¤æ–­" class="headerlink" title="5ã€åˆ¤æ–­"></a>5ã€åˆ¤æ–­</h6><p><code>th:if</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag"><span class="attr">href</span>=<span class="string">&quot;comments.html&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">th:href</span>=<span class="string">&quot;@&#123;/product/comments(prodId=$&#123;prod.id&#125;)&#125;&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #lists.isEmpty(prod.comments)&#125;&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span>view<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>th:switch</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:switch</span>=<span class="string">&quot;$&#123;user.role&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;&#x27;admin&#x27;&quot;</span>&gt;</span>User is an administrator<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;#&#123;roles.manager&#125;&quot;</span>&gt;</span>User is a manager<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:case</span>=<span class="string">&quot;*&quot;</span>&gt;</span>User is some other thing<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="6ã€å±æ€§ä¼˜å…ˆçº§"><a href="#6ã€å±æ€§ä¼˜å…ˆçº§" class="headerlink" title="6ã€å±æ€§ä¼˜å…ˆçº§"></a>6ã€å±æ€§ä¼˜å…ˆçº§</h6><p>ç‰‡æ®µã€‹éå†ã€‹åˆ¤æ–­</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">th:each</span>=<span class="string">&quot;item : $&#123;items&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;item.description&#125;&quot;</span>&gt;</span>Item description here...<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220054531309.png" alt="image-20251220054531309"></p>
<h6 id="7ã€è¡Œå†…å†™æ³•"><a href="#7ã€è¡Œå†…å†™æ³•" class="headerlink" title="7ã€è¡Œå†…å†™æ³•"></a>7ã€è¡Œå†…å†™æ³•</h6><p><code>[[...]] or  [(...)]</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, [[$&#123;session.user.name&#125;]]!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="8ã€å˜é‡é€‰æ‹©"><a href="#8ã€å˜é‡é€‰æ‹©" class="headerlink" title="8ã€å˜é‡é€‰æ‹©"></a>8ã€å˜é‡é€‰æ‹©</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:object</span>=<span class="string">&quot;$&#123;session.user&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;firstName&#125;&quot;</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;lastName&#125;&quot;</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;*&#123;nationality&#125;&quot;</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ç­‰åŒäº</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.user.firstName&#125;&quot;</span>&gt;</span>Sebastian<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Surname: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.user.lastName&#125;&quot;</span>&gt;</span>Pepper<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nationality: <span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;session.user.nationality&#125;&quot;</span>&gt;</span>Saturn<span class="tag">&lt;/<span class="name">span</span>&gt;</span>.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="9ã€æ¨¡æ¿å¸ƒå±€"><a href="#9ã€æ¨¡æ¿å¸ƒå±€" class="headerlink" title="9ã€æ¨¡æ¿å¸ƒå±€"></a>9ã€æ¨¡æ¿å¸ƒå±€</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å®šä¹‰æ¨¡æ¿ï¼š th:fragment </span><br><span class="line">å¼•â½¤æ¨¡æ¿ï¼š~&#123;templatename::selector&#125; </span><br><span class="line">æ’â¼Šæ¨¡æ¿ï¼šth:insert ã€th:replace </span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">th:fragment</span>=<span class="string">&quot;copy&quot;</span>&gt;</span><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:insert</span>=<span class="string">&quot;~&#123;footer :: copy&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:replace</span>=<span class="string">&quot;~&#123;footer :: copy&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    ç»“æœï¼š</span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="symbol">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="10ã€devtools"><a href="#10ã€devtools" class="headerlink" title="10ã€devtools"></a>10ã€devtools</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹â»šâ¾¯åï¼› ctrl+F9  åˆ·æ–°æ•ˆæœï¼› javaä»£ç çš„ä¿®æ”¹ï¼Œå¦‚æœ devtools  çƒ­å¯åŠ¨äº†ï¼Œå¯èƒ½ä¼šå¼•èµ·â¼€äº›bugï¼Œéš¾ä»¥æ’æŸ¥</p>
<h4 id="6ã€å›½é™…åŒ–"><a href="#6ã€å›½é™…åŒ–" class="headerlink" title="6ã€å›½é™…åŒ–"></a>6ã€å›½é™…åŒ–</h4><p>å›½é™…åŒ–çš„â¾ƒåŠ¨é…ç½®å‚ç…§ <code>MessageSourceAutoConfiguration</code></p>
<p>å®ç°æ­¥éª¤ï¼š </p>
<ol>
<li><p>Spring Boot åœ¨ç±»è·¯å¾„æ ¹ä¸‹æŸ¥æ‰¾ messagesèµ„æºç»‘å®šâ½‚ä»¶ã€‚â½‚ä»¶åä¸ºï¼š messages.properties</p>
</li>
<li><p>å¤šè¯­â¾”å¯ä»¥å®šä¹‰å¤šä¸ªæ¶ˆæ¯â½‚ä»¶ï¼Œå‘½åä¸º messages_ åŒºåŸŸä»£ç  .properties  ã€‚å¦‚ï¼š </p>
<p>a. messages.properties  ï¼šé»˜è®¤ </p>
<p>b. messages_zh_CN.properties  ï¼šä¸­â½‚ç¯å¢ƒ </p>
<p>c. messages_en_US.properties  ï¼šè‹±è¯­ç¯å¢ƒ</p>
</li>
<li><p>åœ¨ç¨‹åºä¸­å¯ä»¥â¾ƒåŠ¨æ³¨â¼Š  MessageSource  ç»„ä»¶ï¼Œè·å–å›½é™…åŒ–çš„é…ç½®é¡¹å€¼ </p>
</li>
<li>åœ¨â»šâ¾¯ä¸­å¯ä»¥ä½¿â½¤è¡¨è¾¾å¼  #{}  è·å–å›½é™…åŒ–çš„é…ç½®é¡¹å€¼</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span>  <span class="comment">//å›½é™…åŒ–å–æ¶ˆæ¯â½¤çš„ç»„ä»¶</span></span><br><span class="line">MessageSource messageSource;</span><br><span class="line"><span class="meta">@GetMapping(&quot;/haha&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">haha</span><span class="params">(HttpServletRequest request)</span>&#123;</span><br><span class="line">	<span class="type">Locale</span> <span class="variable">locale</span> <span class="operator">=</span> request.getLocale();</span><br><span class="line">    <span class="comment">//åˆ©â½¤ä»£ç çš„â½…å¼è·å–å›½é™…åŒ–é…ç½®â½‚ä»¶ä¸­æŒ‡å®šçš„é…ç½®é¡¹çš„å€¼</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">login</span> <span class="operator">=</span> messageSource.getMessage(<span class="string">&quot;login&quot;</span>, <span class="literal">null</span>, locale);</span><br><span class="line">    <span class="keyword">return</span> login;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šå¸¸æ˜¯å¼€å‘ä¸¤å¥—ç³»ç»Ÿï¼Œä¸ç„¶å°±æ˜¯é…ä¸¤å¥—propertiesï¼Œä¸€ä¸ªä¸­æ–‡ä¸€ä¸ªè‹±æ–‡ç„¶ååˆ†åˆ«ç»‘å®šã€‚</p>
<h4 id="7ã€é”™è¯¯å¤„ç†"><a href="#7ã€é”™è¯¯å¤„ç†" class="headerlink" title="7ã€é”™è¯¯å¤„ç†"></a>7ã€é”™è¯¯å¤„ç†</h4><h5 id="1ã€é»˜è®¤æœºåˆ¶"><a href="#1ã€é»˜è®¤æœºåˆ¶" class="headerlink" title="1ã€é»˜è®¤æœºåˆ¶"></a>1ã€é»˜è®¤æœºåˆ¶</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯å¤„ç†çš„â¾ƒåŠ¨é…ç½®éƒ½åœ¨ ErrorMvcAutoConfiguration ä¸­ï¼Œ</span><br><span class="line">ä¸¤â¼¤æ ¸â¼¼æœºåˆ¶ï¼š</span><br><span class="line">1. SpringBoot ä¼šâ¾ƒé€‚åº”å¤„ç†é”™è¯¯ï¼Œå“åº”â»šâ¾¯æˆ–JSONæ•°æ®</span><br><span class="line">2. SpringMVCçš„é”™è¯¯å¤„ç†æœºåˆ¶ä¾ç„¶ä¿ç•™ï¼ŒMVCå¤„ç†ä¸äº†ï¼Œæ‰ä¼šäº¤ç»™bootè¿›â¾å¤„ç†</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220055831325.png" alt="image-20251220055831325"></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶é‡Œé¢é…ç½®é”™è¯¯è·¯å¾„ï¼Œå½“å‘ç”Ÿé”™è¯¯ä»¥åï¼Œé”™è¯¯çš„è¯·æ±‚è½¬å‘çš„è·¯å¾„ã€‚</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.error.path</span>=<span class="string">/error</span></span><br></pre></td></tr></table></figure>
<p>å‘â½£é”™è¯¯ä»¥åï¼Œè½¬å‘ç»™/errorè·¯å¾„ï¼ŒSpringBootåœ¨åº•å±‚å†™å¥½â¼€ä¸ª BasicErrorControllerçš„ç»„ä»¶ï¼Œä¸“â»” å¤„ç†è¿™ä¸ªè¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)</span> <span class="comment">//è¿”å›HTML</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">errorHtml</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">    <span class="type">HttpStatus</span> <span class="variable">status</span> <span class="operator">=</span> getStatus(request);</span><br><span class="line">	Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.TEXT_HTML)));</span><br><span class="line">	response.setStatus(status.value());</span><br><span class="line">	<span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> resolveErrorView(request, response, status, model);</span><br><span class="line">	<span class="keyword">return</span> (modelAndView != <span class="literal">null</span>) ? modelAndView : <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;error&quot;</span>, model);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RequestMapping</span>  <span class="comment">//è¿”å›ResponseEntity, JSON</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">error</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">	<span class="type">HttpStatus</span> <span class="variable">status</span> <span class="operator">=</span> getStatus(request);</span><br><span class="line">	<span class="keyword">if</span> (status == HttpStatus.NO_CONTENT) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(status);</span><br><span class="line">	&#125;</span><br><span class="line">	Map&lt;String, Object&gt; body = getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.ALL));</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ResponseEntity</span>&lt;&gt;(body, status);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚æœè¦å“åº”é¡µé¢ï¼Œé”™è¯¯é¡µé¢æ˜¯è¿™ä¹ˆè§£æåˆ°çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€è§£æé”™è¯¯çš„â¾ƒå®šä¹‰è§†å›¾åœ°å€</span></span><br><span class="line"><span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> resolveErrorView(request, response, status, model);</span><br><span class="line"><span class="comment">//2ã€å¦‚æœè§£æä¸åˆ°é”™è¯¯â»šâ¾¯çš„åœ°å€ï¼Œé»˜è®¤çš„é”™è¯¯â»šå°±æ˜¯error</span></span><br><span class="line"><span class="keyword">return</span> (modelAndView != <span class="literal">null</span>) ? modelAndView : <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;error&quot;</span>, model);</span><br></pre></td></tr></table></figure>
<p>å®¹å™¨ä¸­ä¸“é—¨æœ‰â¼€ä¸ªé”™è¯¯è§†å›¾è§£æå™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(DispatcherServlet.class)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(ErrorViewResolver.class)</span></span><br><span class="line">DefaultErrorViewResolver <span class="title function_">conventionErrorViewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DefaultErrorViewResolver</span>(<span class="built_in">this</span>.applicationContext, <span class="built_in">this</span>.resources);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>SpringBootè§£æé”™è¯¯é¡µçš„é»˜è®¤è§„åˆ™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">resolveErrorView</span><span class="params">(HttpServletRequest request, </span></span><br><span class="line"><span class="params">                                     HttpStatus status, </span></span><br><span class="line"><span class="params">                                     Map&lt;String, Object&gt; model)</span> &#123;</span><br><span class="line">    <span class="comment">// é¦–å…ˆå°è¯•é€šè¿‡çŠ¶æ€ç è§£æè§†å›¾</span></span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> resolve(String.valueOf(status.value()), model);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœæ‰¾ä¸åˆ°å…·ä½“çš„çŠ¶æ€ç è§†å›¾ï¼Œå°è¯•é€šè¿‡çŠ¶æ€ç³»åˆ—æŸ¥æ‰¾</span></span><br><span class="line">    <span class="keyword">if</span> (modelAndView == <span class="literal">null</span> &amp;&amp; SERIES_VIEWS.containsKey(status.series())) &#123;</span><br><span class="line">        modelAndView = resolve(SERIES_VIEWS.get(status.series()), model);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ModelAndView <span class="title function_">resolve</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> &#123;</span><br><span class="line">    <span class="comment">// æ„å»ºé”™è¯¯è§†å›¾åç§°ï¼šerror/ + çŠ¶æ€ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">errorViewName</span> <span class="operator">=</span> <span class="string">&quot;error/&quot;</span> + viewName;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ¨¡æ¿æ˜¯å¦å¯ç”¨</span></span><br><span class="line">    <span class="type">TemplateAvailabilityProvider</span> <span class="variable">provider</span> <span class="operator">=</span> <span class="built_in">this</span>.templateAvailabilityProviders</span><br><span class="line">            .getProvider(errorViewName, <span class="built_in">this</span>.applicationContext);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦‚æœæ¨¡æ¿å¯ç”¨ï¼Œè¿”å›ModelAndView</span></span><br><span class="line">    <span class="keyword">if</span> (provider != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(errorViewName, model);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// å¦åˆ™å°è¯•è§£æé™æ€èµ„æº</span></span><br><span class="line">    <span class="keyword">return</span> resolveResource(errorViewName, model);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ModelAndView <span class="title function_">resolveResource</span><span class="params">(String viewName, Map&lt;String, Object&gt; model)</span> &#123;</span><br><span class="line">    <span class="comment">// éå†æ‰€æœ‰é™æ€èµ„æºä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (String location : <span class="built_in">this</span>.resources.getStaticLocations()) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// è·å–èµ„æºå¹¶æ„å»ºç›¸å¯¹è·¯å¾„</span></span><br><span class="line">            <span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="built_in">this</span>.applicationContext.getResource(location);</span><br><span class="line">            resource = resource.createRelative(viewName + <span class="string">&quot;.html&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ£€æŸ¥èµ„æºæ˜¯å¦å­˜åœ¨</span></span><br><span class="line">            <span class="keyword">if</span> (resource.exists()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="keyword">new</span> <span class="title class_">HtmlResourceView</span>(resource), model);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            <span class="comment">// å¿½ç•¥èµ„æºè®¿é—®å¼‚å¸¸ï¼Œç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªä½ç½®</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰€æœ‰ä½ç½®éƒ½æ‰¾ä¸åˆ°èµ„æºï¼Œè¿”å›null</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®¹å™¨ä¸­æœ‰ä¸€ä¸ªé»˜è®¤çš„åä¸º error çš„ Viewï¼Œæä¾›äº†é»˜è®¤ç™½é¡µçš„åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean(name = &quot;error&quot;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = &quot;error&quot;)</span></span><br><span class="line"><span class="keyword">public</span> View <span class="title function_">defaultErrorView</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">this</span>.defaultErrorView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°è£…äº†JSONæ ¼å¼çš„é”™è¯¯ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(value = ErrorAttributes.class, search = SearchStrategy.CURRENT)</span></span><br><span class="line"><span class="keyword">public</span> DefaultErrorAttributes <span class="title function_">errorAttributes</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DefaultErrorAttributes</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è§„åˆ™ï¼š</p>
<p>1ã€è§£æä¸€ä¸ªé”™è¯¯é¡µ</p>
<p>â€‹    a. å¦‚æœå‘ç”Ÿäº† 500ã€404ã€503ã€403 è¿™äº›é”™è¯¯</p>
<p>â€‹        å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨ <code>classpath:/templates/error/ç²¾ç¡®ç .html</code> </p>
<p>â€‹        å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ <code>ç²¾ç¡®ç .html</code>  </p>
<p>â€‹    b.å¦‚æœåŒ¹é…ä¸åˆ° <code>ç²¾ç¡®ç .html</code> ï¼Œè¿™äº›ç²¾ç¡®çš„é”™è¯¯é¡µé¢ï¼Œå°±å»æ‰¾<code>5xx.html</code>ï¼Œ<code>4xx.html</code> <strong>æ¨¡ç³ŠåŒ¹é…</strong></p>
<p>â€‹        å¦‚æœæœ‰æ¨¡æ¿å¼•æ“ï¼Œé»˜è®¤åœ¨ <code>classpath:/templates/error/5xx.html</code> </p>
<p>â€‹        å¦‚æœæ²¡æœ‰æ¨¡æ¿å¼•æ“ï¼Œåœ¨é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾ <code>5xx.html</code></p>
<p>2ã€å¦‚æœæ¨¡æ¿å¼•æ“è·¯å¾„<code>templates</code>ä¸‹æœ‰<code>error.html</code>é¡µé¢ï¼Œå°±ç›´æ¥æ¸²æŸ“</p>
<h5 id="2ã€è‡ªå®šä¹‰é”™è¯¯å“åº”"><a href="#2ã€è‡ªå®šä¹‰é”™è¯¯å“åº”" class="headerlink" title="2ã€è‡ªå®šä¹‰é”™è¯¯å“åº”"></a>2ã€è‡ªå®šä¹‰é”™è¯¯å“åº”</h5><h6 id="1ã€è‡ªå®šä¹‰jsonå“åº”"><a href="#1ã€è‡ªå®šä¹‰jsonå“åº”" class="headerlink" title="1ã€è‡ªå®šä¹‰jsonå“åº”"></a>1ã€è‡ªå®šä¹‰jsonå“åº”</h6><blockquote>
<p>ä½¿ â½¤@ControllerAdvice + @ExceptionHandler è¿›â¾ç»Ÿâ¼€å¼‚å¸¸å¤„ç†</p>
</blockquote>
<h6 id="2ã€è‡ªå®šä¹‰é¡µé¢å“åº”"><a href="#2ã€è‡ªå®šä¹‰é¡µé¢å“åº”" class="headerlink" title="2ã€è‡ªå®šä¹‰é¡µé¢å“åº”"></a>2ã€è‡ªå®šä¹‰é¡µé¢å“åº”</h6><blockquote>
<p>æ ¹æ®bootçš„é”™è¯¯é¡µé¢è§„åˆ™ï¼Œè‡ªå®šä¹‰é¡µé¢æ¨¡æ¿</p>
</blockquote>
<h5 id="3ã€æœ€ä½³å®æˆ˜"><a href="#3ã€æœ€ä½³å®æˆ˜" class="headerlink" title="3ã€æœ€ä½³å®æˆ˜"></a>3ã€æœ€ä½³å®æˆ˜</h5><ul>
<li>å‰ååˆ†ç¦»<ul>
<li>åå°å‘ç”Ÿçš„æ‰€æœ‰é”™è¯¯ï¼Œä½¿ â½¤<code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> è¿›â¾ç»Ÿâ¼€å¼‚å¸¸å¤„ç†</li>
</ul>
</li>
<li><p>æœåŠ¡ç«¯é¡µé¢æ¸²æŸ“</p>
<ul>
<li><p>ä¸å¯é¢„çŸ¥çš„ä¸€äº›HTTPç é”™è¯¯ï¼ŒæœåŠ¡å™¨æˆ–è€…å®¢æˆ·ç«¯çš„é”™è¯¯</p>
<ul>
<li>ç»™ <code>classpath:templates/error/</code> ä¸‹é¢ï¼Œæ”¾ä¸€ä¸ªç²¾ç¡®çš„é”™è¯¯ç é¡µé¢ï¼Œ<code>500.html</code>,<code>404.html</code></li>
<li>ç»™ <code>classpath:templates/error/</code> ä¸‹é¢ï¼Œæ”¾å¸¸ç”¨æ¨¡ç³ŠåŒ¹é…çš„é”™è¯¯ç é¡µé¢</li>
</ul>
</li>
<li><p>å‘ç”Ÿä¸šåŠ¡é”™è¯¯</p>
<ul>
<li>æ ¸å¿ƒä¸šåŠ¡ï¼Œæ¯ä¸€ç§é”™è¯¯éƒ½åº”è¯¥ä»£ç æ§åˆ¶ï¼Œè·³è½¬åˆ°è‡ªå·±çš„é”™è¯¯é¡µã€‚</li>
<li>é€šç”¨ä¸šåŠ¡ï¼Œåˆ©ç”¨é€šç”¨é”™è¯¯é¡µé¢ï¼Œç›´æ¥è¿”å›é€šç”¨é”™è¯¯é¡µé¢</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>é¡µé¢ã€JSONï¼Œå¯ç”¨çš„Modelæ•°æ®å¦‚ä¸‹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251220220943114.png" alt="image-20251220220943114"></p>
<h4 id="8ã€åµŒå…¥å¼å®¹å™¨"><a href="#8ã€åµŒå…¥å¼å®¹å™¨" class="headerlink" title="8ã€åµŒå…¥å¼å®¹å™¨"></a>8ã€åµŒå…¥å¼å®¹å™¨</h4><blockquote>
<p>servletå®¹å™¨ï¼Œç®¡ç†ã€è¿è¡ŒServletç»„ä»¶ï¼ˆServletï¼ŒFilterï¼ŒListernerï¼‰çš„ç¯å¢ƒï¼Œä¸€èˆ¬æŒ‡æœåŠ¡å™¨</p>
</blockquote>
<h5 id="1ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#1ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="1ã€è‡ªåŠ¨é…ç½®åŸç†"></a>1ã€è‡ªåŠ¨é…ç½®åŸç†</h5><blockquote>
<ul>
<li>SpringBoot é»˜è®¤åµŒâ¼ŠTomcatä½œä¸ºServletå®¹å™¨ã€‚ </li>
<li>â¾ƒåŠ¨é…ç½®ç±»æ˜¯  ServletWebServerFactoryAutoConfiguration  ï¼Œ  EmbeddedWebServer FactoryCustomizerAutoConfiguration </li>
<li>â¾ƒåŠ¨é…ç½®ç±»å¼€å§‹åˆ†æåŠŸèƒ½ã€‚<code>xxxxAutoConfiguration</code></li>
</ul>
</blockquote>
<p>é¦–å…ˆåˆ†æ<code>ServletWebServerFactoryAutoConfiguration</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AutoConfiguration</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span>  <span class="comment">// æœ€é«˜ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(ServletRequest.class)</span>        <span class="comment">// ä¾èµ–Servletç±»</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span> <span class="comment">// Servletç±»å‹Webåº”ç”¨</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(ServerProperties.class)</span> <span class="comment">// ç»‘å®šæœåŠ¡å™¨é…ç½®</span></span><br><span class="line"><span class="meta">@Import(&#123;</span></span><br><span class="line"><span class="meta">    ServletWebServerFactoryAutoConfiguration.BeanPostProcessorsRegistrar.class,</span></span><br><span class="line"><span class="meta">    ServletWebServerFactoryConfiguration.EmbeddedTomcat.class,  // å¯¼å…¥Tomcat</span></span><br><span class="line"><span class="meta">    ServletWebServerFactoryConfiguration.EmbeddedJetty.class,   // å¯¼å…¥Jetty</span></span><br><span class="line"><span class="meta">    ServletWebServerFactoryConfiguration.EmbeddedUndertow.class // å¯¼å…¥Undertow</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletWebServerFactoryAutoConfiguration</span> &#123;</span><br><span class="line">    <span class="comment">// è‡ªåŠ¨é…ç½®äº†åµŒå…¥å¼å®¹å™¨åœºæ™¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1ã€<code>ServletWebServerFactoryAutoConfiguration</code>è‡ªåŠ¨é…ç½®äº†åµŒå…¥å¼å®¹å™¨åœºæ™¯</p>
<p>2ã€ç»‘å®šäº† <code>ServerProperties</code>é…ç½®ç±»ï¼Œæ‰€æœ‰å’ŒæœåŠ¡å™¨æœ‰å…³çš„é…ç½® <code>server</code>å¼€å¤´çš„é…ç½®é‡Œé¢ã€‚ï¼ˆserverå¼€å§‹çš„éƒ½æ˜¯åµŒå…¥å¼å®¹å™¨ æœåŠ¡å™¨çš„é…ç½®ï¼‰</p>
<p>3ã€<code>ServletWebServerFactoryAutoConfiguration</code>  å¯¼â¼Šäº† åµŒâ¼Šå¼çš„ä¸‰â¼¤æœåŠ¡å™¨ <code>tomcat</code>ã€<code>Jetty</code> ã€ <code>Undertow</code></p>
<p>â€‹    a.  å¯¼â¼Š  <code>Tomcat</code>  ã€ <code>Jetty</code>  ã€ <code>Undertow</code>  éƒ½æœ‰æ¡ä»¶æ³¨è§£ã€‚ç³»ç»Ÿä¸­æœ‰è¿™ä¸ªç±»æ‰â¾ï¼ˆä¹Ÿå°±æ˜¯å¯¼äº† åŒ…ï¼‰</p>
<p>â€‹    b.  é»˜è®¤   <code>Tomcat</code>  é…ç½®â½£æ•ˆã€‚ç»™å®¹å™¨ä¸­æ”¾ <code>TomcatServletWebServerFactory</code> </p>
<p>â€‹    c.  éƒ½ç»™å®¹å™¨ä¸­  <code>ServletWebServerFactory</code> æ”¾äº†â¼€ä¸ª webæœåŠ¡å™¨â¼¯â¼šï¼ˆé€ webæœåŠ¡å™¨çš„ï¼‰</p>
<p>â€‹    d.  webæœåŠ¡å™¨â¼¯â¼š éƒ½æœ‰â¼€ä¸ªåŠŸèƒ½ï¼Œ <code>getWebServer</code>  è·å–webæœåŠ¡å™¨ </p>
<p>â€‹    e.  <code>TomcatServletWebServerFactory</code> åˆ›å»ºäº† <code>tomcat</code>ã€‚</p>
<ol>
<li><code>ServletWebServerFactory</code>ä»€ä¹ˆæ—¶å€™ä¼šåˆ›å»º <code>webServer</code>å‡ºæ¥ã€‚</li>
<li><code>ServletWebServerApplicationContext</code>iocå®¹å™¨ï¼Œå¯åŠ¨çš„æ—¶å€™ä¼šè°ƒâ½¤åˆ›å»ºwebæœåŠ¡å™¨ </li>
<li>Springå®¹å™¨åˆ·æ–°ï¼ˆå¯åŠ¨ï¼‰çš„æ—¶å€™ï¼Œä¼šé¢„ç•™â¼€ä¸ªæ—¶æœºï¼Œåˆ·æ–°â¼¦å®¹å™¨ã€‚ </li>
<li><code>refresh()</code> å®¹å™¨åˆ·æ–° ï¼ˆå®¹å™¨å¯åŠ¨ï¼‰ä¼šé¢„ç•™ä¸€ä¸ªæ—¶æœºï¼Œå®¹å™¨åˆ·æ–°åäºŒæ­¥åˆ·æ–°â¼¦å®¹å™¨ä¼šè°ƒâ½¤  <code>onRefresh()</code>  </li>
</ol>
<p>æ€»ç»“ï¼šWebåœºæ™¯çš„Springå®¹å™¨å¯åŠ¨ï¼Œåœ¨onRefreshçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨åˆ›å»ºwebæœåŠ¡å™¨çš„æ–¹æ³•ã€‚</p>
<p>webæœåŠ¡å™¨çš„åˆ›å»ºæ˜¯é€šè¿‡webServerFactoryæå®šçš„ã€‚å®¹å™¨ä¸­ä¼šæ ¹æ®å¯¼äº†ä»€ä¹ˆåŒ…ï¼Œæ¡ä»¶æ³¨è§£ï¼Œå¯åŠ¨ç›¸å…³çš„æœåŠ¡å™¨é…ç½®ï¼Œæ¯”å¦‚é»˜è®¤åµŒå…¥å¼çš„tomcatå·¥å‚ï¼Œç„¶ååˆ›å»ºtomcatæœåŠ¡å™¨ã€‚</p>
<h5 id="2ã€è‡ªå®šä¹‰"><a href="#2ã€è‡ªå®šä¹‰" class="headerlink" title="2ã€è‡ªå®šä¹‰"></a>2ã€è‡ªå®šä¹‰</h5><p><strong>æ¡ˆä¾‹</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251221035229703.png" alt="image-20251221035229703"></p>
<blockquote>
<p>åˆ‡ æ¢æœåŠ¡å™¨</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-api.version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">servlet-api.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    	<span class="comment">&lt;!-- Exclude the Tomcat dependency --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Use Jetty instead --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3ã€æœ€ä½³å®è·µ"><a href="#3ã€æœ€ä½³å®è·µ" class="headerlink" title="3ã€æœ€ä½³å®è·µ"></a>3ã€æœ€ä½³å®è·µ</h5><p>ç”¨æ³•ï¼š</p>
<ul>
<li>ä¿®æ”¹<code>server</code>ç›¸å…³é…ç½®å°±å¯ä»¥ä¿®æ”¹æœåŠ¡å™¨çš„å‚æ•°</li>
<li>é€šè¿‡ç»™å®¹å™¨ä¸­æ”¾ä¸€ä¸ª<code>ServletWebServerFactory</code>ï¼Œæ¥ç¦ç”¨æ‰SpringBooté»˜è®¤æ”¾çš„æœåŠ¡å™¨å·¥å‚ï¼Œå®ç°è‡ªå®šä¹‰åµŒå…¥ä»»æ„æœåŠ¡å™¨ã€‚</li>
</ul>
<h4 id="9ã€å…¨é¢æ¥ç®¡SpringMVC"><a href="#9ã€å…¨é¢æ¥ç®¡SpringMVC" class="headerlink" title="9ã€å…¨é¢æ¥ç®¡SpringMVC"></a>9ã€å…¨é¢æ¥ç®¡SpringMVC</h4><blockquote>
<p>SpringBoot é»˜è®¤é…ç½®å¥½äº† SpringMVC çš„æ‰€æœ‰å¸¸â½¤ç‰¹æ€§ã€‚ </p>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦å…¨â¾¯æ¥ç®¡SpringMVCçš„æ‰€æœ‰é…ç½®å¹¶ç¦â½¤é»˜è®¤é…ç½®ï¼Œä»…éœ€è¦ç¼–å†™â¼€ä¸ª  WebMvcConfigurer  é…ç½®ç±»ï¼Œå¹¶æ ‡æ³¨  @EnableWebMvc å³å¯ </p>
<p> å…¨â¼¿åŠ¨æ¨¡å¼ </p>
<ul>
<li><p>@EnableWebMvc : ç¦â½¤é»˜è®¤é…ç½® </p>
</li>
<li><p><strong>WebMvcConfigurer</strong>  ç»„ä»¶ï¼šå®šä¹‰MVCçš„åº•å±‚â¾ä¸º</p>
</li>
</ul>
</blockquote>
<h5 id="1ã€WebMvcAutoConfiguration-åˆ°åº•â¾ƒåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™"><a href="#1ã€WebMvcAutoConfiguration-åˆ°åº•â¾ƒåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™" class="headerlink" title="1ã€WebMvcAutoConfiguration åˆ°åº•â¾ƒåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™"></a>1ã€WebMvcAutoConfiguration åˆ°åº•â¾ƒåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™</h5><blockquote>
<p>SpringMVC â¾ƒåŠ¨é…ç½®åœºæ™¯ç»™æˆ‘ä»¬é…ç½®äº†å¦‚ä¸‹æ‰€æœ‰é»˜è®¤â¾ä¸º</p>
</blockquote>
<p>1ã€WebMvcAutoConfiguration  webåœºæ™¯çš„â¾ƒåŠ¨é…ç½®ç±» </p>
<p>â€‹    1.1.  â½€æŒRESTfulçš„filterï¼šHiddenHttpMethodFilter </p>
<p>â€‹    1.2.  â½€æŒâ¾®POSTè¯·æ±‚ï¼Œè¯·æ±‚ä½“æºå¸¦æ•°æ®ï¼šFormContentFilter </p>
<p>â€‹    1.3.  å¯¼â¼Š EnableWebMvcConfiguration  ï¼š </p>
<p>â€‹        1.3.1. RequestMappingHandlerAdapter  </p>
<p>â€‹        1.3.2. WelcomePageHandlerMapping  ï¼šæ¬¢è¿â»šåŠŸèƒ½â½€æŒï¼ˆæ¨¡æ¿å¼•æ“â½¬å½•ã€é™æ€èµ„æºâ½¬å½• æ”¾index.htmlï¼‰ï¼Œé¡¹â½¬è®¿é—®/ å°±é»˜è®¤å±•ç¤ºè¿™ä¸ªâ»šâ¾¯. </p>
<p>â€‹        1.3.3. RequestMappingHandlerMapping  ï¼šæ‰¾æ¯ä¸ªè¯·æ±‚ç”±è°å¤„ç†çš„æ˜ å°„å…³ç³» </p>
<p>â€‹        1.3.4. ExceptionHandlerExceptionResolver  ï¼šé»˜è®¤çš„å¼‚å¸¸è§£æå™¨  </p>
<p>â€‹        1.3.5. LocaleResolver  ï¼šå›½é™…åŒ–è§£æå™¨ </p>
<p>â€‹        1.3.6. ThemeResolver  ï¼šä¸»é¢˜è§£æå™¨ </p>
<p>â€‹        1.3.7. FlashMapManager  ï¼šä¸´æ—¶æ•°æ®å…±äº« </p>
<p>â€‹        1.3.8. FormattingConversionService  ï¼š æ•°æ®æ ¼å¼åŒ– ã€ç±»å‹è½¬åŒ– </p>
<p>â€‹        1.3.9. Validator  ï¼š æ•°æ®æ ¡éªŒ JSR303  æä¾›çš„æ•°æ®æ ¡éªŒåŠŸèƒ½ </p>
<p>â€‹        1.3.10. WebBindingInitializer  ï¼šè¯·æ±‚å‚æ•°çš„å°è£…ä¸ç»‘å®š </p>
<p>â€‹        1.3.11. ContentNegotiationManager  ï¼šå†…å®¹åå•†ç®¡ç†å™¨ </p>
<p>â€‹    1.4. WebMvcAutoConfigurationAdapter  é…ç½®â½£æ•ˆï¼Œå®ƒæ˜¯â¼€ä¸ª ä¹‰mvcåº•å±‚ç»„ä»¶ </p>
<p>â€‹        1.4.1.  å®šä¹‰å¥½  WebMvcConfigurer  ï¼Œå®š WebMvcConfigurer  åº•å±‚ç»„ä»¶é»˜è®¤åŠŸèƒ½ï¼›æ‰€æœ‰åŠŸèƒ½è¯¦â»…åˆ—è¡¨ </p>
<p>â€‹        1.4.2.  è§†å›¾è§£æå™¨ï¼š InternalResourceViewResolver  </p>
<p>â€‹        1.4.3.  è§†å›¾è§£æå™¨ï¼š BeanNameViewResolver  ,è§†å›¾åï¼ˆcontrollerâ½…æ³•çš„è¿”å›å€¼å­—ç¬¦ä¸²ï¼‰å°± æ˜¯ç»„ä»¶å </p>
<p>â€‹        1.4.4.  å†…å®¹åå•†è§£æå™¨ï¼š ContentNegotiatingViewResolver  </p>
<p>â€‹        1.4.5.  è¯·æ±‚ä¸Šä¸‹â½‚è¿‡æ»¤å™¨ï¼š RequestContextFilter  : ä»»æ„ä½ç½®ç›´æ¥è·å–å½“å‰è¯·æ±‚ </p>
<p>â€‹        1.4.6.  é™æ€èµ„æºé“¾è§„åˆ™ </p>
<p>â€‹        1.4.7. ProblemDetailsExceptionHandler  ï¼šé”™è¯¯è¯¦æƒ… </p>
<p>â€‹            1.4.7.1.  SpringMVCå†…éƒ¨åœºæ™¯å¼‚å¸¸è¢«å®ƒæ•è·ï¼š </p>
<p>â€‹     1.5. å®šä¹‰äº†MVCé»˜è®¤çš„åº•å±‚â¾ä¸º:  WebMvcConfigurer </p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">é…ç½®æ–¹æ³•</th>
<th style="text-align:left">æ ¸å¿ƒå‚æ•°</th>
<th style="text-align:left">åŠŸèƒ½æè¿°</th>
<th style="text-align:left">Spring Boot é»˜è®¤æä¾›</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>addFormatters</strong></td>
<td style="text-align:left"><code>FormatterRegistry</code></td>
<td style="text-align:left"><strong>æ ¼å¼åŒ–å™¨</strong>ï¼šæ”¯æŒå±æ€§ä¸Š <code>@NumberFormat</code> å’Œ <code>@DateTimeFormat</code> çš„æ•°æ®ç±»å‹è½¬æ¢</td>
<td style="text-align:left"><code>GenericConversionService</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>getValidator</strong></td>
<td style="text-align:left">æ— </td>
<td style="text-align:left"><strong>æ•°æ®æ ¡éªŒ</strong>ï¼šæ ¡éªŒ <code>@Controller</code> ä¸Šä½¿ç”¨ <code>@Valid</code> æ ‡æ³¨çš„å‚æ•°åˆæ³•æ€§</td>
<td style="text-align:left">éœ€è¦å¯¼å…¥ <code>starter-validation</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>addInterceptors</strong></td>
<td style="text-align:left"><code>InterceptorRegistry</code></td>
<td style="text-align:left"><strong>æ‹¦æˆªå™¨</strong>ï¼šæ‹¦æˆªæ”¶åˆ°çš„æ‰€æœ‰è¯·æ±‚</td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>configureContentNegotiation</strong></td>
<td style="text-align:left"><code>ContentNegotiationConfigurer</code></td>
<td style="text-align:left"><strong>å†…å®¹åå•†</strong>ï¼šæ”¯æŒå¤šç§æ•°æ®æ ¼å¼è¿”å›ï¼Œéœ€è¦é…åˆæ”¯æŒè¿™ç§ç±»å‹çš„ <code>HttpMessageConverter</code></td>
<td style="text-align:left">æ”¯æŒ JSON</td>
</tr>
<tr>
<td style="text-align:left"><strong>configureMessageConverters</strong></td>
<td style="text-align:left"><code>List&lt;HttpMessageConverter&lt;?&gt;&gt;</code></td>
<td style="text-align:left"><strong>æ¶ˆæ¯è½¬æ¢å™¨</strong>ï¼šæ ‡æ³¨ <code>@ResponseBody</code> çš„è¿”å›å€¼ä¼šåˆ©ç”¨ <code>MessageConverter</code> ç›´æ¥å†™å‡ºå»</td>
<td style="text-align:left">8 ä¸ªï¼Œæ”¯æŒ byteã€stringã€multipartã€resourceã€json</td>
</tr>
<tr>
<td style="text-align:left"><strong>addViewControllers</strong></td>
<td style="text-align:left"><code>ViewControllerRegistry</code></td>
<td style="text-align:left"><strong>è§†å›¾æ˜ å°„</strong>ï¼šç›´æ¥å°†è¯·æ±‚è·¯å¾„ä¸ç‰©ç†è§†å›¾æ˜ å°„ï¼Œç”¨äºæ—  Java ä¸šåŠ¡é€»è¾‘çš„ç›´æ¥è§†å›¾é¡µæ¸²æŸ“</td>
<td style="text-align:left">æ—  <code>&lt;mvc:view-controller&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>configureViewResolvers</strong></td>
<td style="text-align:left"><code>ViewResolverRegistry</code></td>
<td style="text-align:left"><strong>è§†å›¾è§£æå™¨</strong>ï¼šé€»è¾‘è§†å›¾è½¬ä¸ºç‰©ç†è§†å›¾</td>
<td style="text-align:left"><code>ViewResolverComposite</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>addResourceHandlers</strong></td>
<td style="text-align:left"><code>ResourceHandlerRegistry</code></td>
<td style="text-align:left"><strong>é™æ€èµ„æºå¤„ç†</strong>ï¼šé™æ€èµ„æºè·¯å¾„æ˜ å°„ã€ç¼“å­˜æ§åˆ¶</td>
<td style="text-align:left"><code>ResourceHandlerRegistry</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>configureDefaultServletHandling</strong></td>
<td style="text-align:left"><code>DefaultServletHandlerConfigurer</code></td>
<td style="text-align:left"><strong>é»˜è®¤ Servlet</strong>ï¼šå¯ä»¥è¦†ç›– Tomcat çš„ DefaultServletï¼Œè®© <code>DispatcherServlet</code> æ‹¦æˆª <code>/</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>configurePathMatch</strong></td>
<td style="text-align:left"><code>PathMatchConfigurer</code></td>
<td style="text-align:left"><strong>è·¯å¾„åŒ¹é…</strong>ï¼šè‡ªå®šä¹‰ URL è·¯å¾„åŒ¹é…ï¼Œå¯ä»¥è‡ªåŠ¨ä¸ºæ‰€æœ‰è·¯å¾„åŠ ä¸ŠæŒ‡å®šå‰ç¼€ï¼Œæ¯”å¦‚ <code>/api</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>configureAsyncSupport</strong></td>
<td style="text-align:left"><code>AsyncSupportConfigurer</code></td>
<td style="text-align:left"><strong>å¼‚æ­¥æ”¯æŒ</strong>ï¼š</td>
<td style="text-align:left"><code>TaskExecutionAutoConfiguration</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>addCorsMappings</strong></td>
<td style="text-align:left"><code>CorsRegistry</code></td>
<td style="text-align:left"><strong>è·¨åŸŸ</strong>ï¼š</td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>addArgumentResolvers</strong></td>
<td style="text-align:left"><code>List&lt;HandlerMethodArgumentResolver&gt;</code></td>
<td style="text-align:left"><strong>å‚æ•°è§£æå™¨</strong>ï¼š</td>
<td style="text-align:left">MVC é»˜è®¤æä¾›</td>
</tr>
<tr>
<td style="text-align:left"><strong>addReturnValueHandlers</strong></td>
<td style="text-align:left"><code>List&lt;HandlerMethodReturnValueHandler&gt;</code></td>
<td style="text-align:left"><strong>è¿”å›å€¼è§£æå™¨</strong>ï¼š</td>
<td style="text-align:left">MVC é»˜è®¤æä¾›</td>
</tr>
<tr>
<td style="text-align:left"><strong>configureHandlerExceptionResolvers</strong></td>
<td style="text-align:left"><code>List&lt;HandlerExceptionResolver&gt;</code></td>
<td style="text-align:left"><strong>å¼‚å¸¸å¤„ç†å™¨</strong>ï¼š</td>
<td style="text-align:left">é»˜è®¤ 3 ä¸ªï¼š 1. <code>ExceptionHandlerExceptionResolver</code> 2. <code>ResponseStatusExceptionResolver</code> 3. <code>DefaultHandlerExceptionResolver</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>getMessageCodesResolver</strong></td>
<td style="text-align:left">æ— </td>
<td style="text-align:left"><strong>æ¶ˆæ¯ç è§£æå™¨</strong>ï¼šå›½é™…åŒ–ä½¿ç”¨</td>
<td style="text-align:left">æ— </td>
</tr>
</tbody>
</table>
</div>
<p><strong>æ•°æ®å¤„ç†ç±»</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">é…ç½®æ–¹æ³•</th>
<th style="text-align:left">é»˜è®¤å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>æ•°æ®æ ¼å¼åŒ–</strong></td>
<td style="text-align:left"><code>addFormatters()</code></td>
<td style="text-align:left"><code>GenericConversionService</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>æ•°æ®æ ¡éªŒ</strong></td>
<td style="text-align:left"><code>getValidator()</code></td>
<td style="text-align:left">éœ€æ‰‹åŠ¨é…ç½®</td>
</tr>
<tr>
<td style="text-align:left"><strong>æ¶ˆæ¯è½¬æ¢</strong></td>
<td style="text-align:left"><code>configureMessageConverters()</code></td>
<td style="text-align:left">8 ç§è½¬æ¢å™¨</td>
</tr>
<tr>
<td style="text-align:left"><strong>å†…å®¹åå•†</strong></td>
<td style="text-align:left"><code>configureContentNegotiation()</code></td>
<td style="text-align:left">JSON æ”¯æŒ</td>
</tr>
</tbody>
</table>
</div>
<p><strong>è§†å›¾å¤„ç†ç±»</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">é…ç½®æ–¹æ³•</th>
<th style="text-align:left">é»˜è®¤å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>è§†å›¾æ˜ å°„</strong></td>
<td style="text-align:left"><code>addViewControllers()</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>è§†å›¾è§£æ</strong></td>
<td style="text-align:left"><code>configureViewResolvers()</code></td>
<td style="text-align:left"><code>ViewResolverComposite</code></td>
</tr>
<tr>
<td style="text-align:left"><strong>é™æ€èµ„æº</strong></td>
<td style="text-align:left"><code>addResourceHandlers()</code></td>
<td style="text-align:left"><code>ResourceHandlerRegistry</code></td>
</tr>
</tbody>
</table>
</div>
<p><strong>è¯·æ±‚å¤„ç†ç±»</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">é…ç½®æ–¹æ³•</th>
<th style="text-align:left">é»˜è®¤å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>æ‹¦æˆªå™¨</strong></td>
<td style="text-align:left"><code>addInterceptors()</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>å‚æ•°è§£æ</strong></td>
<td style="text-align:left"><code>addArgumentResolvers()</code></td>
<td style="text-align:left">MVC é»˜è®¤</td>
</tr>
<tr>
<td style="text-align:left"><strong>è·¯å¾„åŒ¹é…</strong></td>
<td style="text-align:left"><code>configurePathMatch()</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>è·¨åŸŸæ”¯æŒ</strong></td>
<td style="text-align:left"><code>addCorsMappings()</code></td>
<td style="text-align:left">æ— </td>
</tr>
</tbody>
</table>
</div>
<p><strong>å¼‚å¸¸ä¸å›½é™…åŒ–</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">é…ç½®æ–¹æ³•</th>
<th style="text-align:left">é»˜è®¤å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>å¼‚å¸¸å¤„ç†</strong></td>
<td style="text-align:left"><code>configureHandlerExceptionResolvers()</code></td>
<td style="text-align:left">3 ä¸ªè§£æå™¨</td>
</tr>
<tr>
<td style="text-align:left"><strong>å›½é™…åŒ–</strong></td>
<td style="text-align:left"><code>getMessageCodesResolver()</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>å¼‚æ­¥æ”¯æŒ</strong></td>
<td style="text-align:left"><code>configureAsyncSupport()</code></td>
<td style="text-align:left"><code>TaskExecutionAutoConfiguration</code><em>**</em></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Servlet å¤„ç†</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">åŠŸèƒ½</th>
<th style="text-align:left">é…ç½®æ–¹æ³•</th>
<th style="text-align:left">é»˜è®¤å®ç°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>é»˜è®¤ Servlet</strong></td>
<td style="text-align:left"><code>configureDefaultServletHandling()</code></td>
<td style="text-align:left">æ— </td>
</tr>
<tr>
<td style="text-align:left"><strong>è¿”å›å€¼å¤„ç†</strong></td>
<td style="text-align:left"><code>addReturnValueHandlers()</code></td>
<td style="text-align:left">MVC é»˜è®¤</td>
</tr>
</tbody>
</table>
</div>
<h5 id="2ã€-EnableWebMvc-ç¦â½¤é»˜è®¤â¾ä¸º"><a href="#2ã€-EnableWebMvc-ç¦â½¤é»˜è®¤â¾ä¸º" class="headerlink" title="2ã€@EnableWebMvc ç¦â½¤é»˜è®¤â¾ä¸º"></a>2ã€@EnableWebMvc ç¦â½¤é»˜è®¤â¾ä¸º</h5><ol>
<li>@EnableWebMvc  ç»™å®¹å™¨ä¸­å¯¼â¼Š  DelegatingWebMvcConfiguration  ç»„ä»¶ï¼Œä»–æ˜¯  WebMvcConfigurationSupport  </li>
<li>WebMvcAutoConfiguration  æœ‰â¼€ä¸ªæ ¸â¼¼çš„æ¡ä»¶æ³¨è§£,  @ConditionalOnMissingBean(Web MvcConfigurationSupport.class)  ï¼Œå®¹å™¨ä¸­æ²¡æœ‰ WebMvcConfigurationSupport  ï¼Œ WebMvcAutoConfiguration  æ‰â½£æ•ˆ.</li>
<li>@EnableWebMvc å¯¼â¼Š  WebMvcConfigurationSupport  å¯¼è‡´  WebMvcAutoConfiguration  å¤±æ•ˆã€‚å¯¼è‡´ç¦â½¤äº†é»˜è®¤â¾ä¸º</li>
</ol>
<blockquote>
<p>@EnableWebMVC ç¦â½¤äº† Mvcçš„â¾ƒåŠ¨é…ç½® </p>
<p>WebMvcConfigurer å®šä¹‰SpringMVCåº•å±‚ç»„ä»¶çš„åŠŸèƒ½ç±»</p>
</blockquote>
<h4 id="10ã€æœ€ä½³å®æˆ˜"><a href="#10ã€æœ€ä½³å®æˆ˜" class="headerlink" title="10ã€æœ€ä½³å®æˆ˜"></a>10ã€æœ€ä½³å®æˆ˜</h4><p>æ‰€ä»¥ç”¨springbootè¿›è¡Œwebå¼€å‘æœ‰</p>
<h5 id="ä¸‰ç§æ–¹å¼"><a href="#ä¸‰ç§æ–¹å¼" class="headerlink" title="ä¸‰ç§æ–¹å¼"></a>ä¸‰ç§æ–¹å¼</h5><div class="table-container">
<table>
<thead>
<tr>
<th>å…¨è‡ªåŠ¨</th>
<th>ç›´æ¥ç¼–å†™æ§åˆ¶å™¨é€»è¾‘</th>
<th></th>
<th>å…¨éƒ¨ä½¿ç”¨è‡ªåŠ¨é…ç½®é»˜è®¤æ•ˆæœ</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‰‹è‡ªä¸€ä½“</td>
<td>@Configuration + é…ç½® WebMvcConfigurer + é…ç½®WebMvcRegistrations</td>
<td>ä¸è¦æ ‡æ³¨@EnableWebMvc</td>
<td>è‡ªåŠ¨é…ç½®æ•ˆæœï¼Œæ‰‹åŠ¨è®¾ç½®éƒ¨åˆ†åŠŸèƒ½ï¼Œå®šä¹‰MVCåº•å±‚ç»„ä»¶</td>
</tr>
<tr>
<td>å…¨æ‰‹åŠ¨</td>
<td>@Configuration + é…ç½® WebMvcConfigurer</td>
<td>æ ‡æ³¨@EnableWebMvc</td>
<td>ç¦ç”¨è‡ªåŠ¨é…ç½®æ•ˆæœï¼Œå…¨æ‰‹åŠ¨è®¾ç½®</td>
</tr>
</tbody>
</table>
</div>
<p>æ€»ç»“ï¼š<strong>ç»™å®¹å™¨ä¸­å†™ä¸€ä¸ªé…ç½®ç±» <code>@Configuration</code> ç»§æ‰¿ <code>WebMvcConfigurer</code> ä½†æ˜¯ä¸è¦æ ‡æ³¨ <code>@EnableWebMvc</code>ï¼Œå®ç°æ‰‹è‡ªä¸€ä½“çš„æ•ˆæœ</strong></p>
<h5 id="ä¸¤ç§æ¨¡å¼"><a href="#ä¸¤ç§æ¨¡å¼" class="headerlink" title="ä¸¤ç§æ¨¡å¼"></a>ä¸¤ç§æ¨¡å¼</h5><p>1ã€ å‰ååˆ†ç¦»æ¨¡å¼  ï¼š   @RestController   å“åº”JSONæ•°æ® </p>
<p>2ã€å‰åä¸åˆ†ç¦»æ¨¡å¼  ï¼š@Controller + Thymeleafæ¨¡æ¿å¼•æ“</p>
<h4 id="11ã€Webæ–°ç‰¹æ€§"><a href="#11ã€Webæ–°ç‰¹æ€§" class="headerlink" title="11ã€Webæ–°ç‰¹æ€§"></a>11ã€Webæ–°ç‰¹æ€§</h4><h5 id="1ã€Problemdetails"><a href="#1ã€Problemdetails" class="headerlink" title="1ã€Problemdetails"></a>1ã€Problemdetails</h5><blockquote>
<p>é”™è¯¯ä¿¡æ¯è¿”å›æ–°æ ¼å¼</p>
</blockquote>
<p>åŸç†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="comment">//é…ç½®è¿‡â¼€ä¸ªå±æ€§spring.mvc.problemdetails.enabled=true</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.problemdetails&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;)</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">ProblemDetailsErrorHandlingConfiguration</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(ResponseEntityExceptionHandler.class)</span></span><br><span class="line">    ProblemDetailsExceptionHandler <span class="title function_">problemDetailsExceptionHandler</span><span class="params">()</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ProblemDetailsExceptionHandler</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>ProblemDetailsExceptionHandler   æ˜¯â¼€ä¸ª  @ControllerAdvice  é›†ä¸­å¤„ç†ç³»ç»Ÿå¼‚å¸¸</li>
<li>å¤„ç†ä»¥ä¸‹å¼‚å¸¸ã€‚å¦‚æœç³»ç»Ÿå‡ºç°ä»¥ä¸‹å¼‚å¸¸ï¼Œä¼šè¢«SpringBootâ½€æŒä»¥  RFC 7807  è§„èŒƒâ½…å¼è¿”å›é”™è¯¯ æ•°æ®</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(&#123;</span></span><br><span class="line"><span class="meta">    HttpRequestMethodNotSupportedException.class, //è¯·æ±‚â½…å¼ä¸â½€æŒ</span></span><br><span class="line"><span class="meta">    HttpMediaTypeNotSupportedException.class,</span></span><br><span class="line"><span class="meta">    HttpMediaTypeNotAcceptableException.class,</span></span><br><span class="line"><span class="meta">    MissingPathVariableException.class,</span></span><br><span class="line"><span class="meta">    MissingServletRequestParameterException.class,</span></span><br><span class="line"><span class="meta">    MissingServletRequestPartException.class,</span></span><br><span class="line"><span class="meta">    ServletRequestBindingException.class,</span></span><br><span class="line"><span class="meta">    MethodArgumentNotValidException.class,</span></span><br><span class="line"><span class="meta">    NoHandlerFoundException.class,</span></span><br><span class="line"><span class="meta">    AsyncRequestTimeoutException.class,</span></span><br><span class="line"><span class="meta">    ErrorResponseException.class,</span></span><br><span class="line"><span class="meta">    ConversionNotSupportedException.class,</span></span><br><span class="line"><span class="meta">    TypeMismatchException.class,</span></span><br><span class="line"><span class="meta">    HttpMessageNotReadableException.class,</span></span><br><span class="line"><span class="meta">    HttpMessageNotWritableException.class,</span></span><br><span class="line"><span class="meta">    BindException.class</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ²¡å¼€å¯çš„æ•ˆæœï¼šé»˜è®¤å“åº”é”™è¯¯çš„jsonã€‚çŠ¶æ€ç 405.</p>
</blockquote>
<p>å¼€å¯ProblemDetailsè¿”å›, ä½¿â½¤æ–°çš„MediaType Content-Type: application/problem+json  + é¢å¤–æ‰©å±•è¿”å›</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251221142115532.png" alt="image-20251221142115532"></p>
<h5 id="2ã€å‡½æ•°å¼Web"><a href="#2ã€å‡½æ•°å¼Web" class="headerlink" title="2ã€å‡½æ•°å¼Web"></a>2ã€å‡½æ•°å¼Web</h5><p>ç”¨çš„ä¸å¤šï¼Œä»…åšäº†è§£ã€‚</p>
<blockquote>
<p>SpringMVC 5.2 ä»¥å å…è®¸æˆ‘ä»¬ä½¿â½¤å‡½æ•°å¼çš„â½…å¼ï¼Œå®šä¹‰Webçš„è¯·æ±‚å¤„ç†æµç¨‹ã€‚ </p>
<p>å‡½æ•°å¼æ¥â¼</p>
<p>Webè¯·æ±‚å¤„ç†çš„â½…å¼ï¼š </p>
<ol>
<li>@Controller + @RequestMapping  ï¼šè€¦åˆå¼ ï¼ˆè·¯ç”±ã€ä¸šåŠ¡è€¦åˆï¼‰ </li>
<li>å‡½æ•°å¼Webï¼šåˆ†ç¦»å¼ï¼ˆè·¯ç”±é›†ä¸­ç®¡ç†èµ·æ¥ã€å’Œä¸šåŠ¡åˆ†ç¦»ï¼‰</li>
</ol>
</blockquote>
<h6 id="1ã€åœºæ™¯"><a href="#1ã€åœºæ™¯" class="headerlink" title="1ã€åœºæ™¯"></a>1ã€åœºæ™¯</h6><blockquote>
<p>åœºæ™¯ï¼šUser RESTful - CRUD</p>
</blockquote>
<p>GET /user/1  è·å–1å·â½¤æˆ· </p>
<p>GET /users   è·å–æ‰€æœ‰â½¤æˆ· </p>
<p>POST /user  è¯·æ±‚ä½“æºå¸¦JSONï¼Œæ–°å¢â¼€ä¸ªâ½¤æˆ· </p>
<p>PUT /user/1 è¯·æ±‚ä½“æºå¸¦JSONï¼Œä¿®æ”¹1å·â½¤æˆ· </p>
<p>DELETE /user/1 åˆ é™¤1å·â½¤æˆ· </p>
<h6 id="2ã€æ ¸å¿ƒç±»"><a href="#2ã€æ ¸å¿ƒç±»" class="headerlink" title="2ã€æ ¸å¿ƒç±»"></a>2ã€æ ¸å¿ƒç±»</h6><ul>
<li>RouterFunction </li>
<li>RequestPredicate</li>
<li>ServerRequest</li>
<li>ServerResponse</li>
</ul>
<h6 id="3ã€ç¤ºä¾‹"><a href="#3ã€ç¤ºä¾‹" class="headerlink" title="3ã€ç¤ºä¾‹"></a>3ã€ç¤ºä¾‹</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.MediaType;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.RequestPredicate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.RouterFunction;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.ServerResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.web.servlet.function.RequestPredicates.accept;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.springframework.web.servlet.function.RouterFunctions.route;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‡½æ•°å¼Webè·¯ç”±é…ç½®ç±»</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨ Spring 5.2+ å¼•å…¥çš„å‡½æ•°å¼Webæ¡†æ¶ï¼ˆSpring WebFluxé£æ ¼ï¼‰</span></span><br><span class="line"><span class="comment"> * æ›¿ä»£ä¼ ç»Ÿçš„ <span class="doctag">@Controller</span> + <span class="doctag">@RequestMapping</span> æ³¨è§£æ–¹å¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Configuration</span>(proxyBeanMethods = false) ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…ä¸å¿…è¦çš„ä»£ç†åˆ›å»º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRoutingConfiguration</span> &#123;  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯·æ±‚è°“è¯ï¼šå®šä¹‰åªæ¥å—JSONæ ¼å¼çš„è¯·æ±‚</span></span><br><span class="line"><span class="comment">     * é™æ€å¸¸é‡ï¼Œå¯ä»¥åœ¨å¤šä¸ªè·¯ç”±ä¸­å¤ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">RequestPredicate</span> <span class="variable">ACCEPT_JSON</span> <span class="operator">=</span> accept(MediaType.APPLICATION_JSON);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å®šä¹‰è·¯ç”±å‡½æ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userHandler ç”¨æˆ·è¯·æ±‚å¤„ç†å™¨ï¼ˆSpringä¼šè‡ªåŠ¨æ³¨å…¥ï¼‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é…ç½®å¥½çš„è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RouterFunction&lt;ServerResponse&gt; <span class="title function_">routerFunction</span><span class="params">(MyUserHandler userHandler)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> route()</span><br><span class="line">                <span class="comment">// è·¯ç”±è§„åˆ™1: GET /&#123;user&#125; -&gt; è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">                .GET(<span class="string">&quot;/&#123;user&#125;&quot;</span>, ACCEPT_JSON, userHandler::getUser)</span><br><span class="line">                <span class="comment">// è·¯ç”±è§„åˆ™2: GET /&#123;user&#125;/customers -&gt; è·å–ç”¨æˆ·çš„å®¢æˆ·åˆ—è¡¨</span></span><br><span class="line">                .GET(<span class="string">&quot;/&#123;user&#125;/customers&quot;</span>, ACCEPT_JSON, userHandler::getUserCustomers)</span><br><span class="line">                <span class="comment">// è·¯ç”±è§„åˆ™3: DELETE /&#123;user&#125; -&gt; åˆ é™¤æŒ‡å®šç”¨æˆ·</span></span><br><span class="line">                .DELETE(<span class="string">&quot;/&#123;user&#125;&quot;</span>, ACCEPT_JSON, userHandler::deleteUser)</span><br><span class="line">                .build(); <span class="comment">// æ„å»ºè·¯ç”±å‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¯·æ±‚å¤„ç†å™¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.ServerRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.function.ServerResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·è¯·æ±‚å¤„ç†å™¨</span></span><br><span class="line"><span class="comment"> * å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œç±»ä¼¼äºä¼ ç»ŸControllerä¸­çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * ä½†ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼ï¼Œæ›´åŠ æ¸…æ™°å’Œç±»å‹å®‰å…¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyUserHandler</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†è·å–ç”¨æˆ·è¯·æ±‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request æœåŠ¡å™¨è¯·æ±‚å¯¹è±¡ï¼ŒåŒ…å«è¯·æ±‚å‚æ•°ã€è·¯å¾„å˜é‡ç­‰</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœåŠ¡å™¨å“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ServerResponse <span class="title function_">getUser</span><span class="params">(ServerRequest request)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. ä»è¯·æ±‚ä¸­è·å–è·¯å¾„å˜é‡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> request.pathVariable(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="comment">// 2. æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼ˆæŸ¥è¯¢æ•°æ®åº“ç­‰ï¼‰</span></span><br><span class="line">        <span class="comment">// User user = userService.findById(userId);</span></span><br><span class="line">        <span class="comment">// 3. æ„å»ºå“åº”</span></span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok()</span><br><span class="line">                .contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">                <span class="comment">// .body(user); // å®é™…åº”è¿”å›ç”¨æˆ·æ•°æ®</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†è·å–ç”¨æˆ·å®¢æˆ·åˆ—è¡¨è¯·æ±‚</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request æœåŠ¡å™¨è¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœåŠ¡å™¨å“åº”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ServerResponse <span class="title function_">getUserCustomers</span><span class="params">(ServerRequest request)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–è·¯å¾„å˜é‡</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> request.pathVariable(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å¯é€‰ï¼šè·å–æŸ¥è¯¢å‚æ•°</span></span><br><span class="line">        <span class="comment">// String page = request.param(&quot;page&quot;).orElse(&quot;1&quot;);</span></span><br><span class="line">        <span class="comment">// String size = request.param(&quot;size&quot;).orElse(&quot;20&quot;);</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        <span class="comment">// List&lt;Customer&gt; customers = customerService.findByUserId(userId);</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> ServerResponse.ok()</span><br><span class="line">                .contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">                <span class="comment">// .body(customers);</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤„ç†åˆ é™¤ç”¨æˆ·è¯·æ±‚</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request æœåŠ¡å™¨è¯·æ±‚å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœåŠ¡å™¨å“åº”ï¼ˆé€šå¸¸è¿”å›204 No Contentï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ServerResponse <span class="title function_">deleteUser</span><span class="params">(ServerRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userId</span> <span class="operator">=</span> request.pathVariable(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        <span class="comment">// userService.deleteById(userId);</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åˆ é™¤æˆåŠŸï¼Œè¿”å›204 No Content</span></span><br><span class="line">        <span class="keyword">return</span> ServerResponse.noContent().build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3ã€æ•°æ®è®¿é—®"><a href="#3ã€æ•°æ®è®¿é—®" class="headerlink" title="3ã€æ•°æ®è®¿é—®"></a><strong>3ã€æ•°æ®è®¿é—®</strong></h3><h4 id="æ•´åˆSSMåœºæ™¯"><a href="#æ•´åˆSSMåœºæ™¯" class="headerlink" title="æ•´åˆSSMåœºæ™¯"></a>æ•´åˆSSMåœºæ™¯</h4><blockquote>
<p>SpringBoot  æ•´åˆ  Spring  ã€  SpringMVC  ã€  MyBatis è¿›â¾æ•°æ®è®¿é—®åœºæ™¯å¼€å‘</p>
</blockquote>
<h5 id="1ã€åˆ›å»ºSSMæ•´åˆé¡¹ç›®"><a href="#1ã€åˆ›å»ºSSMæ•´åˆé¡¹ç›®" class="headerlink" title="1ã€åˆ›å»ºSSMæ•´åˆé¡¹ç›®"></a>1ã€åˆ›å»ºSSMæ•´åˆé¡¹ç›®</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2ã€é…ç½®æ•°æ®æº"><a href="#2ã€é…ç½®æ•°æ®æº" class="headerlink" title="2ã€é…ç½®æ•°æ®æº"></a>2ã€é…ç½®æ•°æ®æº</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://192.168.200.100:3306/demo</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br></pre></td></tr></table></figure>
<p>å®‰è£…MyBatisX æ’ä»¶ï¼Œå¸®æˆ‘ä»¬â½£æˆMapperæ¥â¼çš„xmlâ½‚ä»¶å³å¯</p>
<h5 id="3ã€é…ç½®MyBatis"><a href="#3ã€é…ç½®MyBatis" class="headerlink" title="3ã€é…ç½®MyBatis"></a>3ã€é…ç½®MyBatis</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æŒ‡å®šmapperæ˜ å°„â½‚ä»¶ä½ç½®</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:/mapper/*.xml</span></span><br><span class="line"><span class="comment">#å‚æ•°é¡¹è°ƒæ•´</span></span><br><span class="line"><span class="attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>
<h5 id="4ã€CRUDç¼–å†™"><a href="#4ã€CRUDç¼–å†™" class="headerlink" title="4ã€CRUDç¼–å†™"></a>4ã€CRUDç¼–å†™</h5><p>ç¼–å†™Bean </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TUser</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String loginName;</span><br><span class="line">    <span class="keyword">private</span> String nickName;</span><br><span class="line">    <span class="keyword">private</span> String passwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–å†™Mapper </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">//æ¯ä¸ªæ–¹æ³•éƒ½åœ¨Mapperæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªæ ‡ç­¾å¯¹åº”ï¼Œæ‰€æœ‰å‚æ•°éƒ½åº”è¯¥ç”¨@Paramè¿›è¡Œç­¾åï¼Œä»¥åä½¿ç”¨åˆ¶å®šçš„åå­—åœ¨SQLä¸­å–å€¼</span></span><br><span class="line">    <span class="keyword">public</span> TUser <span class="title function_">getUserById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿â½¤ mybatisx  æ’ä»¶ï¼Œ</p>
<p>å¿«é€Ÿâ½£æˆMapperXML </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä¸Šé¢æ¥å£çš„å…¨ç±»åå’Œnamespaceå¯¹åº”å¥½--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.bitzh.bean.TUser&quot;</span>&gt;</span></span><br><span class="line">    select * from t_user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å½“ç„¶å¦‚æœæ•°æ®åº“åå­—å’Œç±»åä¸ä¸€è‡´æ¯”å¦‚æ•°æ®åº“ä¸­æ˜¯nick_nameç±»ä¸­åå­—æ˜¯nickNameé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å†™åˆ«å</span></span><br><span class="line"><span class="comment">	select nick_name nickName from t_userè¿™æ ·ã€‚</span></span><br><span class="line"><span class="comment">	æˆ–è€…åœ¨é…ç½®propertiesæ–‡ä»¶ä¸­å¼€å¯é©¼å³°å‘½åï¼Œä¹Ÿå°±æ˜¯è¯´ _n = N</span></span><br><span class="line"><span class="comment">#å‚æ•°é¡¹è°ƒæ•´</span></span><br><span class="line"><span class="comment">mybatis.configuration.map-underscore-to-camel-case=true</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ç°åœ¨SpringBootè¿˜ä¸çŸ¥é“æˆ‘ä»¬çš„Mapperæ¥å£æ˜¯è®©MyBatisæ¥åšä»£ç†å¯¹è±¡è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„ã€‚</p>
<p>æ‰€ä»¥åœ¨ä¸»å¯åŠ¨ç±»é‡Œé¢ä½¿ç”¨æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MapperScan(basePackages = &quot;com.bitzh.mapper&quot;)</span><span class="comment">//1ã€å‘Šè¯‰MyBatis,æ‰«æå“ªä¸ªæ¥å£</span></span><br><span class="line"><span class="comment">//2ã€å‘Šè¯‰MyBatisï¼Œæ¯ä¸ªæ¥å£çš„XMLæ–‡ä»¶éƒ½åœ¨å“ªé‡Œï¼Ÿåˆ©ç”¨é…ç½®é¡¹</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•CRUD</p>
<h5 id="5ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#5ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="5ã€è‡ªåŠ¨é…ç½®åŸç†"></a>5ã€è‡ªåŠ¨é…ç½®åŸç†</h5><p>SSMæ•´åˆæ€»ç»“ï¼š </p>
<ol>
<li><p>å¯¼â¼Š  mybatis-spring-boot-starter </p>
</li>
<li><p>é…ç½®æ•°æ®æºä¿¡æ¯ </p>
</li>
<li><p>é…ç½®mybatisçš„  mapper æ¥â¼æ‰«æ ä¸  xml æ˜ å°„â½‚ä»¶æ‰«æ </p>
</li>
<li><p>ç¼–å†™beanï¼Œmapperï¼Œâ½£æˆxmlï¼Œç¼–å†™sql è¿›â¾crudã€‚äº‹åŠ¡ç­‰æ“ä½œä¾ç„¶å’ŒSpringä¸­â½¤æ³•â¼€æ · </p>
</li>
<li><p>æ•ˆæœï¼š </p>
<p>â€‹    a.  æ‰€æœ‰sqlå†™åœ¨xmlä¸­</p>
<p>â€‹    b.  æ‰€æœ‰  mybatis é…ç½® å†™åœ¨  application.properties  ä¸‹â¾¯ </p>
<p><strong>jdbc åœºæ™¯çš„â¾ƒåŠ¨é…ç½®</strong>  ï¼š </p>
<p>mybatis-spring-boot-starter  å¯¼â¼Š  æ•°æ®åº“çš„åœºæ™¯ spring-boot-starter-jdbc  ï¼Œjdbcæ˜¯æ“ä½œæ•°æ®åº“çš„åœºæ™¯</p>
<p>Jdbc  åœºæ™¯çš„â¼ä¸ªâ¾ƒåŠ¨é…ç½® ï¼š</p>
<p>1ã€org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration  </p>
<p>â€‹    æ•°æ®æºçš„â¾ƒåŠ¨é…ç½® </p>
<p>â€‹    æ‰€æœ‰å’Œæ•°æ®æºæœ‰å…³çš„é…ç½®éƒ½ç»‘å®šåœ¨  DataSourceProperties  </p>
<p>â€‹    é»˜è®¤ä½¿â½¤  HikariDataSource </p>
<p>2ã€org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration </p>
<p>â€‹     ç»™å®¹å™¨ä¸­æ”¾äº† JdbcTemplate  æ“ä½œæ•°æ®åº“ </p>
<p>3ã€org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration </p>
<p>4ã€org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration </p>
<p>â€‹    åŸºäºXAâ¼†é˜¶æäº¤åè®®çš„åˆ†å¸ƒå¼äº‹åŠ¡æ•°æ®æº </p>
<p>5ã€org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration â½€æŒäº‹åŠ¡ </p>
<p>å…·æœ‰çš„åº•å±‚èƒ½â¼’ï¼šæ•°æ®æºã€ JdbcTemplate  ã€äº‹åŠ¡ </p>
</li>
</ol>
<p>   <strong>MyBatisAutoConfiguration</strong>  ï¼šé…ç½®äº†MyBatisçš„æ•´åˆæµç¨‹ </p>
<p>   mybatis-spring-boot-starter  å¯¼â¼Š  mybatis-spring-boot-autoconfigure ï¼ˆ mybatis çš„â¾ƒåŠ¨é…ç½®åŒ…ï¼‰  </p>
<p>   é»˜è®¤åŠ è½½ä¸¤ä¸ªâ¾ƒåŠ¨é…ç½®ç±»ï¼š         </p>
<p>   â€‹    org.mybatis.spring.boot.autoconfigure.MybatisLanguageDriverAutoConfiguration</p>
<p>   â€‹    org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration </p>
<p>   â€‹        å¿…é¡»åœ¨æ•°æ®æºé…ç½®å¥½ä¹‹åæ‰é…ç½® </p>
<p>   â€‹        ç»™å®¹å™¨ä¸­ SqlSessionFactory  ç»„ä»¶ã€‚åˆ›å»ºå’Œæ•°æ®åº“çš„â¼€æ¬¡ä¼šè¯ </p>
<p>   â€‹        ç»™å®¹å™¨ä¸­ SqlSessionTemplate  ç»„ä»¶ã€‚æ“ä½œæ•°æ®åº“ </p>
<p>   MyBatisçš„æ‰€æœ‰é…ç½®ç»‘å®šåœ¨ MybatisProperties  </p>
<p>   <strong>æ¯ä¸ªMapperæ¥â¼çš„ä»£ç†å¯¹è±¡æ˜¯æ€ä¹ˆåˆ›å»ºæ”¾åˆ°å®¹å™¨ä¸­</strong>ã€‚è¯¦â»…@MapperScanåŸç†ï¼š </p>
<p>   â€‹    åˆ©â½¤ @Import(MapperScannerRegistrar.class)  æ‰¹é‡ç»™å®¹å™¨ä¸­æ³¨å†Œç»„ä»¶ã€‚è§£ææŒ‡ å®šçš„åŒ…è·¯å¾„â¾¥â¾¯çš„æ¯â¼€ä¸ªç±»ï¼Œä¸ºæ¯â¼€ä¸ªMapperæ¥â¼ç±»ï¼Œåˆ›å»ºBeanå®šä¹‰ä¿¡æ¯ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­ã€‚</p>
<p>   è¿™é‡ŒMapperçš„ä»£ç†å¯¹è±¡åªæ˜¯ä¸ºäº†æ³¨å…¥iocï¼Œmybatisæ‰§è¡Œæ—¶æ ¹æ®mapperRegistryçš„mapperä¿¡æ¯å†åŸºäºåŸå‹æ¨¡å¼å’ŒjdkåŠ¨æ€ä»£ç†æ¯æ¬¡éƒ½ç”Ÿæˆmapperçš„ä»£ç†ç±»</p>
<blockquote>
<p>å¦‚ä½•åˆ†æå“ªä¸ªåœºæ™¯å¯¼â¼Šä»¥åï¼Œå¼€å¯äº†å“ªäº›â¾ƒåŠ¨é…ç½®ç±»ã€‚ æ‰¾ï¼š  classpath:/META-INF/spring/org.springframework.boot.autoconfigure. AutoConfiguration.imports  â½‚ä»¶ä¸­é…ç½®çš„æ‰€æœ‰å€¼ï¼Œå°±æ˜¯è¦å¼€å¯çš„â¾ƒåŠ¨é…ç½®ç±»ï¼Œä½†æ˜¯æ¯ä¸ª ç±»å¯èƒ½æœ‰æ¡ä»¶æ³¨è§£ï¼ŒåŸºäºæ¡ä»¶æ³¨è§£åˆ¤æ–­å“ªä¸ªâ¾ƒåŠ¨é…ç½®ç±»â½£æ•ˆäº†ã€‚ </p>
</blockquote>
<h5 id="6ã€å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®"><a href="#6ã€å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®" class="headerlink" title="6ã€å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®"></a>6ã€å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè¯¦ç»†æ‰“å°å¼€å¯äº†å“ªäº›â¾ƒåŠ¨é…ç½®</span></span><br><span class="line"><span class="attr">debug</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># Positive (â½£æ•ˆçš„â¾ƒåŠ¨é…ç½®ï¼‰Negativeï¼ˆä¸â½£æ•ˆçš„â¾ƒåŠ¨é…ç½®ï¼‰</span></span><br></pre></td></tr></table></figure>
<h5 id="7ã€æ•´åˆå…¶ä»–æ•°æ®æº"><a href="#7ã€æ•´åˆå…¶ä»–æ•°æ®æº" class="headerlink" title="7ã€æ•´åˆå…¶ä»–æ•°æ®æº"></a>7ã€æ•´åˆå…¶ä»–æ•°æ®æº</h5><h6 id="1ã€Druidæ•°æ®æº"><a href="#1ã€Druidæ•°æ®æº" class="headerlink" title="1ã€Druidæ•°æ®æº"></a>1ã€Druidæ•°æ®æº</h6><blockquote>
<p>æš‚ä¸â½€æŒ  SpringBoot3 </p>
<p>å¯¼â¼Š  druid-starter </p>
<p>å†™é…ç½® </p>
<p>åˆ†æâ¾ƒåŠ¨é…ç½®äº†å“ªäº›ä¸œâ»„ï¼Œæ€ä¹ˆâ½¤</p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ•°æ®æºåŸºæœ¬é…ç½®</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://192.168.200.100:3306/demo</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"><span class="attr">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="comment"># é…ç½®StatFilterç›‘æ§</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.stat.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.stat.db-type</span>=<span class="string">mysql</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.stat.log-slow-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.stat.slow-sql-millis</span>=<span class="string">2000</span></span><br><span class="line"><span class="comment"># é…ç½®WallFilteré˜²â½•å¢™</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.wall.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.wall.db-type</span>=<span class="string">mysql</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.wall.config.delete-allow</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.datasource.druid.filter.wall.config.drop-table-allow</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># é…ç½®ç›‘æ§â»šï¼Œå†…ç½®ç›‘æ§â»šâ¾¯çš„â¾¸â»šæ˜¯/druid/index.html</span></span><br><span class="line"><span class="attr">spring.datasource.druid.stat-view-servlet.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="attr">spring.datasource.druid.stat-view-servlet.login-username</span>=<span class="string">admin</span></span><br><span class="line"><span class="attr">spring.datasource.druid.stat-view-servlet.login-password</span>=<span class="string">admin</span></span><br><span class="line"><span class="attr">spring.datasource.druid.stat-view-servlet.allow</span>=<span class="string">*</span></span><br><span class="line"><span class="comment"># å…¶ä»–Filter é…ç½®ä¸å†æ¼”ç¤º</span></span><br><span class="line"><span class="comment"># â½¬å‰ä¸ºä»¥ä¸‹Filter æä¾›äº†é…ç½®â½€æŒï¼Œè¯·å‚è€ƒâ½‚æ¡£æˆ–è€…æ ¹æ®IDEæç¤ºï¼ˆspring.datasource.druid.filter.*ï¼‰è¿›â¾é…ç½®ã€‚</span></span><br><span class="line"><span class="comment"># StatFilter</span></span><br><span class="line"><span class="comment"># WallFilter</span></span><br><span class="line"><span class="comment"># ConfigFilter</span></span><br><span class="line"><span class="comment"># EncodingConvertFilter</span></span><br><span class="line"><span class="comment"># Slf4jLogFilter</span></span><br><span class="line"><span class="comment"># Log4jFilter</span></span><br><span class="line"><span class="comment"># Log4j2Filter</span></span><br><span class="line"><span class="comment"># CommonsLogFilter</span></span><br></pre></td></tr></table></figure>
<h3 id="4ã€åŸºç¡€ç‰¹æ€§"><a href="#4ã€åŸºç¡€ç‰¹æ€§" class="headerlink" title="4ã€åŸºç¡€ç‰¹æ€§"></a><strong>4ã€åŸºç¡€ç‰¹æ€§</strong></h3><h4 id="1ã€SpringApplication"><a href="#1ã€SpringApplication" class="headerlink" title="1ã€SpringApplication"></a>1ã€SpringApplication</h4><h5 id="1-1-è‡ªå®šä¹‰banner"><a href="#1-1-è‡ªå®šä¹‰banner" class="headerlink" title="1.1 è‡ªå®šä¹‰banner"></a>1.1 è‡ªå®šä¹‰banner</h5><p>å¯åŠ¨æ—¶å€™çš„å›¾æ ‡å°±æ˜¯banner</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç±»è·¯å¾„æ·»åŠ banner.txtæˆ–è®¾ç½®</span></span><br><span class="line"><span class="attr">spring.banner.location</span>  <span class="string"></span></span><br><span class="line"><span class="comment">#å°±å¯ä»¥å®šåˆ¶ banner</span></span><br><span class="line"><span class="comment"># å…³é—­banner</span></span><br><span class="line"><span class="attr">spring.main.banner-mode</span>=<span class="string">off </span></span><br></pre></td></tr></table></figure>
<p>å®šåˆ¶bannerç½‘ç«™ï¼š <a target="_blank" rel="noopener" href="https://www.bootschool.net/ascii">https://www.bootschool.net/ascii</a> </p>
<h5 id="1-2è‡ªå®šä¹‰SpringApplication"><a href="#1-2è‡ªå®šä¹‰SpringApplication" class="headerlink" title="1.2è‡ªå®šä¹‰SpringApplication"></a>1.2è‡ªå®šä¹‰SpringApplication</h5><p>ç„¶ååœ¨ä¸»å¯åŠ¨é‡Œé¢æ¯æ¬¡éƒ½æ˜¯<strong>SpringApplication.run</strong>ï¼Œç°åœ¨æˆ‘ä»¬è¦ç ”ç©¶è¿™ä¸ªã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span><span class="comment">//ä¸»ç¨‹åºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BootApplication</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//1ã€SpringApplicationæ˜¯Bootåº”ç”¨çš„æ ¸å¿ƒAPIå…¥å£</span></span><br><span class="line">        <span class="comment">//SpringApplication.run(BootApplication.class.args);ç‚¹å‡»æºç çœ‹å‡ºè¿™ä¸€æ­¥å¯ä»¥åˆ†è§£æˆ</span></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬èƒ½æ‹†æˆä¸¤æ­¥æ¥å†™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½è‡ªå®šä¹‰applicationåº”ç”¨</span></span><br><span class="line">        <span class="comment">//1ã€è‡ªå®šä¹‰SpringApplicationçš„åº•å±‚è®¾ç½®</span></span><br><span class="line">        <span class="type">SpringApplication</span> <span class="variable">springApplication</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(BootApplication.class);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç„¶åè¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®bannerç­‰å„ç§åº•å±‚é…ç½®</span></span><br><span class="line">        <span class="comment">//application.setDefaultProperties()</span></span><br><span class="line">        <span class="comment">//è¿™ä¸ªé…ç½®ä¸ä¼˜å…ˆï¼Œä½†æ˜¯æœ‰ç”¨</span></span><br><span class="line">        application.setBannerMode(Banner.Mode.OFF);</span><br><span class="line">        <span class="comment">//2ã€SpringApplication è¿è¡Œèµ·æ¥</span></span><br><span class="line">        application.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="1-3FluentBuilder-API"><a href="#1-3FluentBuilder-API" class="headerlink" title="1.3FluentBuilder API"></a>1.3FluentBuilder API</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span><span class="comment">//ä¸»ç¨‹åºç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BootApplication</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">        <span class="comment">//ç¬¬äºŒç§è¿è¡Œçš„æ–¹å¼ï¼Œé€šè¿‡æµå¼APIè¿›è¡Œè®¾ç½®</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">SpringApplicationBuilder</span>()</span><br><span class="line">             .main(BootApplication.class)</span><br><span class="line">			.sources(BootApplication.class)</span><br><span class="line">			<span class="comment">//.child(Application.class)</span></span><br><span class="line">			.bannerMode(Banner.Mode.OFF)</span><br><span class="line">			.run(args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2ã€Profiles"><a href="#2ã€Profiles" class="headerlink" title="2ã€Profiles"></a>2ã€Profiles</h4><blockquote>
<p>ç¯å¢ƒéš”ç¦»èƒ½åŠ›ï¼šå¿«é€Ÿåˆ‡æ¢å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ã€æ ‡è¯†ç¯å¢ƒï¼ŒæŒ‡å®šå“ªäº›ç»„ä»¶ã€é…ç½®åœ¨é‚£ä¸ªç¯å¢ƒç”Ÿæ•ˆ</p>
<p>2ã€åˆ‡æ¢ç¯å¢ƒï¼šè¿™ä¸ªç¯å¢ƒå¯¹åº”çš„æ‰€æœ‰ç»„ä»¶å’Œé…ç½®å°±åº”è¯¥ç”Ÿæ•ˆ</p>
</blockquote>
<h5 id="2-1ä½¿ç”¨"><a href="#2-1ä½¿ç”¨" class="headerlink" title="2.1ä½¿ç”¨"></a>2.1ä½¿ç”¨</h5><h6 id="2-1-1-æŒ‡å®šç¯å¢ƒ"><a href="#2-1-1-æŒ‡å®šç¯å¢ƒ" class="headerlink" title="2.1.1 æŒ‡å®šç¯å¢ƒ"></a>2.1.1 æŒ‡å®šç¯å¢ƒ</h6><ul>
<li>Spring Profiles æä¾›ä¸€ç§ <strong>éš”ç¦»é…ç½®</strong> çš„æ–¹å¼ï¼Œä½¿å…¶ä»…åœ¨ <strong>ç‰¹å®šç¯å¢ƒ</strong> ç”Ÿæ•ˆ</li>
<li>ä»»ä½• <code>@Component</code> ï¼Œ <code>@Configuration</code> æˆ–è€… <code>@ConfigurationProperties</code> å¯ä»¥ä½¿ç”¨<code>@Profile</code>æ ‡è®°ï¼Œæ¥æŒ‡å®šä½•æ—¶è¢«åŠ è½½ ã€å®¹å™¨ä¸­çš„ç»„ä»¶éƒ½å¯ä»¥è¢« <code>@Profile</code>æ ‡è®°ã€‘</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1ã€æ ‡è¯†ç¯å¢ƒ</span></span><br><span class="line"><span class="comment">// 1ï¼‰åŒºåˆ†å‡ºå‡ ä¸ªç¯å¢ƒï¼š dev (å¼€å‘ç¯å¢ƒ) , testï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰ï¼Œprodï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span></span><br><span class="line"><span class="comment">// 2) æŒ‡å®šæ¯ä¸ªç»„ä»¶åœ¨é‚£ä¸ªç¯å¢ƒç”Ÿæ•ˆï¼šdefaultç¯å¢ƒï¼šé»˜è®¤ç¯å¢ƒ</span></span><br><span class="line"><span class="comment">//		ç»„ä»¶æ²¡æœ‰æ ‡æ³¨@Profileé‚£ä¹ˆå°±æ˜¯ä»»ä½•ç¯å¢ƒéƒ½ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">// 3) é»˜è®¤åªæœ‰æ¿€æ´»æŒ‡å®šçš„ç¯å¢ƒï¼Œè¿™äº›ç»„ä»¶æ‰ä¼šç”Ÿæ•ˆ</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç°åœ¨æˆ‘ä»¬æœ‰ç»„ä»¶,åº•å±‚å¯ä»¥æ”¾æ•°ç»„</span></span><br><span class="line"><span class="comment">//ç¬¬ä¸€ç§å†™æ³•@Profile(&quot;dev&quot;)</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§@Profile(&#123;&quot;dev&quot;,&quot;test&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆç¡®å®šå®¹å™¨ä¸­æœ‰æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬åˆ©ç”¨builderè¿”å›çš„ä¸Šä¸‹æ–‡æ¥</span></span><br><span class="line"><span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SpringApplicationBuilder</span>();</span><br><span class="line">context.getBean(Cat.class);<span class="comment">//è¿™æ ·å°±çŸ¥é“åº”ç”¨ä¸­æœ‰æ²¡æœ‰äº†</span></span><br></pre></td></tr></table></figure>
<h6 id="2-1-2-æ¿€æ´»ç¯å¢ƒ"><a href="#2-1-2-æ¿€æ´»ç¯å¢ƒ" class="headerlink" title="2.1.2 æ¿€æ´»ç¯å¢ƒ"></a>2.1.2 æ¿€æ´»ç¯å¢ƒ</h6><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2ã€æ¿€æ´»ç¯å¢ƒ</span><br><span class="line">	é…ç½®æ–‡ä»¶æ¿€æ´»ï¼šspring.profiles.active=dev,test</span><br><span class="line">    å‘½ä»¤è¡Œæ¿€æ´»ï¼š java -jar xxx.jar  --spring.profiles.active=dev</span><br></pre></td></tr></table></figure>
<h6 id="2-1-3-ç¯å¢ƒåŒ…å«"><a href="#2-1-3-ç¯å¢ƒåŒ…å«" class="headerlink" title="2.1.3 ç¯å¢ƒåŒ…å«"></a>2.1.3 ç¯å¢ƒåŒ…å«</h6><p>æ³¨æ„ï¼š </p>
<ol>
<li><p>spring.profiles.active å’Œ spring.profiles.default åªèƒ½â½¤åˆ° â½† profile çš„â½‚ä»¶ä¸­ï¼Œå¦‚æœåœ¨ application-dev.yamlä¸­ç¼–å†™å°±æ˜¯â½†æ•ˆçš„ </p>
</li>
<li><p>ä¹Ÿå¯ä»¥é¢å¤–æ·»åŠ â½£æ•ˆâ½‚ä»¶ï¼Œâ½½ä¸æ˜¯æ¿€æ´»æ›¿æ¢ã€‚â½å¦‚ï¼š</p>
</li>
<li><p>```properties</p>
<h1 id="åŒ…å«åˆ¶å®šç¯å¢ƒï¼Œä¸ç®¡ä½ æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼Œè¿™ä¸ªéƒ½è¦æœ‰-æ€»æ˜¯è¦ç”Ÿæ•ˆçš„"><a href="#åŒ…å«åˆ¶å®šç¯å¢ƒï¼Œä¸ç®¡ä½ æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼Œè¿™ä¸ªéƒ½è¦æœ‰-æ€»æ˜¯è¦ç”Ÿæ•ˆçš„" class="headerlink" title="åŒ…å«åˆ¶å®šç¯å¢ƒï¼Œä¸ç®¡ä½ æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼Œè¿™ä¸ªéƒ½è¦æœ‰,æ€»æ˜¯è¦ç”Ÿæ•ˆçš„"></a>åŒ…å«åˆ¶å®šç¯å¢ƒï¼Œä¸ç®¡ä½ æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼Œè¿™ä¸ªéƒ½è¦æœ‰,æ€»æ˜¯è¦ç”Ÿæ•ˆçš„</h1><p>spring.profiles.include[0]=common<br>spring.profiles.include[1]=local</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">æœ€ä½³å®æˆ˜ï¼š </span><br><span class="line"></span><br><span class="line">â½£æ•ˆçš„ç¯å¢ƒ = æ¿€æ´»çš„ç¯å¢ƒ/é»˜è®¤ç¯å¢ƒ  + åŒ…å«çš„ç¯å¢ƒ </span><br><span class="line"></span><br><span class="line">é¡¹â½¬â¾¥â¾¯è¿™ä¹ˆâ½¤ </span><br><span class="line"></span><br><span class="line">â€‹	åŸºç¡€çš„é…ç½® mybatis  ã€ log  ã€ xxx  ï¼šå†™åˆ°åŒ…å«ç¯å¢ƒä¸­ </span><br><span class="line"></span><br><span class="line">â€‹	éœ€è¦åŠ¨æ€åˆ‡æ¢å˜åŒ–çš„  db  ã€ redis  ï¼šå†™åˆ°æ¿€æ´»çš„ç¯å¢ƒä¸­</span><br><span class="line"></span><br><span class="line">##### 2.2Profile åˆ†ç»„</span><br><span class="line"></span><br><span class="line">åˆ›å»ºprodç»„ï¼ŒæŒ‡å®šåŒ…å«dbå’Œ mqé…ç½®</span><br><span class="line"></span><br><span class="line">```text</span><br><span class="line">spring.profiles.group.prod[0]=db</span><br><span class="line">spring.profiles.group.prod[1]=mq</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>ä½¿â½¤<code>--spring.profiles.active=prod</code>ï¼Œå°±ä¼šæ¿€æ´» <code>prod</code>ï¼Œ<code>dbï¼Œmq</code>é…ç½®â½‚ä»¶</p>
<h5 id="2-3-Profileé…ç½®æ–‡ä»¶"><a href="#2-3-Profileé…ç½®æ–‡ä»¶" class="headerlink" title="2.3 Profileé…ç½®æ–‡ä»¶"></a>2.3 Profileé…ç½®æ–‡ä»¶</h5><p><code>application-&#123;profile&#125;.properties</code> å¯ä»¥ä½œä¸ºæŒ‡å®šç¯å¢ƒçš„é…ç½®â½‚ä»¶ã€‚</p>
<p>æ¿€æ´»è¿™ä¸ªç¯å¢ƒï¼Œé…ç½®å°±ä¼šâ½£æ•ˆã€‚æœ€ç»ˆâ½£æ•ˆçš„æ‰€æœ‰é…ç½®æ˜¯ </p>
<pre><code> `application.properties ` ï¼šä¸»é…ç½®â½‚ä»¶ï¼Œä»»æ„æ—¶å€™éƒ½â½£æ•ˆ 
</code></pre><p>â€‹    <code>application-&#123;profile&#125;.properties</code>  ï¼šæŒ‡å®šç¯å¢ƒé…ç½®â½‚ä»¶ï¼Œæ¿€æ´»æŒ‡å®šç¯å¢ƒâ½£æ•ˆ</p>
<p> profileä¼˜å…ˆçº§ &gt; application</p>
<h4 id="3ã€å¤–éƒ¨åŒ–é…ç½®"><a href="#3ã€å¤–éƒ¨åŒ–é…ç½®" class="headerlink" title="3ã€å¤–éƒ¨åŒ–é…ç½®"></a>3ã€å¤–éƒ¨åŒ–é…ç½®</h4><blockquote>
<p>åœºæ™¯ï¼šçº¿ä¸Šåº”â½¤å¦‚ä½•å¿«é€Ÿä¿®æ”¹é…ç½®ï¼Œå¹¶åº”â½¤æœ€æ–°é…ç½®ï¼Ÿ </p>
<p> SpringBoot ä½¿â½¤  é…ç½®ä¼˜å…ˆçº§ + å¤–éƒ¨é…ç½®  ç®€åŒ–é…ç½®æ›´æ–°ã€ç®€åŒ–è¿ç»´ã€‚ åªéœ€è¦ç»™  jar  åº”â½¤æ‰€åœ¨çš„â½‚ä»¶å¤¹æ”¾â¼€ä¸ª  application.properties  æœ€æ–°é…ç½®â½‚ä»¶ï¼Œé‡ å¯é¡¹â½¬å°±èƒ½â¾ƒåŠ¨åº”â½¤æœ€æ–°é…ç½®</p>
</blockquote>
<h5 id="3-1-é…ç½®ä¼˜å…ˆçº§"><a href="#3-1-é…ç½®ä¼˜å…ˆçº§" class="headerlink" title="3.1 é…ç½®ä¼˜å…ˆçº§"></a>3.1 é…ç½®ä¼˜å…ˆçº§</h5><p>Spring Boot å…è®¸å°†é…ç½®å¤–éƒ¨åŒ–ï¼Œä»¥ä¾¿å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿â½¤ç›¸åŒçš„åº”â½¤ç¨‹åºä»£ç ã€‚ </p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿â½¤å„ç§å¤–éƒ¨é…ç½®æºï¼ŒåŒ…æ‹¬ <code>Java Propertiesâ½‚ä»¶ã€</code> <code>YAMLâ½‚ä»¶</code>ã€ <code>ç¯å¢ƒå˜é‡</code> å’Œ <code>å‘½ä»¤â¾å‚æ•°</code>ã€‚</p>
<p> <code>@Value</code>å¯ä»¥è·å–å€¼ï¼Œä¹Ÿå¯ä»¥â½¤  <code>@ConfigurationProperties</code>å°†æ‰€æœ‰å±æ€§ç»‘å®šåˆ° <code>java object</code>ä¸­ </p>
<p>ä»¥ä¸‹æ˜¯ SpringBoot å±æ€§æºåŠ è½½é¡ºåºã€‚ åâ¾¯çš„ä¼šè¦†ç›–å‰â¾¯çš„å€¼ã€‚ç”±ä½åˆ°â¾¼ï¼Œâ¾¼ä¼˜å…ˆçº§é…ç½®è¦†ç›–ä½ ä¼˜å…ˆçº§ </p>
<ol>
<li><strong>é»˜è®¤å±æ€§</strong>ï¼ˆé€šè¿‡ <code>SpringApplication.setDefaultProperties</code>  æŒ‡å®šçš„ï¼‰ </li>
<li><code>@PropertySource</code>æŒ‡å®šåŠ è½½çš„é…ç½®ï¼ˆéœ€è¦å†™åœ¨ <code>@Configuration</code>ç±»ä¸Šæ‰å¯â½£æ•ˆï¼‰</li>
<li><strong>é…ç½®â½‚ä»¶</strong>ï¼ˆ <code>application.properties/yml</code>ç­‰ï¼‰</li>
<li><code>RandomValuePropertySource</code>â½€æŒçš„ <code>random.*</code>é…ç½®ï¼ˆå¦‚ï¼š<code>@Value(&quot;$&#123;random.int&#125;&quot;)ï¼‰</code> </li>
<li>OS ç¯å¢ƒå˜é‡ </li>
<li>Java ç³»ç»Ÿå±æ€§ï¼ˆ <code>System.getProperties()</code>ï¼‰ </li>
<li>JNDI å±æ€§ï¼ˆæ¥â¾ƒ <code>java:comp/env</code>ï¼‰ </li>
<li><code>ServletContext</code>åˆå§‹åŒ–å‚æ•° </li>
<li><code>ServletConfig</code>åˆå§‹åŒ–å‚æ•° </li>
<li><code>SPRING_APPLICATION_JSON</code>å±æ€§ï¼ˆå†…ç½®åœ¨ç¯å¢ƒå˜é‡æˆ–ç³»ç»Ÿå±æ€§ä¸­çš„ JSONï¼‰ </li>
<li><strong>å‘½ä»¤â¾å‚æ•°</strong> </li>
<li>æµ‹è¯•å±æ€§ã€‚( <code>@SpringBootTest</code>è¿›â¾æµ‹è¯•æ—¶æŒ‡å®šçš„å±æ€§) </li>
<li>æµ‹è¯•ç±» <code>@TestPropertySource</code>æ³¨è§£ </li>
<li>Devtools è®¾ç½®çš„å…¨å±€å±æ€§ã€‚<code>( $HOME/.config/spring-boot)</code></li>
</ol>
<blockquote>
<p>ç»“è®ºï¼šé…ç½®å¯ä»¥å†™åˆ°å¾ˆå¤šä½ç½®ï¼Œå¸¸â»…çš„ä¼˜å…ˆçº§é¡ºåºï¼š </p>
<p>å‘½ä»¤â¾ &gt; é…ç½®â½‚ä»¶ &gt;  springapplication é…ç½®</p>
</blockquote>
<p><strong>é…ç½®â½‚ä»¶ä¼˜å…ˆçº§</strong>å¦‚ä¸‹ï¼š(åâ¾¯è¦†ç›–å‰â¾¯)</p>
<p>1ã€  jar åŒ…å†…çš„ <code>application.properties/yml</code></p>
<p>2ã€jar åŒ…å†…çš„ <code>application-&#123;profile&#125;.properties/yml</code></p>
<p>3ã€jar åŒ…å¤–çš„ <code>application.properties/yml</code></p>
<p>4ã€ jar åŒ…å¤–çš„ <code>application-&#123;profile&#125;.properties/yml</code></p>
<p>å¦‚æœ å»ºè®®ï¼šâ½¤â¼€ç§æ ¼å¼çš„é…ç½®â½‚ä»¶ã€‚ .properties å’Œ ç»“ .yml åŒæ—¶å­˜åœ¨ , åˆ™ .properties ä¼˜å…ˆ  </p>
<p><strong>ç»“è®ºï¼š åŒ…å¤– &gt;  åŒ…å†… ï¼› åŒçº§æƒ…å†µï¼š  profile é…ç½® &gt; application é…ç½®</strong></p>
<p>æ‰€æœ‰å‚æ•°å‡å¯ç”±å‘½ä»¤â¾ä¼ â¼Šï¼Œ<code>ä½¿â½¤ --å‚æ•°é¡¹ = å‚æ•°å€¼</code>  ï¼Œå°†ä¼šè¢«æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå¹¶ä¼˜å…ˆäº ç½®â½‚ä»¶ ã€‚ â½å¦‚ <code>java -jar app.jar --name=&quot;Spring&quot;</code> ,å¯ä»¥ä½¿â½¤ <code>server.port=8000  @Value(&quot;$&#123;name&#125;&quot;)</code>è·å–</p>
<p>æ¼”ç¤ºåœºæ™¯ï¼š </p>
<p>â€‹    åŒ…å†…ï¼š application.properties    server.port=8000 </p>
<p>â€‹    åŒ…å†…ï¼š application-dev.properties     server.port=9000 </p>
<p>â€‹    åŒ…å¤–ï¼š  application.properties    server.port=8001</p>
<p>â€‹    åŒ…å¤–ï¼š application-dev.properties     server.port=9001</p>
<p>å¯åŠ¨ç«¯â¼ï¼Ÿï¼šå‘½ä»¤â¾ &gt; 9001  &gt;  8001  &gt;  9000  &gt;  8000</p>
<h5 id="3-2-å¤–éƒ¨é…ç½®"><a href="#3-2-å¤–éƒ¨é…ç½®" class="headerlink" title="3.2 å¤–éƒ¨é…ç½®"></a>3.2 å¤–éƒ¨é…ç½®</h5><p>SpringBoot åº”â½¤å¯åŠ¨æ—¶ä¼šâ¾ƒåŠ¨å¯»æ‰¾ <code>application.properties</code>å’Œ <code>application.yaml</code>ä½ç½®ï¼Œè¿›â¾åŠ è½½ã€‚ </p>
<p>é¡ºåºå¦‚ä¸‹ï¼šï¼ˆåâ¾¯è¦†ç›–å‰â¾¯ï¼‰ </p>
<ol>
<li>ç±»è·¯å¾„: å†…éƒ¨ </li>
</ol>
<p>â€‹    a.  ç±»æ ¹è·¯å¾„ </p>
<p>â€‹    b.  ç±»ä¸‹ /configåŒ… </p>
<ol>
<li><p>å½“å‰è·¯å¾„ï¼ˆé¡¹â½¬æ‰€åœ¨çš„ä½ç½®ï¼‰ </p>
<p>  a.  å½“å‰è·¯å¾„ </p>
<p>  b.  å½“å‰ä¸‹ /configâ¼¦â½¬å½• </p>
<p>  c. /configâ½¬å½•çš„ç›´æ¥â¼¦â½¬å½•</p>
</li>
</ol>
<p>æœ€ç»ˆæ•ˆæœï¼šä¼˜å…ˆçº§ç”±â¾¼åˆ°ä½ï¼Œå‰â¾¯è¦†ç›–åâ¾¯ </p>
<p>å‘½ä»¤â¾ &gt; åŒ…å¤–configç›´æ¥â¼¦â½¬å½• &gt; åŒ…å¤–configâ½¬å½• &gt; åŒ…å¤–æ ¹â½¬å½• &gt; åŒ…å†…â½¬å½• </p>
<p>åŒçº§â½è¾ƒï¼š  </p>
<p>â€‹            profileé…ç½® &gt; é»˜è®¤é…ç½® </p>
<p>â€‹            propertiesé…ç½® &gt; yamlé…ç½®</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251222180321086.png" alt="image-20251222180321086"></p>
<p>è§„å¾‹ï¼šæœ€å¤–å±‚çš„æœ€ä¼˜å…ˆã€‚</p>
<p><code>å‘½ä»¤â¾ &gt; æ‰€æœ‰ åŒ…å¤– &gt; åŒ…å†… configâ½¬å½• &gt; æ ¹â½¬å½• profile &gt; application</code></p>
<p>é…ç½®ä¸åŒå°±éƒ½â½£æ•ˆï¼ˆäº’è¡¥ï¼‰ï¼Œé…ç½®ç›¸åŒâ¾¼ä¼˜å…ˆçº§è¦†ç›–ä½ä¼˜å…ˆçº§</p>
<h5 id="3-3-å¯¼å…¥é…ç½®"><a href="#3-3-å¯¼å…¥é…ç½®" class="headerlink" title="3.3 å¯¼å…¥é…ç½®"></a>3.3 å¯¼å…¥é…ç½®</h5><p>ä½¿â½¤ <code>spring.config.import</code>å¯ä»¥å¯¼â¼Šé¢å¤–é…ç½®</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.config.import</span>=<span class="string">my.properties</span></span><br><span class="line"><span class="attr">my.property</span>=<span class="string">value</span></span><br></pre></td></tr></table></figure>
<p>â½†è®ºä»¥ä¸Šå†™æ³•çš„å…ˆåé¡ºåºï¼Œ my.propertiesçš„å€¼æ€»æ˜¯ä¼˜å…ˆäºç›´æ¥åœ¨â½‚ä»¶ä¸­ç¼–å†™çš„ </p>
<h5 id="3-4-å±æ€§å ä½ç¬¦"><a href="#3-4-å±æ€§å ä½ç¬¦" class="headerlink" title="3.4 å±æ€§å ä½ç¬¦"></a>3.4 å±æ€§å ä½ç¬¦</h5><p>é…ç½®â½‚ä»¶ä¸­å¯ä»¥ä½¿â½¤  ${name:default}å½¢å¼å–å‡ºä¹‹å‰é…ç½®è¿‡çš„å€¼ã€‚</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">app.name</span>=<span class="string">MyApp</span></span><br><span class="line"><span class="attr">app.description</span>=<span class="string">$&#123;app.name&#125; is a Spring Boot application written by $&#123;username:Unknown&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="4ã€å•å…ƒæµ‹è¯•-JUnit5"><a href="#4ã€å•å…ƒæµ‹è¯•-JUnit5" class="headerlink" title="4ã€å•å…ƒæµ‹è¯•-JUnit5"></a>4ã€å•å…ƒæµ‹è¯•-JUnit5</h4><h5 id="4-1-æ•´åˆ"><a href="#4-1-æ•´åˆ" class="headerlink" title="4.1 æ•´åˆ"></a>4.1 æ•´åˆ</h5><p>SpringBoot æä¾›â¼€ç³»åˆ—æµ‹è¯•â¼¯å…·é›†åŠæ³¨è§£â½…ä¾¿æˆ‘ä»¬è¿›â¾æµ‹è¯•ã€‚ <code>spring-boot-test</code>æä¾›æ ¸â¼¼æµ‹è¯•èƒ½â¼’ï¼Œ ç½®ã€‚ æˆ‘ä»¬åªéœ€è¦å¯¼â¼Š <code>spring-boot-test-autoconfigure</code> æä¾›æµ‹è¯•çš„â¼€äº›â¾ƒåŠ¨é… <code>spring-boot-starter-test</code>å³å¯æ•´åˆæµ‹è¯•</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>spring-boot-starter-test</code> é»˜è®¤æä¾›äº†ä»¥ä¸‹åº“ä¾›æˆ‘ä»¬æµ‹è¯•ä½¿â½¤  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">JUnit 5 </span><br><span class="line">Spring Test </span><br><span class="line">AssertJ </span><br><span class="line">Hamcrest </span><br><span class="line">Mockito </span><br><span class="line">JSONassert </span><br><span class="line">JsonPat</span><br></pre></td></tr></table></figure>
<h5 id="4-2-æµ‹è¯•"><a href="#4-2-æµ‹è¯•" class="headerlink" title="4.2 æµ‹è¯•"></a>4.2 æµ‹è¯•</h5><h6 id="4-2-0-ç»„ä»¶æµ‹è¯•"><a href="#4-2-0-ç»„ä»¶æµ‹è¯•" class="headerlink" title="4.2.0 ç»„ä»¶æµ‹è¯•"></a>4.2.0 ç»„ä»¶æµ‹è¯•</h6><p>ç›´æ¥ <code>@Autowired</code> å®¹å™¨ä¸­çš„ç»„ä»¶è¿›è¡Œæµ‹è¯•</p>
<h6 id="4-2-1-æ³¨è§£"><a href="#4-2-1-æ³¨è§£" class="headerlink" title="4.2.1 æ³¨è§£"></a>4.2.1 æ³¨è§£</h6><p>Junit5çš„æ³¨è§£å’ŒJunit4çš„æ³¨è§£æœ‰æ‰€å˜åŒ–</p>
<p><a target="_blank" rel="noopener" href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test :è¡¨ç¤ºâ½…æ³•æ˜¯æµ‹è¯•â½…æ³•ã€‚ä½†æ˜¯ä¸JUnit4çš„@Testä¸åŒï¼Œä»–çš„èŒè´£â¾®å¸¸å•â¼€ä¸èƒ½å£°æ˜ä»»ä½•å±æ€§ï¼Œæ‹“å±•çš„æµ‹è¯•å°†ä¼šç”±Jupiteræä¾›é¢å¤–æµ‹è¯•</span><br><span class="line">@ParameterizedTest :è¡¨ç¤ºâ½…æ³•æ˜¯å‚æ•°åŒ–æµ‹è¯•ï¼Œä¸‹â½…ä¼šæœ‰è¯¦ç»†ä»‹ç»</span><br><span class="line">@RepeatedTest :è¡¨ç¤ºâ½…æ³•å¯é‡å¤æ‰§â¾ï¼Œä¸‹â½…ä¼šæœ‰è¯¦ç»†ä»‹ç»</span><br><span class="line">@DisplayName :ä¸ºæµ‹è¯•ç±»æˆ–è€…æµ‹è¯•â½…æ³•è®¾ç½®å±•ç¤ºåç§°</span><br><span class="line">@BeforeAll :è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹å‰æ‰§â¾</span><br><span class="line">@BeforeEach :è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹å‰æ‰§â¾</span><br><span class="line">@AfterEach :è¡¨ç¤ºåœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•ä¹‹åæ‰§â¾</span><br><span class="line">@AfterAll :è¡¨ç¤ºåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•ä¹‹åæ‰§â¾</span><br><span class="line">@Tag :è¡¨ç¤ºå•å…ƒæµ‹è¯•ç±»åˆ«ï¼Œç±»ä¼¼äºJUnit4ä¸­çš„@Categories</span><br><span class="line">@Disabled :è¡¨ç¤ºæµ‹è¯•ç±»æˆ–æµ‹è¯•â½…æ³•ä¸æ‰§â¾ï¼Œç±»ä¼¼äºJUnit4ä¸­çš„@Ignore</span><br><span class="line">@Timeout :è¡¨ç¤ºæµ‹è¯•â½…æ³•è¿â¾å¦‚æœè¶…è¿‡äº†æŒ‡å®šæ—¶é—´å°†ä¼šè¿”å›é”™è¯¯</span><br><span class="line">@ExtendWith :ä¸ºæµ‹è¯•ç±»æˆ–æµ‹è¯•â½…æ³•æä¾›æ‰©å±•ç±»å¼•ç”¨</span><br></pre></td></tr></table></figure>
<h6 id="4-2-2-æ–­è¨€"><a href="#4-2-2-æ–­è¨€" class="headerlink" title="4.2.2 æ–­è¨€"></a>4.2.2 æ–­è¨€</h6><div class="table-container">
<table>
<thead>
<tr>
<th><strong>æ–­è¨€æ–¹æ³•</strong></th>
<th><strong>ä½œç”¨è¯´æ˜</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>assertEquals(expected, actual)</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–åŸå§‹ç±»å‹æ˜¯å¦<strong>ç›¸ç­‰</strong>ï¼ˆè°ƒç”¨ <code>equals()</code> æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼‰</td>
</tr>
<tr>
<td><code>assertNotEquals(expected, actual)</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–åŸå§‹ç±»å‹æ˜¯å¦<strong>ä¸ç›¸ç­‰</strong></td>
</tr>
<tr>
<td><code>assertSame(expected, actual)</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦<strong>æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</strong>ï¼ˆä½¿ç”¨ <code>==</code> æ¯”è¾ƒå¼•ç”¨ï¼‰</td>
</tr>
<tr>
<td><code>assertNotSame(expected, actual)</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦<strong>æŒ‡å‘ä¸åŒçš„å¯¹è±¡</strong></td>
</tr>
<tr>
<td><code>assertTrue(condition)</code></td>
<td>åˆ¤æ–­ç»™å®šçš„å¸ƒå°”è¡¨è¾¾å¼æ˜¯å¦ä¸º <strong>true</strong></td>
</tr>
<tr>
<td><code>assertFalse(condition)</code></td>
<td>åˆ¤æ–­ç»™å®šçš„å¸ƒå°”è¡¨è¾¾å¼æ˜¯å¦ä¸º <strong>false</strong></td>
</tr>
<tr>
<td><code>assertNull(object)</code></td>
<td>åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸º <strong>null</strong></td>
</tr>
<tr>
<td><code>assertNotNull(object)</code></td>
<td>åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦<strong>ä¸ä¸º null</strong></td>
</tr>
<tr>
<td><code>assertArrayEquals(expectedArray, actualArray)</code></td>
<td>åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦<strong>å†…å®¹ç›¸ç­‰</strong>ï¼ˆé€å…ƒç´ æ¯”è¾ƒï¼‰</td>
</tr>
<tr>
<td><code>assertAll(() -&gt; &#123;...&#125;, () -&gt; &#123;...&#125;, ...)</code></td>
<td><strong>ç»„åˆå¤šä¸ªæ–­è¨€</strong>ï¼Œå³ä½¿å…¶ä¸­æŸä¸ªå¤±è´¥ï¼Œå…¶ä½™ä¹Ÿä¼šç»§ç»­æ‰§è¡Œï¼ˆå¸¸ç”¨äºä¸€æ¬¡æ€§éªŒè¯å¤šä¸ªæ¡ä»¶ï¼‰</td>
</tr>
<tr>
<td><code>assertThrows(expectedExceptionClass, executable)</code></td>
<td>éªŒè¯æ‰§è¡ŒæŸæ®µä»£ç æ—¶æ˜¯å¦<strong>æŠ›å‡ºæŒ‡å®šç±»å‹çš„å¼‚å¸¸</strong></td>
</tr>
<tr>
<td><code>assertTimeout(Duration, executable)</code></td>
<td>éªŒè¯æŸæ®µä»£ç æ˜¯å¦åœ¨<strong>æŒ‡å®šæ—¶é—´å†…å®Œæˆæ‰§è¡Œ</strong>ï¼Œè¶…æ—¶åˆ™æµ‹è¯•å¤±è´¥</td>
</tr>
<tr>
<td><code>fail(message)</code></td>
<td><strong>å¼ºåˆ¶ä½¿æµ‹è¯•å¤±è´¥</strong>ï¼Œé€šå¸¸ç”¨äºéªŒè¯â€œæœ¬ä¸è¯¥æ‰§è¡Œåˆ°æ­¤å¤„â€çš„é€»è¾‘</td>
</tr>
</tbody>
</table>
</div>
<h6 id="4-2-3-åµŒå¥—æµ‹è¯•"><a href="#4-2-3-åµŒå¥—æµ‹è¯•" class="headerlink" title="4.2.3 åµŒå¥—æµ‹è¯•"></a>4.2.3 åµŒå¥—æµ‹è¯•</h6><blockquote>
<p>JUnit 5 å¯ä»¥é€šè¿‡ Java ä¸­çš„å†…éƒ¨ç±»å’Œ@Nested æ³¨è§£å®ç°åµŒå¥—æµ‹è¯•ï¼Œä»â½½å¯ä»¥æ›´å¥½çš„æŠŠç›¸å…³çš„æµ‹ è¯•â½…æ³•ç»„ç»‡åœ¨â¼€èµ·ã€‚åœ¨å†…éƒ¨ç±»ä¸­å¯ä»¥ä½¿â½¤@BeforeEach å’Œ@AfterEach æ³¨è§£ï¼Œâ½½ä¸”åµŒå¥—çš„å±‚æ¬¡ æ²¡æœ‰é™åˆ¶ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.*;</span><br><span class="line"><span class="keyword">import</span> java.util.EmptyStackException;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="meta">@DisplayName(&quot;æ ˆï¼ˆStackï¼‰&quot;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StackTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    Stack&lt;Object&gt; stack;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;å¯ä»¥é€šè¿‡ new Stack() å®ä¾‹åŒ–&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">canBeInstantiatedWithNew</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Nested</span></span><br><span class="line">    <span class="meta">@DisplayName(&quot;å½“æ ˆæ˜¯æ–°å»ºçš„&quot;)</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">WhenNew</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@BeforeEach</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">createNewStack</span><span class="params">()</span> &#123;</span><br><span class="line">            stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;æ ˆæ˜¯ç©ºçš„&quot;)</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">            assertTrue(stack.isEmpty());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;å¼¹å‡ºå…ƒç´ æ—¶æŠ›å‡º EmptyStackException&quot;)</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">throwsExceptionWhenPopped</span><span class="params">()</span> &#123;</span><br><span class="line">            assertThrows(EmptyStackException.class, stack::pop);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Test</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;æŸ¥çœ‹æ ˆé¡¶æ—¶æŠ›å‡º EmptyStackException&quot;)</span></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">throwsExceptionWhenPeeked</span><span class="params">()</span> &#123;</span><br><span class="line">            assertThrows(EmptyStackException.class, stack::peek);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Nested</span></span><br><span class="line">        <span class="meta">@DisplayName(&quot;å‹å…¥ä¸€ä¸ªå…ƒç´ ä¹‹å&quot;)</span></span><br><span class="line">        <span class="keyword">class</span> <span class="title class_">AfterPushingElement</span> &#123;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">testElement</span> <span class="operator">=</span> <span class="string">&quot;ä¸€ä¸ªæµ‹è¯•å…ƒç´ &quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@BeforeEach</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">pushAnElement</span><span class="params">()</span> &#123;</span><br><span class="line">                stack.push(testElement);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName(&quot;æ ˆä¸å†ä¸ºç©º&quot;)</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">isNotEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">                assertFalse(stack.isEmpty());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName(&quot;å¼¹å‡ºæ—¶è¿”å›è¯¥å…ƒç´ ï¼Œå¹¶ä¸”æ ˆå˜ä¸ºç©º&quot;)</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">popReturnsElementAndEmptiesStack</span><span class="params">()</span> &#123;</span><br><span class="line">                assertEquals(testElement, stack.pop());</span><br><span class="line">                assertTrue(stack.isEmpty());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Test</span></span><br><span class="line">            <span class="meta">@DisplayName(&quot;æŸ¥çœ‹æ ˆé¡¶è¿”å›è¯¥å…ƒç´ ï¼Œä¸”æ ˆä»ä¸ä¸ºç©º&quot;)</span></span><br><span class="line">            <span class="keyword">void</span> <span class="title function_">peekReturnsElementAndStackRemainsNotEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">                assertEquals(testElement, stack.peek());</span><br><span class="line">                assertFalse(stack.isEmpty());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="4-2-4-å‚æ•°åŒ–æµ‹è¯•"><a href="#4-2-4-å‚æ•°åŒ–æµ‹è¯•" class="headerlink" title="4.2.4 å‚æ•°åŒ–æµ‹è¯•"></a>4.2.4 å‚æ•°åŒ–æµ‹è¯•</h6><p>å‚æ•°åŒ–æµ‹è¯•æ˜¯JUnit5å¾ˆé‡è¦çš„â¼€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒä½¿å¾—â½¤ä¸åŒçš„å‚æ•°å¤šæ¬¡è¿â¾æµ‹è¯•æˆä¸ºäº†å¯èƒ½ï¼Œä¹Ÿä¸º æˆ‘ä»¬çš„å•å…ƒæµ‹è¯•å¸¦æ¥è®¸å¤šä¾¿åˆ©ã€‚ </p>
<p>åˆ©â½¤@ValueSourceç­‰æ³¨è§£ï¼ŒæŒ‡å®šâ¼Šå‚ï¼Œæˆ‘ä»¬å°†å¯ä»¥ä½¿â½¤ä¸åŒçš„å‚æ•°è¿›â¾å¤šæ¬¡å•å…ƒæµ‹è¯•ï¼Œâ½½ä¸éœ€è¦ æ¯æ–°å¢â¼€ä¸ªå‚æ•°å°±æ–°å¢â¼€ä¸ªå•å…ƒæµ‹è¯•ï¼Œçœå»äº†å¾ˆå¤šå†—ä½™ä»£ç ã€‚ </p>
<p>@ValueSource: ä¸ºå‚æ•°åŒ–æµ‹è¯•æŒ‡å®šâ¼Šå‚æ¥æºï¼Œâ½€æŒâ¼‹â¼¤åŸºç¡€ç±»ä»¥åŠStringç±»å‹,Classç±»å‹ @NullSource: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›â¼€ä¸ªnullçš„â¼Šå‚</p>
<p>@EnumSource: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›â¼€ä¸ªæšä¸¾â¼Šå‚ </p>
<p>@CsvFileSourceï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šCSVâ½‚ä»¶å†…å®¹ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•â¼Šå‚ </p>
<p>@MethodSourceï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šâ½…æ³•çš„è¿”å›å€¼ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•â¼Šå‚(æ³¨æ„â½…æ³•è¿”å›éœ€è¦æ˜¯â¼€ä¸ªæµ)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@ValueSource(strings = &#123;&quot;one&quot;, &quot;two&quot;, &quot;three&quot;&#125;)</span></span><br><span class="line"><span class="meta">@DisplayName(&quot;å‚æ•°åŒ–æµ‹è¯•1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">parameterizedTest1</span><span class="params">(String string)</span> &#123;</span><br><span class="line">    System.out.println(string);</span><br><span class="line">    Assertions.assertTrue(StringUtils.isNotBlank(string));</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@ParameterizedTest</span></span><br><span class="line"><span class="meta">@MethodSource(&quot;method&quot;)</span>    </span><br><span class="line"><span class="meta">@DisplayName(&quot;â½…æ³•æ¥æºå‚æ•°&quot;)</span></span><br><span class="line"><span class="comment">//æŒ‡å®šâ½…æ³•å</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWithExplicitLocalMethodSource</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    Assertions.assertNotNull(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> Stream&lt;String&gt; <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> Stream.of(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5ã€æ ¸å¿ƒåŸç†"><a href="#5ã€æ ¸å¿ƒåŸç†" class="headerlink" title="5ã€æ ¸å¿ƒåŸç†"></a><strong>5ã€æ ¸å¿ƒåŸç†</strong></h3><p>æœ‰åŠ©äºç†è§£SpringBootçš„åº•å±‚è¡Œä¸º</p>
<h4 id="1ã€äº‹ä»¶å’Œç›‘å¬å™¨"><a href="#1ã€äº‹ä»¶å’Œç›‘å¬å™¨" class="headerlink" title="1ã€äº‹ä»¶å’Œç›‘å¬å™¨"></a>1ã€äº‹ä»¶å’Œç›‘å¬å™¨</h4><h5 id="1ã€ç”Ÿå‘½å‘¨æœŸç›‘å¬"><a href="#1ã€ç”Ÿå‘½å‘¨æœŸç›‘å¬" class="headerlink" title="1ã€ç”Ÿå‘½å‘¨æœŸç›‘å¬"></a>1ã€ç”Ÿå‘½å‘¨æœŸç›‘å¬</h5><p>åœºæ™¯ï¼šç›‘å¬<strong>åº”ç”¨</strong>çš„ <strong>ç”Ÿå‘½å‘¨æœŸ</strong></p>
<h6 id="1ã€ç›‘å¬å™¨-SpringApplicationRunListener"><a href="#1ã€ç›‘å¬å™¨-SpringApplicationRunListener" class="headerlink" title="1ã€ç›‘å¬å™¨-SpringApplicationRunListener"></a>1ã€ç›‘å¬å™¨-SpringApplicationRunListener</h6><ol>
<li><p>â¾ƒå®šä¹‰ <code>SpringApplicationRunListener</code> æ¥ç›‘å¬äº‹ä»¶ï¼› </p>
<p>1.1.  ç¼–å†™ <code>SpringApplicationRunListener</code> å®ç°ç±» </p>
<p>1.2.  åœ¨  <code>META-INF/spring.factories</code>  ä¸­é…ç½®  <code>org.springframework.boot.Spri ngApplicationRunListener= â¾ƒâ¼°çš„ Listener</code>  ï¼Œè¿˜å¯ä»¥æŒ‡å®šâ¼€ä¸ªæœ‰å‚æ„é€ å™¨ï¼Œæ¥ å—ä¸¤ä¸ªå‚æ•° <code>(SpringApplication application, String[] args)</code></p>
<p>1.3.  springboot åœ¨ spring-boot.jar  ä¸­é…ç½®äº†é»˜è®¤çš„ Listenerï¼Œå¦‚ä¸‹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251222200001848.png" alt="image-20251222200001848"></p>
<p><strong>ç°åœ¨æˆ‘ä»¬æ¥è‡ªå®šä¹‰Listeneræ¥æ¨¡æ‹Ÿæ¡†æ¶åšçš„äº‹æƒ…ï¼Œä»è€Œå¼„æ¸…æ¥šæ¡†æ¶åšäº†ä»€ä¹ˆ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰ SpringApplicationRunListenerï¼Œç”¨äºç›‘å¬ Spring Boot å¯åŠ¨å„é˜¶æ®µ</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * å¿…é¡»æä¾›å¸¦ SpringApplication å’Œ String[] å‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆSpring Boot åå°„è°ƒç”¨ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySpringApplicationRunListener</span> <span class="keyword">implements</span> <span class="title class_">SpringApplicationRunListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SpringApplication application;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String[] args;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// âš ï¸ å¿…é¡»æä¾›æ­¤æ„é€ å‡½æ•°ï¼Spring Boot é€šè¿‡åå°„è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MySpringApplicationRunListener</span><span class="params">(SpringApplication application, String[] args)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.application = application;</span><br><span class="line">        <span class="built_in">this</span>.args = args;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">starting</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¼•å¯¼é˜¶æ®µã€‘starting: åº”ç”¨å¼€å§‹å¯åŠ¨ï¼ŒBootstrapContext å·²åˆ›å»º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">environmentPrepared</span><span class="params">(ConfigurableEnvironment environment)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¼•å¯¼é˜¶æ®µã€‘environmentPrepared: ç¯å¢ƒå·²å‡†å¤‡å®Œæˆï¼ˆé…ç½®å·²åŠ è½½ï¼‰ï¼Œä½† IOC å®¹å™¨å°šæœªåˆ›å»º&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextPrepared</span><span class="params">(ConfigurableApplicationContext context)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¯åŠ¨é˜¶æ®µã€‘contextPrepared: IOC å®¹å™¨å·²åˆ›å»ºï¼Œä¸»é…ç½®ç±»å°šæœªåŠ è½½ï¼Œå¼•å¯¼ä¸Šä¸‹æ–‡å³å°†å…³é—­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoaded</span><span class="params">(ConfigurableApplicationContext context)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¯åŠ¨é˜¶æ®µã€‘contextLoaded: ä¸»é…ç½®ç±»å·²åŠ è½½ï¼Œä½†å®¹å™¨å°šæœªåˆ·æ–°ï¼ˆBean è¿˜æ²¡åˆ›å»ºï¼‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">started</span><span class="params">(ConfigurableApplicationContext context)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¯åŠ¨é˜¶æ®µã€‘started: å®¹å™¨å·²åˆ·æ–°ï¼ˆæ‰€æœ‰ Bean å·²åˆ›å»ºï¼‰ï¼Œä½† Runner å°šæœªæ‰§è¡Œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ready</span><span class="params">(ConfigurableApplicationContext context)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¯åŠ¨é˜¶æ®µã€‘ready: æ‰€æœ‰ Runner å·²æ‰§è¡Œå®Œæ¯•ï¼Œåº”ç”¨å®Œå…¨å°±ç»ªï¼Œå¼€å§‹è¿è¡Œï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">failed</span><span class="params">(ConfigurableApplicationContext context, Throwable exception)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ã€å¼‚å¸¸ã€‘å¯åŠ¨å¤±è´¥: &quot;</span> + (exception != <span class="literal">null</span> ? exception.getMessage() : <span class="string">&quot;æœªçŸ¥é”™è¯¯&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬ç¼–å†™å¥½äº†å®ç°ç±»ï¼Œç„¶åå°±è¦æ ¹æ®ä»–çš„1.2æ­¥éª¤çš„è¦æ±‚è¿›è¡Œé…ç½®äº†</p>
<p><code>src/main/resources/META-INF/spring.factories</code></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># META-INF/spring.factories</span></span><br><span class="line"><span class="attr">org.springframework.boot.SpringApplicationRunListener</span>=<span class="string">\</span></span><br><span class="line"><span class="string">com.example.listener.MySpringApplicationRunListener</span></span><br></pre></td></tr></table></figure>
<p>ç„¶åå¯åŠ¨åº”ç”¨çœ‹çœ‹æ‰“å°é¡ºåºï¼Œå°±çŸ¥é“æµç¨‹äº†ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251222202340772.png" alt="image-20251222202340772"></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Listenerå…ˆè¦ä»META-INF/spring.factories è¯»åˆ°æ‰¾åˆ°æ‰€æœ‰æ³¨å†Œçš„ SpringApplicationRunListener å®ç°ç±»ï¼Œå¹¶åœ¨å¯åŠ¨æ—©æœŸå°±å®ä¾‹åŒ–å®ƒä»¬ï¼Œç”¨äºç›‘å¬åç»­ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚</span><br><span class="line">1ã€å¼•å¯¼ï¼šåˆ©â½¤BootstrapContext å¼•å¯¼æ•´ä¸ªé¡¹â½¬å¯</span><br><span class="line">	startingï¼šåº”â½¤å¼€å§‹ï¼ŒSpringApplicationçš„runâ½…æ³•â¼€è°ƒâ½¤ï¼Œåªè¦æœ‰äº†BootstrapContext å°±æ‰§â¾</span><br><span class="line">	environmentPrepared:ç¯å¢ƒå‡†å¤‡å¥½ï¼ˆæŠŠå¯åŠ¨å‚æ•°ç­‰ç»‘å®šåˆ°ç¯å¢ƒå˜é‡ä¸­ï¼‰ï¼Œä½†æ˜¯iocè¿˜æ²¡æœ‰åˆ›å»ºï¼›ã€è°ƒâ¼€æ¬¡ã€‘</span><br><span class="line">2ã€å¯åŠ¨ï¼š</span><br><span class="line">	contextPreparedï¼šiocå®¹å™¨åˆ›å»ºå¹¶å‡†å¤‡å¥½ï¼Œä½†æ˜¯sourcesï¼ˆä¸»é…ç½®ç±»ï¼‰æ²¡åŠ è½½ã€‚å¹¶å…³é—­å¼•å¯¼ä¸Šä¸‹â½‚ï¼›ç»„ä»¶éƒ½æ²¡åˆ›å»ºã€è°ƒâ¼€æ¬¡ã€‘</span><br><span class="line">	contextLoadedï¼šiocå®¹å™¨åŠ è½½ã€‚ä¸»é…ç½®ç±»åŠ è½½è¿›å»äº†ã€‚ä½†æ˜¯iocå®¹å™¨è¿˜æ²¡åˆ·æ–°ï¼ˆæˆ‘ä»¬çš„beanæ²¡åˆ›å»ºï¼‰ã€‚</span><br><span class="line">æˆªâ½Œä»¥å‰ï¼Œiocå®¹å™¨â¾¥â¾¯è¿˜æ²¡é€ beanå‘¢</span><br><span class="line">	startedï¼šiocå®¹å™¨åˆ·æ–°äº†ï¼ˆæ‰€æœ‰beané€ å¥½äº†ï¼‰ï¼Œä½†æ˜¯runner æ²¡è°ƒâ½¤ã€‚</span><br><span class="line">	ready:   iocå®¹å™¨åˆ·æ–°äº†ï¼ˆæ‰€æœ‰beané€ å¥½äº†ï¼‰ï¼Œæ‰€æœ‰ runner è°ƒâ½¤å®Œäº†ã€‚</span><br><span class="line">3ã€è¿â¾</span><br><span class="line">	ä»¥å‰æ­¥éª¤éƒ½æ­£ç¡®æ‰§â¾ï¼Œä»£è¡¨å®¹å™¨running</span><br></pre></td></tr></table></figure>
<p>çœ‹è¿™ä¸ªæµç¨‹ï¼Œè¿˜ä¼šæœ‰å¾ˆå¤šç–‘é—®runneræ˜¯ä»€ä¹ˆï¼Ÿ<strong>åŠ è½½æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œçš„â€œåŠ è½½â€æŒ‡çš„æ˜¯ï¼šå°†ä½ çš„ @Configuration ç±»ã€@Component ç±»ç­‰ Spring Bean å®šä¹‰ï¼ˆBeanDefinitionï¼‰æ³¨å†Œåˆ° IOC å®¹å™¨ä¸­ï¼Œä½†æ­¤æ—¶ Bean å°šæœªè¢«å®ä¾‹åŒ–ï¼ˆå³æ²¡è°ƒç”¨æ„é€ å‡½æ•°æˆ– @PostConstructï¼‰ã€‚</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="2ã€äº‹ä»¶è§¦å‘æ—¶æœº"><a href="#2ã€äº‹ä»¶è§¦å‘æ—¶æœº" class="headerlink" title="2ã€äº‹ä»¶è§¦å‘æ—¶æœº"></a>2ã€äº‹ä»¶è§¦å‘æ—¶æœº</h5><h6 id="1ã€å„ç§å›è°ƒç›‘å¬å™¨"><a href="#1ã€å„ç§å›è°ƒç›‘å¬å™¨" class="headerlink" title="1ã€å„ç§å›è°ƒç›‘å¬å™¨"></a>1ã€å„ç§å›è°ƒç›‘å¬å™¨</h6><p><code>BootstrapRegistryInitializer</code> ï¼š    æ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼šæ„ŸçŸ¥å¼•å¯¼åˆå§‹åŒ– ï¼Œè¿™ä¸ªæ˜¯å¯åŠ¨ä¹‹å‰</p>
<p>â€‹    <code>META-INF/spring.factories</code> </p>
<p>â€‹    åˆ›å»ºå¼•å¯¼ä¸Šä¸‹â½‚ bootstrapContext  çš„æ—¶å€™è§¦å‘ã€‚ </p>
<p>â€‹    <code>application. addBootstrapRegistryInitializer  ()</code>; </p>
<p>â€‹    åœºæ™¯ï¼š è¿›â¾å¯†é’¥æ ¡å¯¹æˆæƒã€‚ </p>
<p><code>ApplicationContextInitializer</code>ï¼š   æ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼š æ„ŸçŸ¥iocå®¹å™¨åˆå§‹åŒ– ,è¿™ä¸ªé˜¶æ®µå°±æ˜¯ç¯å¢ƒå‡†å¤‡å®Œæˆä¹‹å</p>
<p>â€‹    <code>META-INF/spring.factories</code></p>
<p>â€‹    <code>application.addInitializers();</code></p>
<p><strong><code>ApplicationListener</code></strong>ï¼š    <strong>æ„ŸçŸ¥å…¨é˜¶æ®µ</strong>ï¼šåŸºäºäº‹ä»¶æœºåˆ¶ï¼Œæ„ŸçŸ¥äº‹ä»¶ã€‚.AOPã€‚ç¯ç»•é€šçŸ¥è¿™äº›ã€‚â¼€æ—¦åˆ°äº†å“ªä¸ªé˜¶æ®µå¯ä»¥åšåˆ«çš„äº‹ </p>
<p>â€‹    <code>@Bean  æˆ– @EventListener</code> ï¼š  äº‹ä»¶é©±åŠ¨   </p>
<pre><code> `SpringApplication.addListeners(â€¦)`  æˆ–  `SpringApplicationBuilder.listeners(â€¦)  `

 `META-INF/spring.factories `
</code></pre><p>â€‹    ç±»ä¼¼ç²‰ä¸ï¼Œåªèƒ½çŸ¥é“å¹²å˜›</p>
<p><strong><code>SpringApplicationRunListener</code></strong>ï¼š     <strong>æ„ŸçŸ¥å…¨é˜¶æ®µâ½£å‘½å‘¨æœŸ</strong> + <strong>å„ç§é˜¶æ®µéƒ½èƒ½â¾ƒå®šä¹‰æ“ä½œ</strong>ï¼› <strong>åŠŸèƒ½æ›´å®Œå–„</strong></p>
<pre><code>  `META-INF/spring.factories`
</code></pre><p>â€‹    ç±»ä¼¼ç»ç†ï¼Œèƒ½å…¨éƒ¨ç®¡ç†</p>
<p><code>ApplicationRunner</code>:    æ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼šæ„ŸçŸ¥åº”â½¤å°±ç»ªReadyã€‚å¡æ­»åº”â½¤ï¼Œå°±ä¸ä¼šå°±ç»ª </p>
<p>â€‹    @Bean</p>
<p><code>CommandLineRunner</code>ï¼š   æ„ŸçŸ¥ç‰¹å®šé˜¶æ®µï¼šæ„ŸçŸ¥åº”â½¤å°±ç»ªReadyã€‚å¡æ­»åº”â½¤ï¼Œå°±ä¸ä¼šå°±ç»ª </p>
<p>â€‹    @Bean</p>
<p>æœ€ä½³å®æˆ˜ï¼š</p>
<p>â€‹    å¦‚æœé¡¹â½¬å¯åŠ¨å‰åšäº‹ï¼š <code>BootstrapRegistryInitializer</code>  å’Œ  <code>ApplicationContextInitializer</code></p>
<p>â€‹    å¦‚æœæƒ³è¦åœ¨é¡¹â½¬å¯åŠ¨å®Œæˆååšäº‹ï¼š  <code>ApplicationRunner</code> å’Œ  <code>CommandLineRunner</code></p>
<p>â€‹    å¦‚æœè¦â¼²æ¶‰â½£å‘½å‘¨æœŸåšäº‹ï¼š <code>SpringApplicationRunListener</code></p>
<p>â€‹    å¦‚æœæƒ³è¦â½¤äº‹ä»¶æœºåˆ¶ï¼š <code>ApplicationListener</code></p>
<h6 id="2ã€å®Œæ•´è§¦å‘æµç¨‹"><a href="#2ã€å®Œæ•´è§¦å‘æµç¨‹" class="headerlink" title="2ã€å®Œæ•´è§¦å‘æµç¨‹"></a>2ã€å®Œæ•´è§¦å‘æµç¨‹</h6><p>springbootå¯åŠ¨çš„æœŸé—´ä¹Ÿä¼šå¯åŠ¨äº‹ä»¶ï¼Œåˆšåˆšæˆ‘ä»¬ç†è§£äº†å¯åŠ¨æµç¨‹ï¼Œç°åœ¨äº†è§£å¯åŠ¨æœŸé—´å‘ç”Ÿçš„äº‹ä»¶ã€‚</p>
<p>9 â¼¤äº‹ä»¶  è§¦å‘é¡ºåº&amp;æ—¶æœº</p>
<p>1ã€<code>ApplicationStartingEvent</code>ï¼šåº”ç”¨å¯åŠ¨ä½†æ²¡æœ‰åšä»»ä½•äº‹æƒ…ï¼Œé™¤äº†æ³¨å†Œ <code>listeners and intializers</code></p>
<p>2ã€<code>ApplicationEnvironmentPreparedEvent</code> ï¼š <code>Environment</code>å‡†å¤‡å¥½ï¼Œä½†<code>context</code>æœªåˆ›å»ºã€‚</p>
<p>3ã€<code>ApplicationContextInitializedEvent</code>ï¼š ApplicationContext å‡†å¤‡å¥½ï¼Œ ApplicationContextInitializers è°ƒâ½¤ï¼Œä½†æ˜¯ä»»ä½•beanæœªåŠ è½½</p>
<p>4ã€ApplicationPreparedEvent  ï¼š å®¹å™¨åˆ·æ–°ä¹‹å‰ï¼Œbeanå®šä¹‰ä¿¡æ¯åŠ è½½</p>
<p>5ã€ApplicationStartedEvent  ï¼š å®¹å™¨åˆ·æ–°å®Œæˆï¼Œ runneræœªè°ƒâ½¤</p>
<p>ä»¥ä¸‹å°±å¼€å§‹æ’â¼Šäº†æ¢é’ˆæœºåˆ¶</p>
<hr>
<p>6ã€AvailabilityChangeEvent  ï¼š  LivenessState.CORRECT  åº”â½¤å­˜æ´»ï¼› å­˜æ´»æ¢é’ˆ</p>
<p>7ã€ApplicationReadyEvent  : ä»»ä½•runnerè¢«è°ƒâ½¤</p>
<p>8ã€AvailabilityChangeEvent  ï¼šReadinessState.ACCEPTING_TRAFFIC  å°±ç»ªæ¢é’ˆï¼Œå¯ä»¥æ¥è¯·æ±‚</p>
<p>9ã€ApplicationFailedEvent   ï¼šå¯åŠ¨å‡ºé”™</p>
<p>è¿™ä¸ªå­˜æ´»æ¢é’ˆå’Œå°±ç»ªæ¢é’ˆå¯¹åº”k8säº‘å¹³å°ï¼Œè¿™æ ·å°±çŸ¥é“åº”ç”¨ä»€ä¹ˆæ—¶å€™å¯ä»¥ç”¨äº†</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251222224115461.png" alt="image-20251222224115461"></p>
<p>åº”â½¤äº‹ä»¶å‘é€é¡ºåºå¦‚ä¸‹ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251222224132487.png" alt="image-20251222224132487"></p>
<p>æ„ŸçŸ¥åº”â½¤æ˜¯å¦å­˜æ´»äº†ï¼šå¯èƒ½æ¤ç‰©çŠ¶æ€ï¼Œè™½ç„¶æ´»ç€ä½†æ˜¯ä¸èƒ½å¤„ç†è¯·æ±‚ã€‚ </p>
<p>åº”â½¤æ˜¯å¦å°±ç»ªäº†ï¼šèƒ½å“åº”è¯·æ±‚ï¼Œè¯´æ˜ç¡®å®æ´»çš„â½è¾ƒå¥½ã€‚</p>
<p>å°æ€»ç»“ï¼šå°±æ˜¯springtbootå¯åŠ¨æ—¶ä¼šè°ƒç”¨å‡ ä¸ªå‡½æ•°å’Œå‘å¸ƒå‡ ä¸ªäº‹ä»¶ï¼Œè§¦å‘ç‚¹å°±æ˜¯å¯åŠ¨ã€å‡†å¤‡ç¯å¢ƒåã€iocåˆå§‹åŒ–ã€ä¸»é…ç½®ç±»åŠ è½½ã€iocåˆ·æ–°ã€runneræ‰§è¡Œä¹‹åã€‚</p>
<h6 id="3ã€SpringBootäº‹ä»¶é©±åŠ¨å¼€å‘"><a href="#3ã€SpringBootäº‹ä»¶é©±åŠ¨å¼€å‘" class="headerlink" title="3ã€SpringBootäº‹ä»¶é©±åŠ¨å¼€å‘"></a>3ã€SpringBootäº‹ä»¶é©±åŠ¨å¼€å‘</h6><p>ä¸Šé¢äº†è§£äº†å¯åŠ¨æµç¨‹å’Œæµç¨‹ä¸­çš„äº‹ä»¶ï¼Œç„¶åæœ‰çš„äº‹ä»¶æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨å¼€å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦çŸ¥é“å¦‚ä½•åŸºäºäº‹ä»¶é©±åŠ¨å¼€å‘çš„äº†ã€‚</p>
<blockquote>
<p>åº”ç”¨å¯åŠ¨è¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ„ŸçŸ¥ï¼ˆ9å¤§äº‹ä»¶ï¼‰ã€åº”ç”¨è¿è¡Œä¸­äº‹ä»¶æ„ŸçŸ¥ã€‚</p>
</blockquote>
<ul>
<li>äº‹ä»¶å‘å¸ƒï¼š<code>ApplicationEventPublisherAware</code>æˆ– <code>æ³¨â¼Šï¼š ApplicationEventMulticaster</code></li>
<li>äº‹ä»¶ç›‘å¬ï¼š<code>ç»„ä»¶ + @EventListener</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251223001131640.png" alt="image-20251223001131640"></p>
<p>å¦‚æœä¸æ˜¯äº‹ä»¶é©±åŠ¨ï¼Œæˆ‘ä»¬å‡è®¾ç™»å½•çš„æ—¶å€™éœ€è¦ä¸€å †ä¸šåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•ä¹‹åï¼Œéœ€è¦è‡ªåŠ¨ç­¾åˆ°ï¼Œéšæœºå‘æ”¾ä¼˜æƒ å·ç­‰ç­‰ï¼Œç„¶åå†™@Autowiredæ³¨å…¥å…¶ä»–çš„æœåŠ¡ç„¶ååœ¨ç™»å½•ä¸šåŠ¡é‡Œé¢ä¸€ä¸ªä¸ªè°ƒç”¨ã€‚</p>
<p><strong>ä½†æ˜¯å¦‚æœè¿™ç§ç¼–ç æ–¹å¼ï¼Œå¦‚æœè¦å¢åŠ ä¸šåŠ¡ä¼šéå¸¸éº»çƒ¦ã€‚</strong></p>
<p>è®¾è®¡æ¨¡å¼ï¼šå¯¹æ–°å¢å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251223001141018.png" alt="image-20251223001141018"></p>
<blockquote>
<p>äº‹ä»¶å‘å¸ƒè€…</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äº‹ä»¶å‘å¸ƒå™¨æœåŠ¡ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//SpringBootå·²ç»ç»™æˆ‘ä»¬å‡†å¤‡å¥½äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»§æ‰¿ApplicationEventPublisherAwareç„¶åå‘å¸ƒå°±è°ƒç”¨åº•å±‚çš„å°±å¥½äº†</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EventPublisher</span> <span class="keyword">implements</span> <span class="title class_">ApplicationEventPublisherAware</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åº•å±‚å‘é€äº‹ä»¶ç”¨çš„ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="comment">     * Spring Boot ä¼šé€šè¿‡ ApplicationEventPublisherAware æ¥å£è‡ªåŠ¨æ³¨å…¥ç»™æˆ‘ä»¬ã€‚</span></span><br><span class="line"><span class="comment">     * äº‹ä»¶æ˜¯å¹¿æ’­å‡ºå»çš„ï¼Œæ‰€æœ‰ç›‘å¬è¯¥äº‹ä»¶çš„ç›‘å¬å™¨éƒ½å¯ä»¥æ”¶åˆ°ã€‚</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ApplicationEventPublisher applicationEventPublisher;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘é€ä»»æ„ ApplicationEvent äº‹ä»¶ã€‚</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> event è¦å‘å¸ƒçš„äº‹ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEvent</span><span class="params">(ApplicationEvent event)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨åº•å±‚ API å‘é€äº‹ä»¶</span></span><br><span class="line">        applicationEventPublisher.publishEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¼šè¢« Spring è‡ªåŠ¨è°ƒç”¨ï¼Œå°†çœŸæ­£çš„äº‹ä»¶å‘å¸ƒç»„ä»¶æ³¨å…¥è¿›æ¥ã€‚</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> applicationEventPublisher Spring æä¾›çš„äº‹ä»¶å‘å¸ƒå™¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationEventPublisher</span><span class="params">(ApplicationEventPublisher applicationEventPublisher)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.applicationEventPublisher = applicationEventPublisher;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>äº‹ä»¶è®¢é˜…è€…</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CouponService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç›‘å¬ç™»å½•æˆåŠŸäº‹ä»¶ï¼Œä¼˜å…ˆçº§ä¸º 1ï¼ˆæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="meta">@Order(1)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onLoginSuccess</span><span class="params">(LoginSuccessEvent event)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===== CouponService ===== æ„ŸçŸ¥åˆ°äº‹ä»¶: &quot;</span> + event);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‡è®¾ LoginSuccessEvent å†…éƒ¨å·²å°è£… UserEntityï¼Œè€Œä¸æ˜¯é€šè¿‡ getSource()</span></span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">user</span> <span class="operator">=</span> event.getUser(); <span class="comment">// æ›´å®‰å…¨ã€æ›´æ¸…æ™°</span></span><br><span class="line">        sendCoupon(user.getUsername());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendCoupon</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        System.out.println(username + <span class="string">&quot; éšæœºå¾—åˆ°äº†ä¸€å¼ ä¼˜æƒ åˆ¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ•´ä¸ªæ¡ˆä¾‹å¦‚ä¸‹ï¼šäº‹ä»¶æ˜¯å¹¿æ’­å½¢å¼çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å®ä½“ç±»ï¼šUserEntity.java</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserEntity</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//äº‹ä»¶ç±»ï¼šLoginSuccessEvent.java</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»å½•æˆåŠŸäº‹ä»¶</span></span><br><span class="line"><span class="comment"> * ç»§æ‰¿ ApplicationEventï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª Spring åº”ç”¨äº‹ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginSuccessEvent</span> <span class="keyword">extends</span> <span class="title class_">ApplicationEvent</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è™½ç„¶ source å°±æ˜¯ UserEntityï¼Œä½†æˆ‘ä»¬æä¾›ç±»å‹å®‰å…¨çš„ getter</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoginSuccessEvent</span><span class="params">(UserEntity user)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(user); <span class="comment">// å°† user ä½œä¸º source ä¼ ç»™çˆ¶ç±»</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç±»å‹å®‰å…¨åœ°è·å–ç”¨æˆ·ï¼ˆé¿å…å¤–éƒ¨å¼ºè½¬ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> UserEntity <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (UserEntity) getSource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Controllerï¼šå‘å¸ƒäº‹ä»¶</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> EventPublisher eventPublisher;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LoginController</span><span class="params">(EventPublisher eventPublisher)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.eventPublisher = eventPublisher;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username)</span> &#123;</span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserEntity</span>(username);</span><br><span class="line">        <span class="type">LoginSuccessEvent</span> <span class="variable">event</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoginSuccessEvent</span>(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘å¸ƒäº‹ä»¶</span></span><br><span class="line">        eventPublisher.sendEvent(event);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç™»å½•æˆåŠŸï¼Œå·²è§¦å‘äº‹ä»¶ï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//äº‹ä»¶å‘å¸ƒå·¥å…·ç±»</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EventPublisher</span> <span class="keyword">implements</span> <span class="title class_">ApplicationEventPublisherAware</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> ApplicationEventPublisher applicationEventPublisher;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendEvent</span><span class="params">(ApplicationEvent event)</span> &#123;</span><br><span class="line">        applicationEventPublisher.publishEvent(event);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationEventPublisher</span><span class="params">(ApplicationEventPublisher applicationEventPublisher)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.applicationEventPublisher = applicationEventPublisher;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç§¯åˆ†å¢åŠ æœåŠ¡ï¼ŒåŒæ—¶å®ç°ç›‘å¬å™¨åŠŸèƒ½</span></span><br><span class="line"><span class="comment">//æ–¹å¼ä¸€</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountScoreService</span> <span class="keyword">implements</span> <span class="title class_">ApplicationListener</span>&lt;LoginSuccessEvent&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onApplicationEvent</span><span class="params">(LoginSuccessEvent event)</span> &#123;</span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">user</span> <span class="operator">=</span> event.getUser();</span><br><span class="line">        addAccountScore(user.getUsername());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">addAccountScore</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        System.out.println(username + <span class="string">&quot; åŠ äº†1åˆ†ï¼ˆé€šè¿‡ ApplicationListenerï¼‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ–¹å¼äºŒ</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CouponService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleLoginSuccess</span><span class="params">(LoginSuccessEvent event)</span> &#123;</span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">user</span> <span class="operator">=</span> event.getUser();</span><br><span class="line">        sendCoupon(user.getUsername());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">sendCoupon</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        System.out.println(username + <span class="string">&quot; éšæœºå¾—åˆ°äº†ä¸€å¼ ä¼˜æƒ åˆ¸ï¼ˆé€šè¿‡ @EventListenerï¼‰&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#2ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="2ã€è‡ªåŠ¨é…ç½®åŸç†"></a>2ã€è‡ªåŠ¨é…ç½®åŸç†</h4><h5 id="1ã€å…¥é—¨ç†è§£"><a href="#1ã€å…¥é—¨ç†è§£" class="headerlink" title="1ã€å…¥é—¨ç†è§£"></a>1ã€å…¥é—¨ç†è§£</h5><blockquote>
<p>åº” â½¤å…³æ³¨çš„ä¸‰â¼¤æ ¸â¼¼ï¼šåœºæ™¯ã€é…ç½®ã€ç»„ä»¶</p>
</blockquote>
<h6 id="1ã€è‡ªåŠ¨é…ç½®æµç¨‹"><a href="#1ã€è‡ªåŠ¨é…ç½®æµç¨‹" class="headerlink" title="1ã€è‡ªåŠ¨é…ç½®æµç¨‹"></a>1ã€è‡ªåŠ¨é…ç½®æµç¨‹</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251223010045177.png" alt="image-20251223010045177"></p>
<ol>
<li><p>å¯¼â¼Š starter  </p>
</li>
<li><p>ä¾èµ–å¯¼â¼Š autoconfigure  </p>
</li>
<li><p>å¯»æ‰¾ç±»è·¯å¾„ä¸‹  META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports  â½‚ä»¶ </p>
</li>
<li><p>å¯åŠ¨ï¼ŒåŠ è½½æ‰€æœ‰  â¾ƒåŠ¨é…ç½®ç±»  xxxAutoConfiguration  </p>
<p>a.  ç»™å®¹å™¨ä¸­é…ç½®åŠŸèƒ½ ç»„ä»¶ </p>
<p>b. ç»„ä»¶å‚æ•° ç»‘å®šåˆ°  å±æ€§ç±» ä¸­ã€‚ </p>
<p>c. å± æ€§ç±» å’Œ xxxProperties  é…ç½®â½‚ä»¶ å‰ç¼€é¡¹ç»‘å®š </p>
<p>d. @Contional æ´¾â½£çš„æ¡ä»¶æ³¨è§£  è¿›â¾åˆ¤æ–­æ˜¯å¦ç»„ä»¶â½£æ•ˆ </p>
</li>
<li><p>æ•ˆæœï¼š </p>
<p>a.  ä¿®æ”¹é…ç½®â½‚ä»¶ï¼Œä¿®æ”¹åº•å±‚å‚æ•° </p>
<p>b.  æ‰€æœ‰åœºæ™¯â¾ƒåŠ¨é…ç½®å¥½ç›´æ¥ä½¿â½¤ </p>
<p>c.  å¯ä»¥æ³¨â¼ŠSpringBooté…ç½®å¥½çš„ç»„ä»¶éšæ—¶ä½¿â½¤</p>
</li>
</ol>
<h6 id="2ã€SPIæœºåˆ¶"><a href="#2ã€SPIæœºåˆ¶" class="headerlink" title="2ã€SPIæœºåˆ¶"></a>2ã€SPIæœºåˆ¶</h6><p>â€‹    ä¸Šé¢è¿™ç§éƒ½æ˜¯SPIæ€æƒ³ã€‚</p>
<blockquote>
<p><strong>Javaä¸­çš„SPIï¼ˆService Provider Interfaceï¼‰æ˜¯â¼€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼</strong>ï¼Œ<strong>â½¤äºåœ¨åº”â½¤ç¨‹åºä¸­åŠ¨æ€åœ°å‘ç° å’ŒåŠ è½½ç»„ä»¶</strong>ã€‚SPIçš„æ€æƒ³æ˜¯ï¼Œå®šä¹‰â¼€ä¸ªæ¥â¼æˆ–æŠ½è±¡ç±»ï¼Œç„¶åé€šè¿‡åœ¨classpathä¸­å®šä¹‰å®ç°è¯¥æ¥â¼çš„ç±» æ¥å®ç°å¯¹ç»„ä»¶çš„åŠ¨æ€å‘ç°å’ŒåŠ è½½ã€‚</p>
<p>SPIçš„ä¸»è¦â½¬çš„æ˜¯è§£å†³åœ¨åº”â½¤ç¨‹åºä¸­ä½¿â½¤å¯æ’æ‹”ç»„ä»¶çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œâ¼€ä¸ªåº”â½¤ç¨‹åºå¯èƒ½éœ€è¦ä½¿â½¤ä¸ åŒçš„â½‡å¿—æ¡†æ¶æˆ–æ•°æ®åº“è¿æ¥æ± ï¼Œä½†æ˜¯è¿™äº›ç»„ä»¶çš„é€‰æ‹©å¯èƒ½å–å†³äºè¿â¾æ—¶çš„æ¡ä»¶ã€‚é€šè¿‡ä½¿â½¤SPIï¼Œåº” â½¤ç¨‹åºå¯ä»¥åœ¨è¿â¾æ—¶å‘ç°å¹¶åŠ è½½é€‚å½“çš„ç»„ä»¶ï¼Œâ½½â½†éœ€åœ¨ä»£ç ä¸­ç¡¬ç¼–ç è¿™äº›ç»„ä»¶çš„å®ç°ç±»ã€‚ </p>
<p>åœ¨Javaä¸­ï¼ŒSPIçš„å®ç°â½…å¼æ˜¯é€šè¿‡åœ¨  META-INF/services  â½¬å½•ä¸‹åˆ›å»ºâ¼€ä¸ªä»¥æœåŠ¡æ¥â¼å…¨é™å®šå ä¸ºåå­—çš„â½‚ä»¶ï¼Œâ½‚ä»¶ä¸­åŒ…å«å®ç°è¯¥æœåŠ¡æ¥â¼çš„ç±»çš„å…¨é™å®šåã€‚å½“åº”â½¤ç¨‹åºå¯åŠ¨æ—¶ï¼ŒJavaçš„SPIæœºåˆ¶ ä¼šâ¾ƒåŠ¨æ‰«æclasspathä¸­çš„è¿™äº›â½‚ä»¶ï¼Œå¹¶æ ¹æ®â½‚ä»¶ä¸­æŒ‡å®šçš„ç±»åæ¥åŠ è½½å®ç°ç±»ã€‚ </p>
<p>é€šè¿‡ä½¿â½¤SPIï¼Œåº”â½¤ç¨‹åºå¯ä»¥å®ç°æ›´çµæ´»ã€å¯æ‰©å±•çš„æ¶æ„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é¿å…ç¡¬ç¼–ç ä¾èµ–å…³ç³»å’Œå¢åŠ  ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­¥éª¤ 1ï¼šå®šä¹‰æ¥å£ï¼ˆæˆ–æŠ½è±¡ç±»ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Robot</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­¥éª¤ 2ï¼šç¼–å†™å®ç°ç±»ï¼ˆç”±ä¸åŒå‚å•†æˆ–æ¨¡å—æä¾›ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bumblebee</span> <span class="keyword">implements</span> <span class="title class_">Robot</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Bumblebee: Hello! I&#x27;m from Transformers.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OptimusPrime</span> <span class="keyword">implements</span> <span class="title class_">Robot</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sayHello</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Optimus Prime: Freedom is the right of all sentient beings.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ­¥éª¤ 3ï¼šåˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆå…³é”®ï¼ï¼‰</span></span><br><span class="line"><span class="comment">//åœ¨ resources ç›®å½•ä¸‹åˆ›å»ºï¼šsrc/main/resources/META-INF/services/com.example.Robot</span></span><br><span class="line"><span class="comment">//æ–‡ä»¶å†…å®¹ï¼ˆæ¯è¡Œä¸€ä¸ªå®ç°ç±»çš„å…¨é™å®šåï¼‰ï¼š</span></span><br><span class="line">com.example.Bumblebee</span><br><span class="line">com.example.OptimusPrime</span><br><span class="line">    </span><br><span class="line"><span class="comment">//æ­¥éª¤ 4ï¼šé€šè¿‡ ServiceLoader åŠ è½½æœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RobotApp</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ServiceLoader&lt;Robot&gt; robots = ServiceLoader.load(Robot.class);</span><br><span class="line">        <span class="keyword">for</span> (Robot robot : robots) &#123;</span><br><span class="line">            robot.sayHello();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ServiceLoaderå·¥ä½œåŸç†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ServiceLoader.load(Robot.class) çš„å†…éƒ¨æµç¨‹ï¼š</span><br><span class="line">	è·å–å½“å‰çº¿ç¨‹ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨ï¼ˆThread.currentThread().getContextClassLoader()ï¼‰</span><br><span class="line">	åœ¨ classpath ä¸‹æŸ¥æ‰¾æ‰€æœ‰ META-INF/services/com.example.Robot æ–‡ä»¶</span><br><span class="line">	è¯»å–æ–‡ä»¶å†…å®¹ï¼Œé€è¡Œè§£æä¸ºç±»å</span><br><span class="line">	ä½¿ç”¨ç±»åŠ è½½å™¨åŠ¨æ€åŠ è½½è¿™äº›ç±»ï¼ˆClass.forName()ï¼‰</span><br><span class="line">	é€šè¿‡åå°„è°ƒç”¨æ— å‚æ„é€ å™¨ï¼Œå®ä¾‹åŒ–å¯¹è±¡</span><br><span class="line">	è¿”å›ä¸€ä¸ª æƒ°æ€§è¿­ä»£å™¨ï¼ˆLazy Iteratorï¼‰ï¼Œéå†æ—¶æ‰åˆ›å»ºå®ä¾‹</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>Java åŸç”Ÿ SPI</th>
<th>Spring Bean æœºåˆ¶</th>
</tr>
</thead>
<tbody>
<tr>
<td>è‡ªåŠ¨å‘ç°</td>
<td><code>META-INF/services/</code></td>
<td><code>@ComponentScan</code></td>
</tr>
<tr>
<td>ä¾èµ–æ³¨å…¥</td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>âœ… æ”¯æŒ</td>
</tr>
<tr>
<td>æ¡ä»¶åŠ è½½</td>
<td>âŒ ä¸æ”¯æŒ</td>
<td>âœ… <code>@Conditional</code></td>
</tr>
<tr>
<td>å‘½åè®¿é—®</td>
<td>âŒ åªèƒ½éå†</td>
<td>âœ… <code>@Qualifier</code>, <code>@Primary</code></td>
</tr>
<tr>
<td>ç”Ÿå‘½å‘¨æœŸç®¡ç†</td>
<td>âŒ æ— </td>
<td>âœ… <code>InitializingBean</code>, <code>DisposableBean</code></td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>âœ… <strong>Spring æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ›´å¼ºå¤§çš„â€œSPI å®ç°â€</strong>ã€‚</p>
</blockquote>
<h6 id="3ã€åŠŸèƒ½å¼€å…³"><a href="#3ã€åŠŸèƒ½å¼€å…³" class="headerlink" title="3ã€åŠŸèƒ½å¼€å…³"></a>3ã€åŠŸèƒ½å¼€å…³</h6><p>â¾ƒåŠ¨é…ç½®ï¼šå…¨éƒ¨éƒ½é…ç½®å¥½ï¼Œä»€ä¹ˆéƒ½ä¸â½¤ç®¡ã€‚   â¾ƒåŠ¨æ‰¹é‡å¯¼â¼Š </p>
<p>â€‹    é¡¹â½¬â¼€å¯åŠ¨ï¼Œspiâ½‚ä»¶ä¸­æŒ‡å®šçš„æ‰€æœ‰éƒ½åŠ è½½ã€‚ </p>
<p>@EnableXxxx  ï¼šâ¼¿åŠ¨æ§åˆ¶å“ªäº›åŠŸèƒ½çš„å¼€å¯ï¼› â¼¿åŠ¨å¯¼â¼Šã€‚ </p>
<p>â€‹    å¼€å¯xxxåŠŸèƒ½ </p>
<p>â€‹    éƒ½æ˜¯åˆ©â½¤ @Import æŠŠæ­¤åŠŸèƒ½è¦â½¤çš„ç»„ä»¶å¯¼â¼Šè¿›å»</p>
<h5 id="2ã€è¿›é˜¶ç†è§£"><a href="#2ã€è¿›é˜¶ç†è§£" class="headerlink" title="2ã€è¿›é˜¶ç†è§£"></a>2ã€è¿›é˜¶ç†è§£</h5><h6 id="1ã€-SpringBootApplication"><a href="#1ã€-SpringBootApplication" class="headerlink" title="1ã€@SpringBootApplication"></a>1ã€@SpringBootApplication</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@SpringBootConfiguration</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="meta">@ComponentScan(excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">    @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span></span><br><span class="line"><span class="meta">    @Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SpringBootApplication &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@SpringBootConfiguration å°±æ˜¯ï¼š @Configuration ï¼Œå®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œé…ç½®ç±»ã€‚spring iocå¯åŠ¨å°±ä¼šåŠ è½½åˆ›å»ºè¿™ä¸ªç±»å¯¹è±¡</p>
<p>@EnableAutoConfigurationï¼šå¼€å¯â¾ƒåŠ¨é…ç½®</p>
<p>â€‹    @AutoConfigurationPackageï¼š<strong>æ‰«æä¸»ç¨‹åºåŒ…ï¼šåŠ è½½â¾ƒâ¼°çš„ç»„ä»¶</strong></p>
<p>â€‹        åˆ©â½¤ @Import(AutoConfigurationPackages.Registrar.class)  æƒ³è¦ç»™å®¹å™¨ä¸­å¯¼â¼Šç»„ä»¶ã€‚</p>
<p>â€‹        æŠŠä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…çš„æ‰€æœ‰ç»„ä»¶å¯¼â¼Šè¿›æ¥ã€‚</p>
<p>â€‹        ä¸ºä»€ä¹ˆSpringBooté»˜è®¤åªæ‰«æä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…åŠå…¶â¼¦åŒ…ï¼Ÿ</p>
<p>â€‹    <strong><code>@Import(AutoConfigurationImportSelector.class)</code></strong>ï¼š<strong>åŠ è½½æ‰€æœ‰â¾ƒåŠ¨é…ç½®ç±»ï¼šåŠ è½½starterå¯¼â¼Šçš„ç»„ä»¶</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»–çš„ä»£ç æ˜¯è¿™æ ·å†™çš„</span></span><br><span class="line">List&lt;String&gt; configurations = ImportCandidates.load(AutoConfiguration.class,getBeanClassLoader())</span><br><span class="line">.getCandidates();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ‰«æSPIâ½‚ä»¶ï¼š  META-INF/spring/org.springframework.boot.autoconfigure.AutoConf iguration.imports</p>
</blockquote>
<p>@ComponentScan</p>
<blockquote>
<p>ç»„ä»¶æ‰«æï¼šæ’é™¤â¼€äº›ç»„ä»¶ï¼ˆå“ªäº›ä¸è¦ï¼‰ ï¼Œæ³¨æ„è¿™é‡Œä¹Ÿä¼šæ‰«ææ³¨å†Œï¼Œåªæ˜¯æ·»åŠ äº†æ’é™¤è·¯å¾„è€Œå·²</p>
<p><strong>æ— è„‘æ³¨å†Œ</strong>ï¼Œå®ƒä¸ä¼šçœ‹ @ConditionalOnMissingBean ç­‰æ¡ä»¶</p>
<p>æ’é™¤å‰â¾¯å·²ç»æ‰«æè¿›æ¥çš„ é…ç½®ç±» ã€å’Œ â¾ƒåŠ¨é…ç½®ç±» ã€‚å› ä¸ºä¸€ä¸ªæ˜¯è‡ªå·±çš„ç»„ä»¶ä¸€ä¸ªæ˜¯starterçš„ï¼Œé‚£ä¹ˆå¦‚æœè‡ªå·±çš„ç»„ä»¶é‡Œé¢ä¹Ÿå†™äº†ä¸ªstarteré‚£ä¹ˆå°±é‡å¤æ³¨å†Œäº†ä¸¤æ¬¡ï¼Œè€Œè‡ªåŠ¨é…ç½®å¿…é¡»åœ¨æ‰€æœ‰ç”¨æˆ· Bean åŠ è½½å®Œåï¼Œæ ¹æ®æ¡ä»¶åˆ¤æ–­ã€‚å¦‚æœæå‰æŠŠç±»åŠ è½½äº†ï¼Œè‡ªåŠ¨é…ç½®çš„é€»è¾‘å°±å…¨ä¹±äº†ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(excludeFilters = &#123; @Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),</span></span><br><span class="line"><span class="meta">@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) &#125;)</span></span><br></pre></td></tr></table></figure>
<h6 id="2ã€å®Œæ•´å¯åŠ¨åŠ è½½æµç¨‹"><a href="#2ã€å®Œæ•´å¯åŠ¨åŠ è½½æµç¨‹" class="headerlink" title="2ã€å®Œæ•´å¯åŠ¨åŠ è½½æµç¨‹"></a>2ã€å®Œæ•´å¯åŠ¨åŠ è½½æµç¨‹</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/image-20251223023144725.png" alt="image-20251223023144725"></p>
<p>ç¬¬ä¸€é˜¶æ®µï¼šåˆå§‹åŒ– SpringApplication å®ä¾‹</p>
<p>å½“ä½ è°ƒç”¨ SpringApplication.run(Main.class, args) æ—¶ï¼Œåå°é¦–å…ˆä¼šé€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ª SpringApplication å¯¹è±¡ã€‚</p>
<ol>
<li><strong>æ¨æ–­åº”ç”¨ç±»å‹</strong>ï¼šåˆ¤æ–­å½“å‰åº”ç”¨æ˜¯æ™®é€šé¡¹ç›®ï¼ˆNoneï¼‰ã€Web é¡¹ç›®ï¼ˆServletï¼‰è¿˜æ˜¯å“åº”å¼é¡¹ç›®ï¼ˆReactiveï¼‰ã€‚</li>
<li><strong>åŠ è½½åˆå§‹åŒ–å™¨ (Initializers)</strong>ï¼šä» META-INF/spring.factoriesï¼ˆæˆ– Spring 3.0+ çš„æ–°ä½ç½®ï¼‰ä¸­è¯»å–æ‰€æœ‰ ApplicationContextInitializer çš„å®ç°ç±»ã€‚</li>
<li><strong>åŠ è½½ç›‘å¬å™¨ (Listeners)</strong>ï¼šåŒæ ·ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–æ‰€æœ‰ ApplicationListenerã€‚</li>
<li><strong>æ¨æ–­ä¸»å¯åŠ¨ç±»</strong>ï¼šé€šè¿‡çº¿ç¨‹æ ˆæ‰¾åˆ°åŒ…å« main æ–¹æ³•çš„é‚£ä¸ªç±»ï¼Œæ–¹ä¾¿åç»­åŒ…æ‰«æã€‚</li>
</ol>
<p>ç¬¬äºŒé˜¶æ®µï¼šæ‰§è¡Œ run() æ–¹æ³•ï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰</p>
<p>è¿™æ˜¯ Spring Boot å¯åŠ¨çš„æœ€æ ¸å¿ƒéƒ¨åˆ†ï¼ŒåŒ…å«äº†ç¯å¢ƒå‡†å¤‡ã€å®¹å™¨åˆ›å»ºå’Œ Bean æ³¨å…¥ã€‚</p>
<ol>
<li>å¼€å¯è®¡æ—¶ä¸ç›‘å¬</li>
</ol>
<ul>
<li><strong>å¯åŠ¨ StopWatch</strong>ï¼šè®°å½•å¯åŠ¨è€—æ—¶ã€‚</li>
<li><strong>è·å–å¹¶å¯åŠ¨ç›‘å¬å™¨</strong>ï¼šä» spring.factories è·å– SpringApplicationRunListenersï¼Œå¹¶å‘å¸ƒâ€œæ­£åœ¨å¯åŠ¨â€çš„äº‹ä»¶ï¼ˆstartingï¼‰ã€‚</li>
</ul>
<ol>
<li>å‡†å¤‡ç¯å¢ƒ (Environment)</li>
</ol>
<ul>
<li><strong>å°è£…å‘½ä»¤è¡Œå‚æ•°</strong>ï¼šå°† args å°è£…è¿› DefaultApplicationArgumentsã€‚</li>
<li><strong>åˆ›å»ºå¹¶é…ç½® Environment</strong>ï¼šè¯»å– application.properties/yml ä»¥åŠç¯å¢ƒå˜é‡ã€‚</li>
<li><strong>å‘å¸ƒç¯å¢ƒå‡†å¤‡å°±ç»ªäº‹ä»¶</strong>ï¼šé€šçŸ¥ç›‘å¬å™¨ç¯å¢ƒå·² OKã€‚</li>
</ul>
<ol>
<li>åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡ (ApplicationContext)</li>
</ol>
<ul>
<li>æ ¹æ®ç¬¬ä¸€é˜¶æ®µæ¨æ–­çš„ç±»å‹ï¼Œé€šè¿‡åå°„åˆ›å»ºå…·ä½“çš„å®¹å™¨ï¼š<ul>
<li>Servlet åº”ç”¨ï¼šAnnotationConfigServletWebServerApplicationContext</li>
<li>Reactive åº”ç”¨ï¼šAnnotationConfigReactiveWebServerApplicationContext</li>
</ul>
</li>
</ul>
<ol>
<li>å®¹å™¨é¢„å¤„ç† (prepareContext)</li>
</ol>
<ul>
<li><strong>å…³è”ç¯å¢ƒ</strong>ï¼šå°† Environment æ³¨å…¥å®¹å™¨ã€‚</li>
<li><strong>åº”ç”¨åˆå§‹åŒ–å™¨</strong>ï¼šæ‰§è¡Œä¹‹å‰åŠ è½½çš„ Initializersã€‚</li>
<li><strong>åŠ è½½èµ„æº</strong>ï¼šå°†ä¸»å¯åŠ¨ç±»ï¼ˆMain Classï¼‰æ³¨å†Œä¸º Bean å®šä¹‰ï¼ˆBeanDefinitionï¼‰ï¼Œè¿™æ˜¯åç»­è‡ªåŠ¨é…ç½®çš„å…¥å£ã€‚</li>
<li><strong>å‘å¸ƒä¸Šä¸‹æ–‡å‡†å¤‡å°±ç»ªäº‹ä»¶</strong>ã€‚</li>
</ul>
<ol>
<li>åˆ·æ–°å®¹å™¨ (refreshContext) â€”â€” <strong>æœ€é‡è¦çš„æ­¥éª¤</strong></li>
</ol>
<p>è¿™ä¸€æ­¥è°ƒç”¨çš„æ˜¯ Spring æ ¸å¿ƒæ¡†æ¶çš„ refresh() æ–¹æ³•ï¼Œå®ƒæ˜¯ <strong>Bean ç”Ÿå‘½å‘¨æœŸçš„æ ¸å¿ƒ</strong>ï¼š</p>
<ul>
<li><strong>è§£æé…ç½®ç±»</strong>ï¼šConfigurationClassPostProcessor å¼€å§‹å·¥ä½œï¼Œè§£æ @SpringBootApplicationï¼Œæ‰«æåŒ…ï¼Œè§£æ @Importã€‚</li>
<li><strong>è‡ªåŠ¨é…ç½® (Auto-Configuration)</strong>ï¼šæ ¹æ® Condition æ¡ä»¶å†³å®šå“ªäº›é…ç½®ç”Ÿæ•ˆã€‚</li>
<li><strong>å®ä¾‹åŒ– Bean</strong>ï¼šåˆ›å»ºæ‰€æœ‰çš„å•ä¾‹ Beanï¼ˆService, Controller ç­‰ï¼‰ã€‚</li>
<li><strong>å¯åŠ¨å†…åµŒæœåŠ¡å™¨</strong>ï¼šå¦‚æœæ˜¯ Web é¡¹ç›®ï¼Œåœ¨ onRefresh é˜¶æ®µä¼šåˆ›å»ºå¹¶å¯åŠ¨ <strong>Tomcat/Jetty</strong>ã€‚</li>
</ul>
<ol>
<li>å®¹å™¨åˆ·æ–°åå¤„ç† (afterRefresh)</li>
</ol>
<ul>
<li>åœæ­¢ StopWatch è®¡æ—¶ã€‚</li>
<li>æ‰“å°å¯åŠ¨æˆåŠŸçš„æ—¥å¿—ã€‚</li>
<li><strong>å‘å¸ƒåº”ç”¨å·²å¯åŠ¨äº‹ä»¶</strong>ã€‚</li>
</ul>
<ol>
<li>æ‰§è¡Œ Runner (Call Runners)</li>
</ol>
<ul>
<li>æŸ¥æ‰¾å¹¶ä¾æ¬¡æ‰§è¡Œå®ç°äº† CommandLineRunner æˆ– ApplicationRunner æ¥å£çš„ç±»ã€‚è¿™é€šå¸¸ç”¨äºåœ¨é¡¹ç›®å¯åŠ¨åç«‹å³æ‰§è¡ŒæŸäº›åˆå§‹åŒ–é€»è¾‘ï¼ˆå¦‚é¢„çƒ­ç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h4 id="3ã€è‡ªå®šä¹‰starter"><a href="#3ã€è‡ªå®šä¹‰starter" class="headerlink" title="3ã€è‡ªå®šä¹‰starter"></a>3ã€è‡ªå®šä¹‰starter</h4><p>ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰starter</p>
<blockquote>
<p>åœºæ™¯ï¼šæŠ½å–èŠå¤©æœºå™¨â¼ˆåœºæ™¯ï¼Œå®ƒå¯ä»¥æ‰“æ‹›å‘¼ã€‚</p>
<p>æ•ˆæœï¼šä»»ä½•é¡¹â½¬å¯¼â¼Šæ­¤  starter  éƒ½å…·æœ‰æ‰“æ‹›å‘¼åŠŸèƒ½ï¼Œå¹¶ä¸”é—®å€™è¯­ä¸­çš„â¼ˆåéœ€è¦å¯ä»¥åœ¨é…ç½®â½‚ä»¶ä¸­ä¿® æ”¹</p>
</blockquote>
<ol>
<li>åˆ›å»º â¾ƒå®šä¹‰ starter  é¡¹â½¬ï¼Œå¼•â¼Š spring-boot-starter  åŸºç¡€ä¾èµ– </li>
<li>ç¼–å†™æ¨¡å—åŠŸèƒ½ï¼Œå¼•â¼Šæ¨¡å—æ‰€æœ‰éœ€è¦çš„ä¾èµ–ã€‚ </li>
<li>ç¼–å†™ xxxAutoConfiguration  â¾ƒåŠ¨é…ç½®ç±»ï¼Œå¸®å…¶ä»–é¡¹â½¬å¯¼â¼Šè¿™ä¸ªæ¨¡å—éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ </li>
<li>ç¼–å†™é…ç½®â½‚ä»¶ META-INF/spring/org.springframework.boot.autoconfigure. AutoConfiguration.imports  æŒ‡å®šå¯åŠ¨éœ€è¦åŠ è½½çš„â¾ƒåŠ¨é…ç½® </li>
<li>å…¶ä»–é¡¹â½¬å¼•â¼Šå³å¯ä½¿â½¤</li>
</ol>
<h5 id="1ã€ä¸šåŠ¡ä»£ç "><a href="#1ã€ä¸šåŠ¡ä»£ç " class="headerlink" title="1ã€ä¸šåŠ¡ä»£ç "></a>1ã€ä¸šåŠ¡ä»£ç </h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;robot&quot;)</span>  <span class="comment">//æ­¤å±æ€§ç±»å’Œé…ç½®â½‚ä»¶æŒ‡å®šå‰ç¼€ç»‘å®š</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RobotProperties</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2ã€åŸºæœ¬æŠ½å–"><a href="#2ã€åŸºæœ¬æŠ½å–" class="headerlink" title="2ã€åŸºæœ¬æŠ½å–"></a>2ã€åŸºæœ¬æŠ½å–</h5><p>åˆ›å»ºstarteré¡¹â½¬ï¼ŒæŠŠå…¬å…±ä»£ç éœ€è¦çš„æ‰€æœ‰ä¾èµ–å¯¼â¼Š </p>
<p>æŠŠå…¬å…±ä»£ç å¤åˆ¶è¿›æ¥ </p>
<p>â¾ƒâ¼°å†™â¼€ä¸ª  </p>
<p>RobotAutoConfiguration  ï¼Œç»™å®¹å™¨ä¸­å¯¼â¼Šè¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ </p>
<p>â€‹    ä¸ºä»€ä¹ˆè¿™äº›ç»„ä»¶é»˜è®¤ä¸ä¼šæ‰«æè¿›å»ï¼Ÿ </p>
<p>â€‹    starteræ‰€åœ¨çš„åŒ…å’Œ å¼•â¼Šå®ƒçš„é¡¹â½¬çš„ä¸»ç¨‹åºæ‰€åœ¨çš„åŒ…ä¸æ˜¯â½—â¼¦å±‚çº§</p>
<p>åˆ«â¼ˆå¼•â½¤è¿™ä¸ª starter   ï¼Œç›´æ¥å¯¼â¼Šè¿™ä¸ª RobotAutoConfiguration  ,å°±èƒ½æŠŠè¿™ä¸ªåœºæ™¯çš„ç»„ä»¶å¯¼â¼Šè¿›æ¥</p>
<p>åŠŸèƒ½â½£æ•ˆ</p>
<p>æµ‹è¯•ç¼–å†™é…ç½®â½‚ä»¶</p>
<h5 id="3ã€ä½¿ç”¨-EnableXxxæœºåˆ¶"><a href="#3ã€ä½¿ç”¨-EnableXxxæœºåˆ¶" class="headerlink" title="3ã€ä½¿ç”¨@EnableXxxæœºåˆ¶"></a>3ã€ä½¿ç”¨@EnableXxxæœºåˆ¶</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Import(RobotAutoConfiguration.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> EnableRobot &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ«â¼ˆå¼•â¼Š starter  éœ€è¦ä½¿â½¤  @EnableRobot  å¼€å¯åŠŸèƒ½ </p>
<h5 id="4ã€å®Œå…¨è‡ªåŠ¨é…ç½®"><a href="#4ã€å®Œå…¨è‡ªåŠ¨é…ç½®" class="headerlink" title="4ã€å®Œå…¨è‡ªåŠ¨é…ç½®"></a>4ã€å®Œå…¨è‡ªåŠ¨é…ç½®</h5><p>ä¾èµ–SpringBootçš„SPIæœºåˆ¶ Java </p>
<p>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports  â½‚ä»¶ä¸­ç¼–å†™å¥½æˆ‘ä»¬â¾ƒåŠ¨é…ç½®ç±»çš„å…¨ç±»åå³å¯ </p>
<p>é¡¹â½¬å¯åŠ¨ï¼Œâ¾ƒåŠ¨åŠ è½½æˆ‘ä»¬çš„â¾ƒåŠ¨é…ç½®ç±»</p>
<h5 id="å®Œæ•´æ¡ˆä¾‹"><a href="#å®Œæ•´æ¡ˆä¾‹" class="headerlink" title="å®Œæ•´æ¡ˆä¾‹"></a>å®Œæ•´æ¡ˆä¾‹</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">hello-spring-boot-starter/</span><br><span class="line">â”œâ”€â”€ pom.xml</span><br><span class="line">â””â”€â”€ src/main/java</span><br><span class="line">    â””â”€â”€ com/example/starter</span><br><span class="line">        â”œâ”€â”€ HelloProperties.java      // é…ç½®å±æ€§</span><br><span class="line">        â”œâ”€â”€ HelloService.java         // æ ¸å¿ƒæœåŠ¡</span><br><span class="line">        â””â”€â”€ HelloAutoConfiguration.java // è‡ªåŠ¨é…ç½®ç±»</span><br><span class="line">â””â”€â”€ src/main/resources</span><br><span class="line">    â””â”€â”€ META-INF</span><br><span class="line">        â””â”€â”€ spring</span><br><span class="line">            â””â”€â”€ org.springframework.boot.autoconfigure.AutoConfiguration.imports</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Starter é¡¹ç›®ï¼ˆMavenï¼‰</span></span><br><span class="line"><span class="comment">//1ã€pomæ–‡ä»¶ä¸è¦å¼•å…¥ spring-boot-starterï¼ˆé¿å…ä¼ é€’ä¾èµ–æ±¡æŸ“ï¼‰åªä¾èµ– spring-boot-autoconfigure</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒæ­¥ï¼šç¼–å†™æ ¸å¿ƒä»£ç </span></span><br><span class="line"><span class="comment">//2.1 é…ç½®å±æ€§ç±»ï¼šHelloProperties.java</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;example.hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰“æ‹›å‘¼çš„å‰ç¼€ï¼Œé»˜è®¤ &quot;Hello&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">prefix</span> <span class="operator">=</span> <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPrefix</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrefix</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.prefix = prefix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.2 æœåŠ¡ç±»ï¼šHelloService.java</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String prefix;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HelloService</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.prefix = prefix;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> prefix + <span class="string">&quot;, &quot;</span> + name + <span class="string">&quot;!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.3 è‡ªåŠ¨é…ç½®ç±»ï¼šHelloAutoConfiguration.java</span></span><br><span class="line"><span class="meta">@AutoConfiguration</span> <span class="comment">// Spring Boot 2.7+ æ¨èæ³¨è§£ï¼ˆæ›¿ä»£ @Configuration + EnableAutoConfigurationï¼‰</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(HelloProperties.class)</span> <span class="comment">// ç»‘å®šé…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean</span> <span class="comment">// å¦‚æœç”¨æˆ·æ²¡è‡ªå®šä¹‰ HelloServiceï¼Œæ‰è‡ªåŠ¨åˆ›å»º</span></span><br><span class="line">    <span class="keyword">public</span> HelloService <span class="title function_">helloService</span><span class="params">(HelloProperties properties)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HelloService</span>(properties.getPrefix());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.4 æ³¨å†Œè‡ªåŠ¨é…ç½®ç±»ï¼ˆå…³é”®ï¼ï¼‰</span></span><br><span class="line"><span class="comment">//åˆ›å»ºæ–‡ä»¶ï¼šsrc/main/resources/META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</span></span><br><span class="line"><span class="comment">//å†…å®¹</span></span><br><span class="line"><span class="comment">//com.example.starter.HelloAutoConfiguration</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬ä¸‰æ­¥ï¼šå®‰è£…åˆ°æœ¬åœ° Maven ä»“åº“</span></span><br><span class="line"><span class="comment">//åœ¨ hello-spring-boot-starter ç›®å½•ä¸‹æ‰§è¡Œï¼š</span></span><br><span class="line"><span class="comment">//mvn clean installè¿™ä¸ªå‘½ä»¤å°±æŠŠè¿™ä¸ªæ‰“åŒ…æˆmvnäº†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç„¶åå†ä¸»åº”ç”¨mavenä¸­å¯¼å…¥å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†</span></span><br></pre></td></tr></table></figure>
<h2 id="SpringBoot3åœºæ™¯æ•´åˆ"><a href="#SpringBoot3åœºæ™¯æ•´åˆ" class="headerlink" title="SpringBoot3åœºæ™¯æ•´åˆ"></a>SpringBoot3åœºæ™¯æ•´åˆ</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://oyy0v0.top">oyy0v0</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://oyy0v0.top/2025/12/14/2025-12-14%20SpringBoot3/">https://oyy0v0.top/2025/12/14/2025-12-14%20SpringBoot3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://oyy0v0.top" target="_blank">oyy0v0ğŸ˜¼</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring%E5%85%A8%E5%AE%B6%E6%A1%B6/">-Springå…¨å®¶æ¡¶</a></div><div class="post_share"><div class="social-share" data-image="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/12/16/2025-12-16%20Java%E6%B3%A8%E8%A7%A3/" title="Javaæ³¨è§£"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Javaæ³¨è§£</div></div></a></div><div class="next-post pull-right"><a href="/2025/12/03/2025-12-03%20Redis%E9%AB%98%E7%BA%A7%E7%AF%87/" title="redis é«˜çº§ç¯‡"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">redis é«˜çº§ç¯‡</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2025/10/12/2025-10-13%20mybatis%E7%9A%84%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86/" title="Mybatisçš„æ‰§è¡ŒåŸç†"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-12</div><div class="title">Mybatisçš„æ‰§è¡ŒåŸç†</div></div></a></div><div><a href="/2024/08/07/2024-8-7%20Springboot/" title="Springboot"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-07</div><div class="title">Springboot</div></div></a></div><div><a href="/2024/07/20/2025-10-20%20Mybatis/" title="Mybatis"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-20</div><div class="title">Mybatis</div></div></a></div><div><a href="/2025/10/30/2025-10-30%20Spring%E6%89%A9%E5%B1%95%E7%82%B9%E6%A1%88%E4%BE%8B/" title="Springæ‰©å±•ç‚¹æ¡ˆä¾‹"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-30</div><div class="title">Springæ‰©å±•ç‚¹æ¡ˆä¾‹</div></div></a></div><div><a href="/2025/10/23/2025-10-23%20Spring/" title="Spring"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-23</div><div class="title">Spring</div></div></a></div><div><a href="/2025/11/23/2025-11-22%20Spring%E6%94%B6%E5%BD%95%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Springé¢è¯•"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-23</div><div class="title">Springé¢è¯•</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/7.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">oyy0v0</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">56</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/oyy0v0"><i class="fab fa-github"></i><span>ğŸ’•å‰å¾€å°å®¶</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="/assets/QRCode.jpg" target="_blank" title="icon-weixin"><i class="å¾®ä¿¡" style="color: faa-tada;"></i></a><a class="social-icon" href="https://github.com/oyy0v0" target="_blank" title="icon-github"><i class="Github" style="color: faa-tade;"></i></a><a class="social-icon" href="mailto:2925886492@qq.com" target="_blank" title="icon-youxiang"><i class="QQé‚®ç®±" style="color: faa-tada;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æ¬¢è¿æ¥æ¥åˆ°æˆ‘çš„åšå®¢</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot3"><span class="toc-text">SpringBoot3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-text">å‰ç½®çŸ¥è¯†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot3%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="toc-text">SpringBoot3æ ¸å¿ƒç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">1ã€å¿«é€Ÿå…¥é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringBoot%E4%B8%A4%E4%B8%AA%E6%9C%BA%E5%88%B6"><span class="toc-text">SpringBootä¸¤ä¸ªæœºåˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6"><span class="toc-text">1ã€ä¾èµ–ç®¡ç†æœºåˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%9C%BA%E5%88%B6"><span class="toc-text">2ã€è‡ªåŠ¨é…ç½®æœºåˆ¶</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E6%8A%80%E8%83%BD"><span class="toc-text">æ ¸å¿ƒæŠ€èƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C"><span class="toc-text">1ã€ç»„ä»¶æ³¨å†Œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E6%9D%A1%E4%BB%B6%E6%B3%A8%E8%A7%A3"><span class="toc-text">2ã€æ¡ä»¶æ³¨è§£</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="toc-text">3ã€å±æ€§ç»‘å®š</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Springboot%E5%AF%BC%E5%85%A5%E5%AE%8C%E6%95%B4%E6%B5%81%E7%A8%8B"><span class="toc-text">Springbootå¯¼å…¥å®Œæ•´æµç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%AF%BC%E5%85%A5starter-web%EF%BC%9A%E5%AF%BC%E5%85%A5%E4%BA%86web%E5%BC%80%E5%8F%91%E5%9C%BA%E6%99%AF"><span class="toc-text">1ã€å¯¼å…¥starter-webï¼šå¯¼å…¥äº†webå¼€å‘åœºæ™¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E4%B8%BB%E7%A8%8B%E5%BA%8F%EF%BC%9A-SpringBootApplication"><span class="toc-text">2ã€ä¸»ç¨‹åºï¼š@SpringBootApplication</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">3ã€è‡ªåŠ¨é…ç½®ç±»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%86%99%E4%B8%9A%E5%8A%A1%EF%BC%8C%E5%85%A8%E7%A8%8B%E6%97%A0%E9%9C%80%E5%85%B3%E5%BF%83%E5%90%84%E7%A7%8D%E6%95%B4%E5%90%88%EF%BC%88%E5%BA%95%E5%B1%82%E6%8A%8A%E6%95%B4%E5%90%88%E5%86%99%E5%A5%BD%E4%BA%86%EF%BC%8C%E8%80%8C%E4%B8%94%E4%B9%9F%E7%94%9F%E6%95%88%E4%BA%86%EF%BC%89%E3%80%82"><span class="toc-text">4ã€å†™ä¸šåŠ¡ï¼Œå…¨ç¨‹æ— éœ€å…³å¿ƒå„ç§æ•´åˆï¼ˆåº•å±‚æŠŠæ•´åˆå†™å¥½äº†ï¼Œè€Œä¸”ä¹Ÿç”Ÿæ•ˆäº†ï¼‰ã€‚</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#YAML%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">YAMLé…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E9%85%8D%E7%BD%AE"><span class="toc-text">æ—¥å¿—é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A0%BC%E5%BC%8F"><span class="toc-text">æ—¥å¿—æ ¼å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9E%E5%BD%92%E5%88%B0%E4%BD%BF%E7%94%A8"><span class="toc-text">å›å½’åˆ°ä½¿ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-text">æ—¥å¿—çº§åˆ«</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE"><span class="toc-text">è‡ªå®šä¹‰é…ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E6%97%A5%E5%BF%97%E7%BB%84%E5%90%88"><span class="toc-text">åˆ‡æ¢æ—¥å¿—ç»„åˆ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81Web%E5%BC%80%E5%8F%91"><span class="toc-text">2ã€Webå¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81Web%E5%9C%BA%E6%99%AF"><span class="toc-text">1ã€Webåœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90"><span class="toc-text">2ã€é™æ€èµ„æº</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#0%E3%80%81%E4%B8%BB%E8%A6%81%E7%A0%94%E7%A9%B6WebMvcConfiguration%E5%8E%9F%E7%90%86"><span class="toc-text">0ã€ä¸»è¦ç ”ç©¶WebMvcConfigurationåŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E7%94%9F%E6%95%88%E6%9D%A1%E4%BB%B6"><span class="toc-text">1ã€ç”Ÿæ•ˆæ¡ä»¶</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E6%95%88%E6%9E%9C"><span class="toc-text">2ã€æ•ˆæœ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81WebMvcConfigurer%E6%8E%A5%E5%8F%A3"><span class="toc-text">3ã€WebMvcConfigureræ¥å£</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%A7%84%E5%88%99%E6%BA%90%E7%A0%81"><span class="toc-text">4ã€é™æ€èµ„æºè§„åˆ™æºç </span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81-EnableWebMvcConfiguration-%E6%BA%90%E7%A0%81"><span class="toc-text">5ã€ EnableWebMvcConfiguration æºç </span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%94%BE%E4%B8%80%E4%B8%AAWebMvcConfigurer%E5%B0%B1%E8%83%BD%E7%94%9F%E6%95%88"><span class="toc-text">6ã€ä¸ºä»€ä¹ˆå®¹å™¨ä¸­æ”¾ä¸€ä¸ªWebMvcConfigurerå°±èƒ½ç”Ÿæ•ˆ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E9%BB%98%E8%AE%A4%E8%A7%84%E5%88%99"><span class="toc-text">1ã€é»˜è®¤è§„åˆ™</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E8%A7%84%E5%88%99"><span class="toc-text">2ã€è‡ªå®šä¹‰é™æ€èµ„æºè§„åˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="toc-text">1ã€é…ç½®æ–¹å¼</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E4%BB%A3%E7%A0%81%E6%96%B9%E5%BC%8F"><span class="toc-text">2ã€ä»£ç æ–¹å¼</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E8%B7%AF%E5%BE%84%E5%8C%B9%E9%85%8D"><span class="toc-text">3ã€è·¯å¾„åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81Ant%E9%A3%8E%E6%A0%BC%E8%B7%AF%E5%BE%84%E7%94%A8%E6%B3%95"><span class="toc-text">1ã€Anté£æ ¼è·¯å¾„ç”¨æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2"><span class="toc-text">2ã€æ¨¡å¼åˆ‡æ¢</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86"><span class="toc-text">4ã€å†…å®¹åå•†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%A4%9A%E7%AB%AF%E5%86%85%E5%AE%B9%E9%80%82%E9%85%8D"><span class="toc-text">1ã€å¤šç«¯å†…å®¹é€‚é…</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E9%BB%98%E8%AE%A4%E8%A7%84%E5%88%99-1"><span class="toc-text">1ã€é»˜è®¤è§„åˆ™</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA"><span class="toc-text">2ã€æ•ˆæœæ¼”ç¤º</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E5%BC%80%E5%90%AF%E5%9F%BA%E4%BA%8E%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86"><span class="toc-text">3ã€å¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E5%86%85%E5%AE%B9%E8%BF%94%E5%9B%9E"><span class="toc-text">2ã€è‡ªå®šä¹‰å†…å®¹è¿”å›</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%A2%9E%E5%8A%A0Yaml%E8%BF%94%E5%9B%9E%E6%94%AF%E6%8C%81"><span class="toc-text">1ã€å¢åŠ Yamlè¿”å›æ”¯æŒ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E6%80%9D%E8%80%83%EF%BC%9A%E5%A6%82%E4%BD%95%E5%A2%9E%E5%8A%A0%E5%85%B6%E4%BB%96"><span class="toc-text">2ã€æ€è€ƒï¼šå¦‚ä½•å¢åŠ å…¶ä»–</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86%E5%8E%9F%E7%90%86-HttpMessageConverter"><span class="toc-text">3ã€å†…å®¹åå•†åŸç†-HttpMessageConverter</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81-ReeponseBody-%E7%94%B1-HttpMessageConverter-%E5%A4%84%E7%90%86"><span class="toc-text">1ã€@ReeponseBody ç”± HttpMessageConverter å¤„ç†</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81HttpMessageConverter-%E4%BC%9A%E5%85%88%E8%BF%9B%E8%A1%8C%E5%86%85%E5%AE%B9%E5%8D%8F%E5%95%86"><span class="toc-text">2ã€HttpMessageConverter ä¼šå…ˆè¿›è¡Œå†…å®¹åå•†</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81WebMvcAutoConfiguration-%E6%8F%90%E4%BE%9B%E5%87%A0%E7%A7%8D%E9%BB%98%E8%AE%A4-HttpMessageConverters"><span class="toc-text">3ã€WebMvcAutoConfiguration æä¾›å‡ ç§é»˜è®¤ HttpMessageConverters</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81WebMvcConfigurationSupport"><span class="toc-text">4ã€WebMvcConfigurationSupport</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"><span class="toc-text">5ã€æ¨¡æ¿å¼•æ“</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81Thymeleaf%E6%95%B4%E5%90%88"><span class="toc-text">1ã€Thymeleafæ•´åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-text">2ã€åŸºç¡€è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E6%A0%B8%E5%BF%83%E7%94%A8%E6%B3%95"><span class="toc-text">1ã€æ ¸å¿ƒç”¨æ³•</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E8%AF%AD%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-text">2ã€è¯­æ³•ç¤ºä¾‹</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="toc-text">3ã€å±æ€§è®¾ç½®</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4%E3%80%81%E9%81%8D%E5%8E%86"><span class="toc-text">4ã€éå†</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#5%E3%80%81%E5%88%A4%E6%96%AD"><span class="toc-text">5ã€åˆ¤æ–­</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#6%E3%80%81%E5%B1%9E%E6%80%A7%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">6ã€å±æ€§ä¼˜å…ˆçº§</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#7%E3%80%81%E8%A1%8C%E5%86%85%E5%86%99%E6%B3%95"><span class="toc-text">7ã€è¡Œå†…å†™æ³•</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#8%E3%80%81%E5%8F%98%E9%87%8F%E9%80%89%E6%8B%A9"><span class="toc-text">8ã€å˜é‡é€‰æ‹©</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#9%E3%80%81%E6%A8%A1%E6%9D%BF%E5%B8%83%E5%B1%80"><span class="toc-text">9ã€æ¨¡æ¿å¸ƒå±€</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#10%E3%80%81devtools"><span class="toc-text">10ã€devtools</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">6ã€å›½é™…åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-text">7ã€é”™è¯¯å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E9%BB%98%E8%AE%A4%E6%9C%BA%E5%88%B6"><span class="toc-text">1ã€é»˜è®¤æœºåˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E9%94%99%E8%AF%AF%E5%93%8D%E5%BA%94"><span class="toc-text">2ã€è‡ªå®šä¹‰é”™è¯¯å“åº”</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89json%E5%93%8D%E5%BA%94"><span class="toc-text">1ã€è‡ªå®šä¹‰jsonå“åº”</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E9%A1%B5%E9%9D%A2%E5%93%8D%E5%BA%94"><span class="toc-text">2ã€è‡ªå®šä¹‰é¡µé¢å“åº”</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98"><span class="toc-text">3ã€æœ€ä½³å®æˆ˜</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%B9%E5%99%A8"><span class="toc-text">8ã€åµŒå…¥å¼å®¹å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-text">1ã€è‡ªåŠ¨é…ç½®åŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89"><span class="toc-text">2ã€è‡ªå®šä¹‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">3ã€æœ€ä½³å®è·µ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E5%85%A8%E9%9D%A2%E6%8E%A5%E7%AE%A1SpringMVC"><span class="toc-text">9ã€å…¨é¢æ¥ç®¡SpringMVC</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81WebMvcAutoConfiguration-%E5%88%B0%E5%BA%95%E2%BE%83%E5%8A%A8%E9%85%8D%E7%BD%AE%E4%BA%86%E5%93%AA%E4%BA%9B%E8%A7%84%E5%88%99"><span class="toc-text">1ã€WebMvcAutoConfiguration åˆ°åº•â¾ƒåŠ¨é…ç½®äº†å“ªäº›è§„åˆ™</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81-EnableWebMvc-%E7%A6%81%E2%BD%A4%E9%BB%98%E8%AE%A4%E2%BE%8F%E4%B8%BA"><span class="toc-text">2ã€@EnableWebMvc ç¦â½¤é»˜è®¤â¾ä¸º</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98"><span class="toc-text">10ã€æœ€ä½³å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">ä¸‰ç§æ–¹å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-text">ä¸¤ç§æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81Web%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-text">11ã€Webæ–°ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81Problemdetails"><span class="toc-text">1ã€Problemdetails</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%87%BD%E6%95%B0%E5%BC%8FWeb"><span class="toc-text">2ã€å‡½æ•°å¼Web</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%9C%BA%E6%99%AF"><span class="toc-text">1ã€åœºæ™¯</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E6%A0%B8%E5%BF%83%E7%B1%BB"><span class="toc-text">2ã€æ ¸å¿ƒç±»</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E7%A4%BA%E4%BE%8B"><span class="toc-text">3ã€ç¤ºä¾‹</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE"><span class="toc-text">3ã€æ•°æ®è®¿é—®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E5%90%88SSM%E5%9C%BA%E6%99%AF"><span class="toc-text">æ•´åˆSSMåœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%88%9B%E5%BB%BASSM%E6%95%B4%E5%90%88%E9%A1%B9%E7%9B%AE"><span class="toc-text">1ã€åˆ›å»ºSSMæ•´åˆé¡¹ç›®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">2ã€é…ç½®æ•°æ®æº</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AEMyBatis"><span class="toc-text">3ã€é…ç½®MyBatis</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81CRUD%E7%BC%96%E5%86%99"><span class="toc-text">4ã€CRUDç¼–å†™</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-text">5ã€è‡ªåŠ¨é…ç½®åŸç†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6%E3%80%81%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D%E7%94%9F%E6%95%88%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-text">6ã€å¿«é€Ÿå®šä½ç”Ÿæ•ˆçš„é…ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7%E3%80%81%E6%95%B4%E5%90%88%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">7ã€æ•´åˆå…¶ä»–æ•°æ®æº</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81Druid%E6%95%B0%E6%8D%AE%E6%BA%90"><span class="toc-text">1ã€Druidæ•°æ®æº</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E5%9F%BA%E7%A1%80%E7%89%B9%E6%80%A7"><span class="toc-text">4ã€åŸºç¡€ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81SpringApplication"><span class="toc-text">1ã€SpringApplication</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-%E8%87%AA%E5%AE%9A%E4%B9%89banner"><span class="toc-text">1.1 è‡ªå®šä¹‰banner</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2%E8%87%AA%E5%AE%9A%E4%B9%89SpringApplication"><span class="toc-text">1.2è‡ªå®šä¹‰SpringApplication</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-3FluentBuilder-API"><span class="toc-text">1.3FluentBuilder API</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81Profiles"><span class="toc-text">2ã€Profiles</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1%E4%BD%BF%E7%94%A8"><span class="toc-text">2.1ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-1-%E6%8C%87%E5%AE%9A%E7%8E%AF%E5%A2%83"><span class="toc-text">2.1.1 æŒ‡å®šç¯å¢ƒ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-2-%E6%BF%80%E6%B4%BB%E7%8E%AF%E5%A2%83"><span class="toc-text">2.1.2 æ¿€æ´»ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-1-3-%E7%8E%AF%E5%A2%83%E5%8C%85%E5%90%AB"><span class="toc-text">2.1.3 ç¯å¢ƒåŒ…å«</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8C%85%E5%90%AB%E5%88%B6%E5%AE%9A%E7%8E%AF%E5%A2%83%EF%BC%8C%E4%B8%8D%E7%AE%A1%E4%BD%A0%E6%BF%80%E6%B4%BB%E5%93%AA%E4%B8%AA%E7%8E%AF%E5%A2%83%EF%BC%8C%E8%BF%99%E4%B8%AA%E9%83%BD%E8%A6%81%E6%9C%89-%E6%80%BB%E6%98%AF%E8%A6%81%E7%94%9F%E6%95%88%E7%9A%84"><span class="toc-text">åŒ…å«åˆ¶å®šç¯å¢ƒï¼Œä¸ç®¡ä½ æ¿€æ´»å“ªä¸ªç¯å¢ƒï¼Œè¿™ä¸ªéƒ½è¦æœ‰,æ€»æ˜¯è¦ç”Ÿæ•ˆçš„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-Profile%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">2.3 Profileé…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E5%A4%96%E9%83%A8%E5%8C%96%E9%85%8D%E7%BD%AE"><span class="toc-text">3ã€å¤–éƒ¨åŒ–é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E9%85%8D%E7%BD%AE%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">3.1 é…ç½®ä¼˜å…ˆçº§</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">3.2 å¤–éƒ¨é…ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE"><span class="toc-text">3.3 å¯¼å…¥é…ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-%E5%B1%9E%E6%80%A7%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-text">3.4 å±æ€§å ä½ç¬¦</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-JUnit5"><span class="toc-text">4ã€å•å…ƒæµ‹è¯•-JUnit5</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-%E6%95%B4%E5%90%88"><span class="toc-text">4.1 æ•´åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-%E6%B5%8B%E8%AF%95"><span class="toc-text">4.2 æµ‹è¯•</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-0-%E7%BB%84%E4%BB%B6%E6%B5%8B%E8%AF%95"><span class="toc-text">4.2.0 ç»„ä»¶æµ‹è¯•</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-1-%E6%B3%A8%E8%A7%A3"><span class="toc-text">4.2.1 æ³¨è§£</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-2-%E6%96%AD%E8%A8%80"><span class="toc-text">4.2.2 æ–­è¨€</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-3-%E5%B5%8C%E5%A5%97%E6%B5%8B%E8%AF%95"><span class="toc-text">4.2.3 åµŒå¥—æµ‹è¯•</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#4-2-4-%E5%8F%82%E6%95%B0%E5%8C%96%E6%B5%8B%E8%AF%95"><span class="toc-text">4.2.4 å‚æ•°åŒ–æµ‹è¯•</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86"><span class="toc-text">5ã€æ ¸å¿ƒåŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%BA%8B%E4%BB%B6%E5%92%8C%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-text">1ã€äº‹ä»¶å’Œç›‘å¬å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%9B%91%E5%90%AC"><span class="toc-text">1ã€ç”Ÿå‘½å‘¨æœŸç›‘å¬</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E7%9B%91%E5%90%AC%E5%99%A8-SpringApplicationRunListener"><span class="toc-text">1ã€ç›‘å¬å™¨-SpringApplicationRunListener</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E4%BA%8B%E4%BB%B6%E8%A7%A6%E5%8F%91%E6%97%B6%E6%9C%BA"><span class="toc-text">2ã€äº‹ä»¶è§¦å‘æ—¶æœº</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E5%90%84%E7%A7%8D%E5%9B%9E%E8%B0%83%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-text">1ã€å„ç§å›è°ƒç›‘å¬å™¨</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%AE%8C%E6%95%B4%E8%A7%A6%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-text">2ã€å®Œæ•´è§¦å‘æµç¨‹</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81SpringBoot%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91"><span class="toc-text">3ã€SpringBootäº‹ä»¶é©±åŠ¨å¼€å‘</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E5%8E%9F%E7%90%86"><span class="toc-text">2ã€è‡ªåŠ¨é…ç½®åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%85%A5%E9%97%A8%E7%90%86%E8%A7%A3"><span class="toc-text">1ã€å…¥é—¨ç†è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE%E6%B5%81%E7%A8%8B"><span class="toc-text">1ã€è‡ªåŠ¨é…ç½®æµç¨‹</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81SPI%E6%9C%BA%E5%88%B6"><span class="toc-text">2ã€SPIæœºåˆ¶</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3%E3%80%81%E5%8A%9F%E8%83%BD%E5%BC%80%E5%85%B3"><span class="toc-text">3ã€åŠŸèƒ½å¼€å…³</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E8%BF%9B%E9%98%B6%E7%90%86%E8%A7%A3"><span class="toc-text">2ã€è¿›é˜¶ç†è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1%E3%80%81-SpringBootApplication"><span class="toc-text">1ã€@SpringBootApplication</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2%E3%80%81%E5%AE%8C%E6%95%B4%E5%90%AF%E5%8A%A8%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B"><span class="toc-text">2ã€å®Œæ•´å¯åŠ¨åŠ è½½æµç¨‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89starter"><span class="toc-text">3ã€è‡ªå®šä¹‰starter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81"><span class="toc-text">1ã€ä¸šåŠ¡ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%9F%BA%E6%9C%AC%E6%8A%BD%E5%8F%96"><span class="toc-text">2ã€åŸºæœ¬æŠ½å–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E4%BD%BF%E7%94%A8-EnableXxx%E6%9C%BA%E5%88%B6"><span class="toc-text">3ã€ä½¿ç”¨@EnableXxxæœºåˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E5%AE%8C%E5%85%A8%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="toc-text">4ã€å®Œå…¨è‡ªåŠ¨é…ç½®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E6%A1%88%E4%BE%8B"><span class="toc-text">å®Œæ•´æ¡ˆä¾‹</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot3%E5%9C%BA%E6%99%AF%E6%95%B4%E5%90%88"><span class="toc-text">SpringBoot3åœºæ™¯æ•´åˆ</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By oyy0v0</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>(() => {
  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.oyy0v0.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.oyy0v0.top/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))

    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(init,0)
    else getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.31/dist/twikoo.all.min.js').then(init)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script defer src="/js/cursor.js"></script><script async src="//at.alicdn.com/t/c/font_4658720_723un29n3vn.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script defer data-pjax src="/js/readPercent.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg);"> <a class="categoryBar-list-link" href="categories/javaå…¥é—¨/">javaå…¥é—¨</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">java</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg);"> <a class="categoryBar-list-link" href="categories/åšå®¢/">åšå®¢</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">ç®—æ³•</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg);"> <a class="categoryBar-list-link" href="categories/ç®—æ³•/">ç®—æ³•</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr">åšå®¢</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg);"> <a class="categoryBar-list-link" href="categories/å‰ç«¯/">å‰ç«¯</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">AI</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/13.jpg);"> <a class="categoryBar-list-link" href="categories/java/">java</a><span class="categoryBar-list-count">31</span><span class="categoryBar-list-descr">å‰ç«¯</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg);"> <a class="categoryBar-list-link" href="categories/GitHub/">GitHub</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">GitHub</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/11.jpg);"> <a class="categoryBar-list-link" href="categories/é¢è¯•é›†åˆ/">é¢è¯•é›†åˆ</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr">å…«è‚¡æ–‡</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/10.jpg);"> <a class="categoryBar-list-link" href="categories/AI/">AI</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">é¢è¯•é›†åˆ</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg);"> <a class="categoryBar-list-link" href="categories/æ“ä½œç³»ç»Ÿ/">æ“ä½œç³»ç»Ÿ</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">Goè¯­è¨€</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg);"> <a class="categoryBar-list-link" href="categories/Goè¯­è¨€/">Goè¯­è¨€</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">Linux</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/21.jpg);"> <a class="categoryBar-list-link" href="categories/è®¡ç®—æœºç½‘ç»œ/">è®¡ç®—æœºç½‘ç»œ</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">æ“ä½œç³»ç»Ÿ</span></li><li class="categoryBar-list-item" style="background:url(https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg);"> <a class="categoryBar-list-link" href="categories/è¸©å‘æ‚è®°/">è¸©å‘æ‚è®°</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">è®¡ç®—æœºç½‘ç»œ</span></li></ul></div></div>';
      console.log('å·²æŒ‚è½½butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = '8b4e8faa226f49ff851d67d0354499b7';
  var gaud_map_key = '85e43a6ba1ebb38fd12b0d8a886ecb9b';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo_v6.2.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.3.1" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯æ‰˜ç®¡äºVercel" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œå¤‡ç”¨çº¿è·¯æ‰˜ç®¡äº4EVERLAND" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('å·²æŒ‚è½½butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/about/'|| '/about/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://github-api.oyy0v0.top//api?oyy0v0",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'oyy0v0')
    }
  </script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/07/28/2025-6-18 å…«è‚¡æ–‡/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-07-28</span><a class="blog-slider__title" href="2025/07/28/2025-6-18 å…«è‚¡æ–‡/" alt="">å…«è‚¡æ–‡é›†åˆ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/07/28/2025-6-18 å…«è‚¡æ–‡/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/14/2025-10-14 Javaçº¿ç¨‹æ± çš„åŸç†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-14</span><a class="blog-slider__title" href="2025/10/14/2025-10-14 Javaçº¿ç¨‹æ± çš„åŸç†/" alt="">Javaçº¿ç¨‹æ± çš„åŸç†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/14/2025-10-14 Javaçº¿ç¨‹æ± çš„åŸç†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/29/2024-8-29 Solr/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/9.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-29</span><a class="blog-slider__title" href="2024/08/29/2024-8-29 Solr/" alt="">Solr</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/29/2024-8-29 Solr/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/24/2024-8-24 è™šæ‹ŸæœºVMware/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-24</span><a class="blog-slider__title" href="2024/08/24/2024-8-24 è™šæ‹ŸæœºVMware/" alt="">è™šæ‹Ÿæœº</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/24/2024-8-24 è™šæ‹ŸæœºVMware/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/26/2024-11-22 é¢è¯•/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-26</span><a class="blog-slider__title" href="2024/11/26/2024-11-22 é¢è¯•/" alt="">é¢è¯•é›†åˆ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/11/26/2024-11-22 é¢è¯•/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/11/26/2024-11-26è®¾è®¡æ¨¡å¼/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-11-26</span><a class="blog-slider__title" href="2024/11/26/2024-11-26è®¾è®¡æ¨¡å¼/" alt="">è®¾è®¡æ¨¡å¼</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/11/26/2024-11-26è®¾è®¡æ¨¡å¼/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-22 å¼€å‘æµç¨‹åŒ–/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-22 å¼€å‘æµç¨‹åŒ–/" alt="">å¼€å‘æµç¨‹åŒ–</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-22 å¼€å‘æµç¨‹åŒ–/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-14 JSP/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/13.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-14 JSP/" alt="">JSP</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-14 JSP/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-12 å¸¸ç”¨æ³¨è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/3.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-12 å¸¸ç”¨æ³¨è§£/" alt="">å¸¸ç”¨æ³¨è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-12 å¸¸ç”¨æ³¨è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-14 Servletå…¥é—¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/11.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-14 Servletå…¥é—¨/" alt="">Servletå…¥é—¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-14 Servletå…¥é—¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-14  Servletè¿›é˜¶/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-14  Servletè¿›é˜¶/" alt="">Servletè¿›é˜¶</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-14  Servletè¿›é˜¶/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-11 Mavenå®æˆ˜/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-11 Mavenå®æˆ˜/" alt="">Maven</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-11 Mavenå®æˆ˜/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/12/14/2025-12-14 SpringBoot3/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-12-14</span><a class="blog-slider__title" href="2025/12/14/2025-12-14 SpringBoot3/" alt="">Springboot3</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/12/14/2025-12-14 SpringBoot3/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/12/03/2025-12-03 Redisé«˜çº§ç¯‡/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-12-03</span><a class="blog-slider__title" href="2025/12/03/2025-12-03 Redisé«˜çº§ç¯‡/" alt="">redis é«˜çº§ç¯‡</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/12/03/2025-12-03 Redisé«˜çº§ç¯‡/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/23/2025-11-23 SpringMVC/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/21.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-23</span><a class="blog-slider__title" href="2025/11/23/2025-11-23 SpringMVC/" alt="">SpringMVC</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/23/2025-11-23 SpringMVC/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/23/2025-11-26 Redis/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-23</span><a class="blog-slider__title" href="2024/08/23/2025-11-26 Redis/" alt="">redis</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/23/2025-11-26 Redis/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/28/2025-10-28 JavaEE/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-28</span><a class="blog-slider__title" href="2025/10/28/2025-10-28 JavaEE/" alt="">JavaEE</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/28/2025-10-28 JavaEE/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/23/2025-11-22 Springæ”¶å½•é¢è¯•é¢˜/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-23</span><a class="blog-slider__title" href="2025/11/23/2025-11-22 Springæ”¶å½•é¢è¯•é¢˜/" alt="">Springé¢è¯•</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/23/2025-11-22 Springæ”¶å½•é¢è¯•é¢˜/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/23/2025-10-23 Spring/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-23</span><a class="blog-slider__title" href="2025/10/23/2025-10-23 Spring/" alt="">Spring</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/23/2025-10-23 Spring/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/30/2025-10-30 Springæ‰©å±•ç‚¹æ¡ˆä¾‹/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-30</span><a class="blog-slider__title" href="2025/10/30/2025-10-30 Springæ‰©å±•ç‚¹æ¡ˆä¾‹/" alt="">Springæ‰©å±•ç‚¹æ¡ˆä¾‹</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/30/2025-10-30 Springæ‰©å±•ç‚¹æ¡ˆä¾‹/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/22/2025-10-22 Sentinelé™æµå’Œç†”æ–­/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/3.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-22</span><a class="blog-slider__title" href="2025/10/22/2025-10-22 Sentinelé™æµå’Œç†”æ–­/" alt="">Sentinelé™æµå’Œç†”æ–­</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/22/2025-10-22 Sentinelé™æµå’Œç†”æ–­/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/14/2025-10-21 Dubbo/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-14</span><a class="blog-slider__title" href="2024/08/14/2025-10-21 Dubbo/" alt="">Dubbo</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/14/2025-10-21 Dubbo/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/22/2025-10-22 Nettyäº†è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-22</span><a class="blog-slider__title" href="2025/10/22/2025-10-22 Nettyäº†è§£/" alt="">Netty</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/22/2025-10-22 Nettyäº†è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/07/20/2025-10-20 Mybatis/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-07-20</span><a class="blog-slider__title" href="2024/07/20/2025-10-20 Mybatis/" alt="">Mybatis</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/07/20/2025-10-20 Mybatis/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/07/2024-8-7 Springboot/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="2024/08/07/2024-8-7 Springboot/" alt="">Springboot</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/07/2024-8-7 Springboot/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/12/2025-10-13 mybatisçš„æ‰§è¡ŒåŸç†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-12</span><a class="blog-slider__title" href="2025/10/12/2025-10-13 mybatisçš„æ‰§è¡ŒåŸç†/" alt="">Mybatisçš„æ‰§è¡ŒåŸç†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/12/2025-10-13 mybatisçš„æ‰§è¡ŒåŸç†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/07/2024-8-7 è¸©å‘è®°å½•/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="2024/08/07/2024-8-7 è¸©å‘è®°å½•/" alt="">è¸©å‘è®°å½•</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/07/2024-8-7 è¸©å‘è®°å½•/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/23/2024-8-23 Nginxå’Œluaå’ŒOpenrestyé«˜æ€§èƒ½å®è·µ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/9.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-23</span><a class="blog-slider__title" href="2024/08/23/2024-8-23 Nginxå’Œluaå’ŒOpenrestyé«˜æ€§èƒ½å®è·µ/" alt="">Nginx+lua+OpenRestyé«˜æ€§èƒ½å®è·µ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/23/2024-8-23 Nginxå’Œluaå’ŒOpenrestyé«˜æ€§èƒ½å®è·µ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/07/2024-8-9 å›ºå®šæ€è·¯è¯¦è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/17.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-07</span><a class="blog-slider__title" href="2024/08/07/2024-8-9 å›ºå®šæ€è·¯è¯¦è§£/" alt="">å›ºå®šæ€è·¯è¯¦è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/07/2024-8-9 å›ºå®šæ€è·¯è¯¦è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/14/2024-8-14 RPCè¿œç¨‹æœåŠ¡è°ƒç”¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-14</span><a class="blog-slider__title" href="2024/08/14/2024-8-14 RPCè¿œç¨‹æœåŠ¡è°ƒç”¨/" alt="">RPCè¿œç¨‹æœåŠ¡è°ƒç”¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/14/2024-8-14 RPCè¿œç¨‹æœåŠ¡è°ƒç”¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/08/16/2024-8-16 å‰ç«¯é€Ÿé€š/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-16</span><a class="blog-slider__title" href="2024/08/16/2024-8-16 å‰ç«¯é€Ÿé€š/" alt="">å‰ç«¯é€Ÿé€š</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/08/16/2024-8-16 å‰ç«¯é€Ÿé€š/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/06/24/2025-6-24 ç®—æ³•åˆé›†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-06-24</span><a class="blog-slider__title" href="2025/06/24/2025-6-24 ç®—æ³•åˆé›†/" alt="">ç®—æ³•åˆé›†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/06/24/2025-6-24 ç®—æ³•åˆé›†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/02/2025-3-2 é“¾è¡¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/6.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-02</span><a class="blog-slider__title" href="2025/03/02/2025-3-2 é“¾è¡¨/" alt="">é“¾è¡¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/02/2025-3-2 é“¾è¡¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/10/2025-3-9 é˜Ÿåˆ—å’Œæ ˆ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-10</span><a class="blog-slider__title" href="2025/03/10/2025-3-9 é˜Ÿåˆ—å’Œæ ˆ/" alt="">é˜Ÿåˆ—å’Œæ ˆ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/10/2025-3-9 é˜Ÿåˆ—å’Œæ ˆ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/11/2025-3-11 ç®—æ³•é—®é¢˜åˆé›†/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/14.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-11</span><a class="blog-slider__title" href="2025/03/11/2025-3-11 ç®—æ³•é—®é¢˜åˆé›†/" alt="">ç®—æ³•é—®é¢˜åˆé›†</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/11/2025-3-11 ç®—æ³•é—®é¢˜åˆé›†/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/02/23/2025-2-23 æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/12.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-02-23</span><a class="blog-slider__title" href="2025/02/23/2025-2-23 æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰/" alt="">æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/02/23/2025-2-23 æ•°ç»„å’Œå­—ç¬¦ä¸²ï¼ˆç®—æ³•ï¼‰/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/04/2025-11-4 ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/20.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-04</span><a class="blog-slider__title" href="2025/11/04/2025-11-4 ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰/" alt="">ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/04/2025-11-4 ç®—æ³•ç†è§£ï¼ˆå£è¯­åŒ–ï¼‰/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/03/02/2025-2-25 java8æ–°ç‰¹æ€§/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-03-02</span><a class="blog-slider__title" href="2025/03/02/2025-2-25 java8æ–°ç‰¹æ€§/" alt="">java8æ–°ç‰¹æ€§</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/03/02/2025-2-25 java8æ–°ç‰¹æ€§/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/11/07/2025-11-7 åŠ¨æ€ä»£ç†å’Œåå°„/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-11-07</span><a class="blog-slider__title" href="2025/11/07/2025-11-7 åŠ¨æ€ä»£ç†å’Œåå°„/" alt="">åŠ¨æ€ä»£ç†å’Œåå°„</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/11/07/2025-11-7 åŠ¨æ€ä»£ç†å’Œåå°„/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/12/16/2025-12-16 Javaæ³¨è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/5.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-12-16</span><a class="blog-slider__title" href="2025/12/16/2025-12-16 Javaæ³¨è§£/" alt="">Javaæ³¨è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/12/16/2025-12-16 Javaæ³¨è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2025/10/20/2025-10-20 RPCäº†è§£/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/3.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-20</span><a class="blog-slider__title" href="2025/10/20/2025-10-20 RPCäº†è§£/" alt="">RPCäº†è§£</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2025/10/20/2025-10-20 RPCäº†è§£/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/15/2024-4-15 æ•°æ®åº“/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/11.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-15</span><a class="blog-slider__title" href="2024/04/15/2024-4-15 æ•°æ®åº“/" alt="">æ•°æ®åº“</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/15/2024-4-15 æ•°æ®åº“/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/07/13/2024-7-2 Vue2/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/9.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-07-13</span><a class="blog-slider__title" href="2024/07/13/2024-7-2 Vue2/" alt="">Vue2</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/07/13/2024-7-2 Vue2/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/05/14/2024-4-29 è®¡ç®—æœºç½‘ç»œ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/23.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-05-14</span><a class="blog-slider__title" href="2024/05/14/2024-4-29 è®¡ç®—æœºç½‘ç»œ/" alt="">è®¡ç®—æœºç½‘ç»œ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/05/14/2024-4-29 è®¡ç®—æœºç½‘ç»œ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/28/2024-4-28 goè¯­è¨€/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/2.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-28</span><a class="blog-slider__title" href="2024/04/28/2024-4-28 goè¯­è¨€/" alt="">Goè¯­è¨€</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/28/2024-4-28 goè¯­è¨€/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/18/2024-4-20 æ“ä½œç³»ç»Ÿ/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/15.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-18</span><a class="blog-slider__title" href="2024/04/18/2024-4-20 æ“ä½œç³»ç»Ÿ/" alt="">æ“ä½œç³»ç»Ÿ</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/18/2024-4-20 æ“ä½œç³»ç»Ÿ/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/08/15/2023-8-15 AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/4.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-08-15</span><a class="blog-slider__title" href="2023/08/15/2023-8-15 AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›/" alt="">AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/08/15/2023-8-15 AIå¤ä»¤è¥å¤©æ°”é¢„æŠ¥å¤§èµ›/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2024/04/18/2024-4-18 JDBC/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/22.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-04-18</span><a class="blog-slider__title" href="2024/04/18/2024-4-18 JDBC/" alt="">JDBC</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2024/04/18/2024-4-18 JDBC/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/07/06/2023-7-1Javaå°è®°/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/21.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-06</span><a class="blog-slider__title" href="2023/07/06/2023-7-1Javaå°è®°/" alt="">Javaå°è®°</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/07/06/2023-7-1Javaå°è®°/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/06/23/2023-6-24Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/21.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-23</span><a class="blog-slider__title" href="2023/06/23/2023-6-24Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹/" alt="">Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/06/23/2023-6-24Gitå’ŒGithubä½¿ç”¨æ•™ç¨‹/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/12/18/2023-12-18 å‰ç«¯å°è®°/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-18</span><a class="blog-slider__title" href="2023/12/18/2023-12-18 å‰ç«¯å°è®°/" alt="">å‰ç«¯å°è®°</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/12/18/2023-12-18 å‰ç«¯å°è®°/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/08/2023-5-8å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/4.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-08</span><a class="blog-slider__title" href="2023/05/08/2023-5-8å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨/" alt="">å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/05/08/2023-5-8å“ˆå¸Œè¡¨å’Œæœ‰åºè¡¨/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/12/12/2023-12-11 å»ºç«‹åšå®¢ä¿å§†æ•™ç¨‹ï¼ˆ1ï¼‰/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20231208202901.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-12-12</span><a class="blog-slider__title" href="2023/12/12/2023-12-11 å»ºç«‹åšå®¢ä¿å§†æ•™ç¨‹ï¼ˆ1ï¼‰/" alt="">å»ºç«‹åšå®¢</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2023/12/12/2023-12-11 å»ºç«‹åšå®¢ä¿å§†æ•™ç¨‹ï¼ˆ1ï¼‰/" alt="">è¯¦æƒ…   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/11/27/2022-11-27 æšä¸¾ç±»/" alt=""><img width="48" height="48" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://oyy0v0pic.oss-cn-guangzhou.aliyuncs.com/18.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-11-27</span><a class="blog-slider__title" href="2022/11/27/2022-11-27 æšä¸¾ç±»/" alt="">javaseå…¥é—¨ï¼ˆæšä¸¾1ï¼‰</a><div class="blog-slider__text">çŸ¥è¯†åˆ†äº«</div><a class="blog-slider__button" href="2022/11/27/2022-11-27 æšä¸¾ç±»/" alt="">è¯¦æƒ…   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>